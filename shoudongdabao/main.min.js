function trace(t){if(useConsoleLog){var e=t;if(e instanceof egret.Rectangle)e="{ x="+e.x+",y="+e.y+",width="+e.width+",height="+e.height+" }";else if(e instanceof egret.Point)e="{ x="+e.x+",y="+e.y+" }";else if(Array.isArray(e))console.log(e);else if("object"==typeof t)try{console.log(JSON.stringify(e))}catch(i){console.log(e)}else console.log(e);return e}}function error(t){return useConsoleLog?(console.error(t),t):void 0}function warn(t){return useConsoleLog?(console.warn(t),t):void 0}var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},uiCore;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.isLoaded=!1,t.baseClasses=["uiCore.Window","uiCore.Scene"],t.effectList=[],t.timeList=[],t.intervalList=[],t.animationList=[],t.animatorList=[],t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemovedFromStage,t),t.awake(),t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddedToStage,t),t}return __extends(i,e),Object.defineProperty(i.prototype,"resourceList",{get:function(){return[]},enumerable:!0,configurable:!0}),i.prototype.onAddedToStage=function(e){t.EventManager.getInstance().on(t.Application.APPEVENT_BACK,this.onBack,this),t.EventManager.getInstance().on(t.Application.APPEVENT_PAUSE,this.onPause,this),t.EventManager.getInstance().on(t.Application.APPEVENT_RESUME,this.onResume,this),t.EventManager.getInstance().on(t.Application.APPEVENT_EXIT,this.onExit,this),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this)},i.prototype.findChildren=function(t,e){void 0===e&&(e=[]);for(var i=0;i<t.numChildren;i++){var n=t.getChildAt(i);e.push(n),egret.is(n,"egret.DisplayObjectContainer")&&this.findChildren(n,e)}return e},i.prototype.onRender=function(){},i.prototype.stretch=function(){this.left=this.right=this.top=this.bottom=0},i.prototype.onExit=function(t){this.onApplicationQuit()||t.preventDefault()},i.prototype.onResume=function(t){this.onApplicationFocus()},i.prototype.onPause=function(t){this.onApplicationPause()},i.prototype.onApplicationQuit=function(){return!0},i.prototype.onApplicationFocus=function(){this.removeAllAnimation(),this.removeAllEffectList(),this.removeAllTimeList(),this.removeAllIntervalList()},i.prototype.onApplicationPause=function(){},i.prototype.onBack=function(){},i.prototype.awake=function(){},i.prototype.onModuleInit=function(){},i.prototype.update=function(){},i.prototype.childrenCreated=function(){this.dispatchEventWith("childrenCreated"),this.start()},i.prototype.onRemovedFromStage=function(e){this.destroyResources(),egret.Tween.removeTweens(this),t.EventManager.getInstance().off(t.Application.APPEVENT_BACK,this.onBack,this),t.EventManager.getInstance().off(t.Application.APPEVENT_PAUSE,this.onPause,this),t.EventManager.getInstance().off(t.Application.APPEVENT_RESUME,this.onResume,this),t.EventManager.getInstance().off(t.Application.APPEVENT_EXIT,this.onExit,this),this.onDestroy()},i.prototype.destroyResources=function(){},i.prototype.start=function(){},i.prototype.onDestroy=function(){},i.prototype.pushAnimation=function(t){this.deleteAnimation(t),this.animationList.indexOf(t)<0&&this.animationList.push(t)},i.prototype.deleteAnimation=function(t){var e=this.animationList.indexOf(t);e>-1&&(this[t].stop(),this[t].visible=!1,this[t].source="",this.animationList.splice(e,1))},i.prototype.removeAllAnimation=function(){for(var t=0,e=this.animationList,i=e.length;i>t;t++)this[e[t]].stop(),this[e[t]].visible=!1;this.animationList=[]},i.prototype.pushTimeList=function(t){this.deleteTimeList(t),this.timeList.indexOf(t)<0&&this.timeList.push(t)},i.prototype.deleteTimeList=function(t){var e=this.timeList.indexOf(t);e>-1&&(-1!=this[t]&&(egret.clearTimeout(this[t]),this[t]=-1),this.timeList.splice(e,1))},i.prototype.removeAllTimeList=function(){for(var t=0,e=this.timeList,i=e.length;i>t;t++)-1!=this[e[t]]&&(egret.clearTimeout(this[e[t]]),this[e[t]]=-1);this.timeList=[]},i.prototype.pushIntervalList=function(t){this.deleteIntervalList(t),this.intervalList.indexOf(t)<0&&this.intervalList.push(t)},i.prototype.deleteIntervalList=function(t){var e=this.intervalList.indexOf(t);e>-1&&(-1!=this[t]&&(egret.clearInterval(this[t]),this[t]=-1),this.intervalList.splice(e,1))},i.prototype.removeAllIntervalList=function(){for(var t=0,e=this.intervalList,i=e.length;i>t;t++)-1!=this[e[t]]&&(egret.clearInterval(this[e[t]]),this[e[t]]=-1);this.intervalList=[]},i.prototype.pushEffectList=function(t){this.deleteEffectList(t),this.effectList.indexOf(t)<0&&this.effectList.push(t)},i.prototype.deleteEffectList=function(t){var e=this.effectList.indexOf(t);e>-1&&(-1!=this[t]&&egret.Tween.removeTweens(this[t]),this.effectList.splice(e,1))},i.prototype.removeAllEffectList=function(){for(var t=0,e=this.effectList,i=e.length;i>t;t++)-1!=this[e[t]]&&egret.Tween.removeTweens(this[e[t]]);this.effectList=[]},i.prototype.pushAnimator=function(t){this.deleAnimator(t),this.animatorList.indexOf(t)<0&&this.animatorList.push(t)},i.prototype.deleAnimator=function(t){var e=this.animatorList.indexOf(t);e>-1&&(this[t]&&t.parent&&t.parent.removeChild(),this.animatorList.splice(e,1))},i.prototype.removeAllAnimator=function(){var t=this.animatorList.length;if(t>0)for(var e=0;t>e;e++){var i=this.animatorList[e];this[i]&&this.removeChild(this[i])}this.animatorList=[]},i}(eui.Component);t.View=e,__reflect(e.prototype,"uiCore.View",["uiCore.IBehaviour"])}(uiCore||(uiCore={}));var core;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.enableResizeEvt=!1,i.isDispose=!1,i.autoDispose=!0,i.autoTimeoutList=[],i.alignObjs=[],i.evtCtl=new t.EventControl,i.autoViews=[],i.addEventListener(egret.Event.COMPLETE,i.onInitExml,i),i}return __extends(i,e),i.prototype.onInitExml=function(t){this.removeEventListener(egret.Event.COMPLETE,this.onInitExml,this),this.initExmlOk()},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovedFromStage,this),this.onAwake(),this.onLastAwake(),this.onEnable(),this.checkLang(),this.execAutoAlign(),this.viewResize()},i.prototype.setMouseWheel=function(t){},Object.defineProperty(i.prototype,"isActived",{get:function(){return!this.isDispose},enumerable:!0,configurable:!0}),i.prototype.onResume=function(t){this.onApplicationFocus()},Object.defineProperty(i.prototype,"pauseFns",{get:function(){return this.mPauseFns||(this.mPauseFns=[]),this.mPauseFns},enumerable:!0,configurable:!0}),i.prototype.addPauseFn=function(e,i){t.CoreConfig.backRun?e.call(i):this.pauseFns.push({fn:e,fnThis:i})},i.prototype.removePauseFn=function(t,e){for(var i=this.pauseFns.length-1;i>=0;i--)this.pauseFns[i].fn==t&&this.pauseFns[i].fnThis==e&&this.pauseFns.splice(i,1)},i.prototype.clearAllPauseFn=function(){this.pauseFns.length=0},i.prototype.execAllPauseFn=function(){for(var t=0,e=this.pauseFns;t<e.length;t++){var i=e[t];i.fn.call(i.fnThis)}this.pauseFns.length=0},i.prototype.onPause=function(t){this.execAllPauseFn(),this.onApplicationPause()},i.prototype.onApplicationFocus=function(){},i.prototype.onApplicationPause=function(){this.execAllAutoTimeout()},i.prototype.setAutoTimeout=function(e,i,n){for(var s=this,o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];var a=-1;return t.CoreConfig.backRun?e.apply(i,o):(a=egret.setTimeout(function(){s.clearAutoTimeout(a),e.apply(i,o)},this,n),this.autoTimeoutList.push({timeId:a,listener:e,thisObj:i,param:o})),a},i.prototype.clearAutoTimeout=function(e){egret.clearTimeout(e);for(var i=0;i<this.autoTimeoutList.length;i++)if(this.autoTimeoutList[i].timeId==e){t.ArrayUtil.removeIdx(this.autoTimeoutList,i);break}},i.prototype.execAllAutoTimeout=function(){if(this.autoTimeoutList){for(var t=0,e=this.autoTimeoutList;t<e.length;t++){var i=e[t];egret.clearTimeout(i.timeId),i.listener.call(i.thisObj,i.param)}this.autoTimeoutList.length=0}},i.prototype.clearAllAutoTimeout=function(){for(var t=0,e=this.autoTimeoutList;t<e.length;t++){var i=e[t];egret.clearTimeout(i.timeId)}this.autoTimeoutList.length=0},i.prototype.addAutoAlign=function(t){this.alignObjs.push({x:t.x,y:t.y,disObj:t})},i.prototype.onViewResize=function(t){this.execAutoAlign(),this.viewResize()},i.prototype.viewResize=function(){},i.prototype.execAutoAlign=function(){for(var e=this.stage.stageWidth/t.CoreConfig.STAGE_W,i=this.stage.stageHeight/t.CoreConfig.STAGE_H,n=0,s=this.alignObjs;n<s.length;n++){var o=s[n];o.disObj.x=o.x*e,o.disObj.y=o.y*i,o.disObj.scaleX=e,o.disObj.scaleY=i}},i.prototype.onLastAwake=function(){},i.prototype.initExmlOk=function(){},i.prototype.onAwake=function(){},i.prototype.onEnable=function(){0==this.isDispose&&(uiCore.EventManager._instance.on(uiCore.Application.APPEVENT_PAUSE,this.onPause,this),uiCore.EventManager._instance.on(uiCore.Application.APPEVENT_RESUME,this.onResume,this),this.enableResizeEvt)},i.prototype.onDisable=function(){uiCore.EventManager._instance.off(uiCore.Application.APPEVENT_PAUSE,this.onPause,this),uiCore.EventManager._instance.off(uiCore.Application.APPEVENT_RESUME,this.onResume,this)},i.prototype.destroy=function(){this.isDispose||(this.isDispose=!0,this.onDisable(),this.onDestroy())},i.prototype.onDestroy=function(){this.removeAllAutoView();for(var e=0,i=this.autoTimeoutList;e<i.length;e++){var n=i[e];egret.clearTimeout(n.timeId)}this.autoTimeoutList=null,this.alignObjs=null,this.mPauseFns=null,this.removeEventListener(egret.Event.COMPLETE,this.onInitExml,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovedFromStage,this),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.evtCtl.removeAll(),egret.Tween.removeTweens(this),t.DisplayUtil.removeDisplay(this)},i.prototype.onAddToStage=function(t){this.onEnable()},i.prototype.onRemovedFromStage=function(t){this.autoDispose?this.destroy():this.onDisable()},i.prototype.checkLang=function(){},i.prototype.updateLang=function(){t.UILanaguageUtil.convert(this)},i.prototype.addEvt=function(t,e,i,n){void 0===n&&(n=null),this.evtCtl.addEvtListener(t,e,i,n||this)},i.prototype.removeEvt=function(t,e,i,n){void 0===n&&(n=null),this.evtCtl.removeEvtListener(t,e,i,n)},i.prototype.pushAutoView=function(t){this.autoViews.push(t)},i.prototype.removeAutoView=function(e){e.destroy();var i=this.autoViews.indexOf(e);-1!=i&&t.ArrayUtil.removeIdx(this.autoViews,i)},i.prototype.removeAllAutoView=function(){for(var t=0,e=this.autoViews;t<e.length;t++){var i=e[t];i.destroy()}this.autoViews.length=0},i}(eui.Component);t.BaseView=e,__reflect(e.prototype,"core.BaseView")}(core||(core={}));var LibCore;!function(t){var e=function(){function t(){}return t.useConsoleLog=!0,t.version="1.1.14",t.agentid=1001,t.PARAMS={},t.MIN_W=600,t.MIN_H=400,t.MAX_W=0,t.MAX_H=0,t.RES="resource/",t.REDIRECT=null,t.SVR_ID=1,t.SVR_HOST="test.jjby88.com",t.SVR_PORT=39998,t.CTX_PACKET=!1,t.http_base_url="http://test.jjby88.com:",t.http_port=8081,t.http_pay_port=8082,t.http_login_url="/api/WebApiService/ProcessBusiness",t.http_visterlogin_url="http://test.jjby88.com:18000/GameApi/Visitorlogin",t.http_sign_key="$!sad@dsf4g6r78",t.http_pay_key="$^%fdasf@dsf3",t.IsPayExchange=!0,t.IsLoginOpen=!0,t.IsMessageOpen=!1,t.tipTextArray=["切忌心浮气躁，按照自己的原则脚踏实地的捕鱼，争取做一个好渔夫！","唯一比对手更可怕的，是你没有开出下发改变命运的子弹！","爱拼才会赢，敢下就会红！想要富！下重注~!","现在的一切美好事物，无一不是拼搏的结果！","打鱼靠技术，心态不能急躁，手不能抖！","针对不同的对手，要有不同的打法！","只要思想不滑坡，办法总比困难多！","哪家小孩天天哭？哪个牌友天天输？","需要两个实力相当的凑在一起，才能够达到神乎其技！","小输十把没关系，大赢一把就OK!!","尊重对手，就是尊重自己的钱包！","人生只有走出来的精彩，哪有等出来的辉煌！？","钱包比对手大，你就已经赢了一半了~！","胜者才有资格进入更高级的圈子！","虽然保守不是最好的策略，但冲动一定不是正确的选择！","晚一步不如早一步，心动不如行动！","游戏好似人生，该出手时就出手，不因为错过而留下遗憾！"],t}();t.GameConfig=e,__reflect(e.prototype,"LibCore.GameConfig")}(LibCore||(LibCore={}));var uiCore;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.isNeedMask=!0,e.scaleDuration=100,e.scaleWhenDown=.98,e.disableInterval=300,e.soundPath="window_open_mp3",e.isScale=!0,e._visible=!1,e.addEventListener(egret.Event.RESIZE,e.onSizeOne,e),e}return __extends(e,t),e.prototype.childrenCreated=function(){this.groupScale?this._scaleGroup=this.groupScale:this._scaleGroup=new eui.Group,this._scaleGroup.visible=!1,this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchOutSide,this)},e.prototype.setSkin=function(e){t.prototype.setSkin.call(this,e),this._scaleGroup&&this._scaleGroup.parent&&(this._scaleGroup.parent.removeChild(this._scaleGroup),this._scaleGroup=new eui.Group,this.initGroupScale())},e.prototype.onSizeOne=function(){this.removeEventListener(egret.Event.RESIZE,this.onSizeOne,this),this.initGroupScale()},e.prototype.initGroupScale=function(){if(!(this._scaleGroup.anchorOffsetX>0)){var t=this.width,e=this.height;if(this._scaleGroup!=this.groupScale&&this._scaleGroup.numChildren<=0){for(var i=null;this.numChildren>0;)i=this.getChildAt(0),this._scaleGroup.addChild(i);this.addChild(this._scaleGroup)}this._scaleGroup.width=t,this._scaleGroup.height=e,this._scaleGroup.anchorOffsetX=.5*t,this._scaleGroup.anchorOffsetY=.5*e,this._scaleGroup.x=.5*t,this._scaleGroup.y=.5*e,this.width=t,this.height=e,this._scaleGroup.visible=!0}},e.prototype.onTouchBegin=function(i){t.prototype.onTouchBegin.call(this,i),this.isScale&&(this._scaleGroup.scaleX=this.scaleWhenDown,this._scaleGroup.scaleY=this.scaleWhenDown),this.isNeedMask&&(e._mask||(e._mask=new eui.Group),e._mask.width=this.stage.width,e._mask.height=this.stage.height,this.stage.addChild(e._mask),egret.setTimeout(function(t){t.removeChild(e._mask)},this,this.disableInterval,this.stage))},e.prototype.onTouchEnd=function(t){this.isScale&&(this._scaleGroup.scaleX=1,this._scaleGroup.scaleY=1)},e.prototype.onTouchOutSide=function(t){this.onTouchEnd(null),this.stage&&this.stage.contains(e._mask)&&t.target.hitTestPoint(t.stageX,t.stageY)&&egret.TouchEvent.dispatchTouchEvent(t.target,egret.TouchEvent.TOUCH_TAP,!0,!0,t.stageX,t.stageX,t.touchPointID,!1)},e.prototype.setScaleByStatus=function(){var t=this.getCurrentState();this.scaleX=this.scaleY="down"==t?this.scaleWhenDown:1},e}(eui.Button);t.Button=e,__reflect(e.prototype,"uiCore.Button")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemovedFromStage,t),t.awake(),t}return __extends(i,e),i.prototype.$onAddToStage=function(i,n){e.prototype.$onAddToStage.call(this,i,n),t.EventManager.getInstance().on(t.Application.APPEVENT_BACK,this.onBack,this),t.EventManager.getInstance().on(t.Application.APPEVENT_RESUME,this.onResume,this),t.EventManager.getInstance().on(t.Application.APPEVENT_EXIT,this.onExit,this)},i.prototype.onRender=function(){},i.prototype.onExit=function(t){this.onApplicationQuit()||t.preventDefault()},i.prototype.onResume=function(t){this.onApplicationFocus()},i.prototype.onPause=function(t){this.onApplicationPause()},i.prototype.onApplicationQuit=function(){return!0},i.prototype.onApplicationFocus=function(){},i.prototype.onApplicationPause=function(){},i.prototype.onBack=function(){},i.prototype.report=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i]},i.prototype.awake=function(){},i.prototype.onModuleInit=function(){},i.prototype.update=function(){},i.prototype.childrenCreated=function(){this.start()},i.prototype.onRemovedFromStage=function(e){t.EventManager.getInstance().off(t.Application.APPEVENT_BACK,this.onBack,this),t.EventManager.getInstance().off(t.Application.APPEVENT_RESUME,this.onResume,this),t.EventManager.getInstance().off(t.Application.APPEVENT_EXIT,this.onExit,this),this.onDestroy()},i.prototype.start=function(){},i.prototype.onDestroy=function(){},i}(eui.ItemRenderer);t.ItemView=e,__reflect(e.prototype,"uiCore.ItemView",["uiCore.IBehaviour"])}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(e){function s(i,n,s,o,r,a){void 0===n&&(n="default_zh.res.json"),void 0===s&&(s="resource/"),void 0===o&&(o="default.thm.json"),void 0===r&&(r=[]),void 0===a&&(a=null);var h=e.call(this)||this;return h.current=1,h.appLoadingClass=i,h.indexGroups=r,h.resource=n,h.resourceUrl=s,h.windowLoadingClass=a,h.total=r.length,h.themePath=s+o,h.addEventListener(egret.Event.ADDED_TO_STAGE,h._onAddToStage,h),t.EventManager.getInstance().addEventListener(t.Application.APPEVENT_PAUSE,h.onPause,h),t.EventManager.getInstance().addEventListener(t.Application.APPEVENT_RESUME,h.onResume,h),h}return __extends(s,e),Object.defineProperty(s.prototype,"loadingUI",{get:function(){return this.loadingView},enumerable:!0,configurable:!0}),s.prototype.onRender=function(){},s.prototype.onExit=function(t){this.onApplicationQuit()||t.preventDefault()},s.prototype.onResume=function(t){this.onApplicationFocus()},s.prototype.onPause=function(t){this.onApplicationPause()},s.prototype.onApplicationQuit=function(){return!0},s.prototype.onApplicationFocus=function(){t.SoundByteManager.onAppResume()},s.prototype.onApplicationPause=function(){null!=FishGameController.getGameView()&&FishGameController.getGameView().ReconnectAllFish(),t.SoundByteManager.onAppPause()},s.prototype.awake=function(){},s.prototype.update=function(){},s.prototype.onDestroy=function(){},s.prototype._onAddToStage=function(e){t.Application.init(this,this.windowLoadingClass),t.Application.assetAdapter=new n,this.stage.registerImplementation("eui.IAssetAdapter",t.Application.assetAdapter),this.stage.registerImplementation("eui.IThemeAdapter",new i),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/"+this.resource,"resource/")},s.prototype.onLoadingComplete=function(t){this.loadingView&&this.loadingView.removeEventListener(egret.Event.COMPLETE,this.onLoadingComplete,this),this.init(),this.awake()},s.prototype.init=function(){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.loadGroup()},s.prototype.onConfigComplete=function(t){this.appLoadingClass?(this.loadingView=new this.appLoadingClass,this.loadingView.addEventListener(egret.Event.COMPLETE,this.onLoadingComplete,this),this.addChildAt(this.loadingView,0)):this.onLoadingComplete(null)},s.prototype.onResourceLoadError=function(t){this.onLoaddingError(t),this.onResourceLoadComplete(t)},s.prototype.loadGroup=function(){if(this.indexGroups.length>0){var t=this.indexGroups.shift();this.onLoadGroupReady(t),RES.loadGroup(t)}else{this.onAllGroupComplete(),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this);var e=new eui.Theme(this.themePath,this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)}},s.prototype.onAllGroupComplete=function(){},s.prototype.onThemeLoadComplete=function(){this.start()},s.prototype.removeLoadding=function(){this.loadingView&&(this.removeChild(this.loadingView),this.loadingView=null)},s.prototype.onLoadGroupReady=function(t){trace("资源["+t+"]:准备加载")},s.prototype.onLoadGroupComplete=function(t){trace("资源["+t.groupName+"]:加载完成")},s.prototype.onResourceLoadComplete=function(t){this.onLoadGroupComplete(t),this.loadGroup(),this.current++},s.prototype.onResourceProgress=function(e){e.resItem.name.lastIndexOf("_zip")>=0&&t.ZipManager.zipResourceProgress(e.resItem.name);var i=e.itemsLoaded/e.itemsTotal*100;i=Math.ceil(i),this.onLoaddingProgress(i,this.current,this.total)},s.prototype.onLoaddingError=function(t){trace("资源["+t.groupName+"]:加载失败")},s.prototype.onLoaddingProgress=function(t,e,i){},s.prototype.start=function(){},s}(eui.UILayer);t.BaseMain=e,__reflect(e.prototype,"uiCore.BaseMain",["uiCore.IBehaviour"]);var i=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function s(t){e.call(n,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),i.call(n))}var r=this;"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(n,generateEUI)},this):"undefined"!=typeof generateEUI2?RES.getResByUrl("resource/gameEui.json",function(t,i){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(n,generateEUI2)},r)},this,RES.ResourceItem.TYPE_JSON):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(i.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var n=function(){function e(){this.loadResList=[],this.currLoadCount=0,this.isStopload=!1}return e.prototype.getAsset=function(e,i,n){function s(t){i.call(n,t,e)}if(RES.hasRes(e)){var o=RES.getRes(e);o?s(o):this.addLoadResQueue(e,i,n)}else{var r;r=e.indexOf("_fnt")>=0?t.ZipManager.getFontImageMap(e):t.ZipManager.getSubkeyImageMap(e),r?s(r):RES.getResByUrl(e,s,this,RES.ResourceItem.TYPE_IMAGE)}},e.prototype.addLoadResQueue=function(t,e,i){this.loadResList.push({source:t,compFunc:e,thisObject:i}),this.loadResAsync()},e.prototype.loadResAsync=function(){var t=this;if(!this.isStopload&&this.currLoadCount<RES.queue.thread){var e=this.loadResList.shift();e&&(this.currLoadCount++,RES.getResAsync(e.source,function(i){e.compFunc.call(e.thisObject,i,e.source),t.currLoadCount--,t.loadResAsync()},this))}},e.prototype.stopLoadRes=function(){this.isStopload=!0,this.loadResList=[],this.currLoadCount=0},e.prototype.startLoadRes=function(){this.isStopload=!1},e}();__reflect(n.prototype,"AssetAdapter",["eui.IAssetAdapter"])}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.left=e.right=e.top=e.bottom=0,e}return __extends(e,t),e.prototype.destroyResources=function(){},e}(t.View);t.Scene=e,__reflect(e.prototype,"uiCore.Scene")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.onAddedToStage=function(i){e.prototype.onAddedToStage.call(this,i),t.EventManager.getInstance().dispatchEvent(t.Application.APPEVENT_WINDOW_OPEN,this)},i.prototype.onRemovedFromStage=function(i){e.prototype.onRemovedFromStage.call(this,i),t.EventManager.getInstance().dispatchEvent(t.Application.APPEVENT_WINDOW_CLOSE,this)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.window=this.numChildren>0?this.getChildAt(0):null,this.window&&this.window._closeButton&&this.window._closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseButton,this)},i.prototype.openEffect=function(){return this.scaleX=.9,this.scaleY=.9,this.alpha=.5,egret.Tween.get(this).to({scaleX:1,scaleY:1,alpha:1},100).call(this.onOpenScaleComplete,this),!0},i.prototype.close=function(){this.closeEffect()||t.Application.closeWindow(this)},i.prototype.forceClose=function(){t.Application.closeWindow(this)},i.prototype.closeEffect=function(){return egret.Tween.get(this).to({scaleY:.9,scaleX:.9,alpha:1},200).call(this.onCloseScaleComplete,this),!0},i.prototype.onOpenScaleComplete=function(){var t=this;egret.callLater(function(){t.alpha=t.scaleX=t.scaleY=1},this)},i.prototype.onCloseScaleComplete=function(){t.Application.closeWindow(this)},i.prototype.onCloseButton=function(){this.close()},i}(t.View);t.Window=e,__reflect(e.prototype,"uiCore.Window")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"getanimDisplay",{get:function(){return this.animDisplay},enumerable:!0,configurable:!0}),e}(t.Button);t.AnimationButton=e,__reflect(e.prototype,"uiCore.AnimationButton")}(uiCore||(uiCore={}));var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.tipTextIndex=1,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.createView,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.onRemovedFromStage,e),e}return __extends(e,t),e.prototype.onStageResize=function(t){this.width=this.stage.stageWidth,this.height=this.stage.stageHeight},e.prototype.onRemovedFromStage=function(t){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovedFromStage,this),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.createView,this),this.stage.removeEventListener(egret.Event.RESIZE,this.onStageResize,this)},e.prototype.createView=function(){this.stage.addEventListener(egret.Event.RESIZE,this.onStageResize,this),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.createView,this),this.width=this.stage.stageWidth,this.height=this.stage.stageHeight;var t=new eui.Image;t.source="gamehall_loadingBg_png",t.left=t.right=t.top=t.bottom=0,this.addChild(t),document.getElementsByTagName("body")[0].style.backgroundImage="none",LibCore.GameConfig.tipTextArray&&LibCore.GameConfig.tipTextArray.length>0&&uiCore.LangUtils.getLangType()==uiCore.LangUtils.ZH_CN&&(this.tipText=new uiCore.Label,this.tipText.bottom=150,this.tipText.horizontalCenter=0,this.tipText.fontFamily="微软雅黑",this.tipText.size=23,this.tipText.textAlign="center",this.tipText.bold=!0,this.tipText.textColor=16696943,this.tipText.text=LibCore.GameConfig.tipTextArray[0],this.addChild(this.tipText),this.tipTextSetInterval=egret.setInterval(this.changeTipText,this,4e3));var e=new eui.Image;e.source="gamehall_loadingBarBg",e.horizontalCenter=0,e.bottom=115,e.height=31,e.width=600,this.addChild(e),this.progress=new eui.Image,this.progress.source="gamehall_loadingBar",this.progress.bottom=115,this.progress.horizontalCenter=0,this.progress.height=31,this.progress.width=0,this.addChild(this.progress),this.labelProgress=new uiCore.Label,this.labelProgress.bottom=80,this.labelProgress.horizontalCenter=0,this.labelProgress.fontFamily="微软雅黑",this.labelProgress.size=16,this.labelProgress.textAlign="center",this.addChild(this.labelProgress),this.dispatchEventWith(egret.Event.COMPLETE)},e.prototype.changeTipText=function(){this.tipText.text=LibCore.GameConfig.tipTextArray[this.tipTextIndex%LibCore.GameConfig.tipTextArray.length],this.tipTextIndex++},e.prototype.setProgress=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.progress){var n=this.progress.width=6*t;this.progress.horizontalCenter=(n-600)/2.07;var s=uiCore.StringUtils.format(uiCore.LangUtils.getMsgById(3)+"{0}%，{1}/{2}",t,e,i);this.setText(s)}},e.prototype.setText=function(t){this.labelProgress&&(this.labelProgress.text=t)},e}(eui.Group);__reflect(LoadingUI.prototype,"LoadingUI");var core;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.showBg=!0,e.autoClose=!0,e.__resList=[],e}return __extends(e,t),Object.defineProperty(e.prototype,"resourceList",{get:function(){return this.__resList},enumerable:!0,configurable:!0}),e.prototype.onEnable=function(){t.prototype.onEnable.call(this),this.openEffect()},e.prototype.openEffect=function(){this.scaleX=.9,this.scaleY=.9,this.alpha=.5,egret.Tween.get(this).to({scaleX:1,scaleY:1,alpha:1},200,egret.Ease.cubicOut).call(this.onOpenScaleComplete,this)},e.prototype.onOpenScaleComplete=function(){var t=this;egret.callLater(function(){t.alpha=t.scaleX=t.scaleY=1},this)},e.prototype.closeWindow=function(){uiCore.WindowManager.getInstance().closeWindow(this)},e}(t.BaseView);t.BaseWindow=e,__reflect(e.prototype,"core.BaseWindow")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.STAGE_W=1280,t.STAGE_H=720,t.frameRate=60,t.ONE_FRAME_TIME=1e3/60,t.isWebp=!1,t.IMG_EXT="png",t.backRun=!1,t.languageType="zh_cn",t.AUTO_START_GAME_TYPE="auto_start_game_check",t}();t.CoreConfig=e,__reflect(e.prototype,"core.CoreConfig")}(core||(core={}));var FrameRateManager=function(){function t(){}return t.setup=function(e){t.stage=e,t.resetAll()},t.setGameRun=function(e){t.gameRun=e,t.updateFrameRate()},t.setNoticeRun=function(e){t.noticeRun=e,t.updateFrameRate()},t.updateFrameRate=function(){egret.Capabilities.isMobile&&(t.gameRun||t.noticeRun?t.stage.frameRate=t.HIGH_RATE:t.stage.frameRate=t.LOW_RATE)},t.resetAll=function(){t.gameRun=!1,t.noticeRun=!1,t.updateFrameRate()},t.HIGH_RATE=60,t.LOW_RATE=30,t.gameRun=!1,t.noticeRun=!1,t}();__reflect(FrameRateManager.prototype,"FrameRateManager");var core;!function(t){var e=function(){function t(){}return t.reqHttp=function(e,i,n,s,o,r,a){void 0===r&&(r=null),void 0===a&&(a=null);var h,l=new t;return n==egret.HttpMethod.POST?l.retPost(e,i,s,o,r,a):(h=i?e+"?"+i:e,l.reqGet(h,s,o,r,a)),l},t.prototype.initParam=function(t,e,i,n){this.okFn=t,this.okThis=e,this.errFn=i,this.errThis=n},t.prototype.retPost=function(t,e,i,n,s,o){this.initParam(i,n,s,o),this.httpReq=new egret.HttpRequest,this.httpReq.responseType=egret.HttpResponseType.TEXT,this.httpReq.open(t,egret.HttpMethod.POST),this.httpReq.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.httpReq.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this.httpReq.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadError,this),this.httpReq.send(e)},t.prototype.reqGet=function(t,e,i,n,s){this.initParam(e,i,n,s),this.httpReq=new egret.HttpRequest,this.httpReq.responseType=egret.HttpResponseType.TEXT,this.httpReq.open(t,egret.HttpMethod.GET),this.httpReq.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.httpReq.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this.httpReq.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadError,this),this.httpReq.send()},t.prototype.onLoadComplete=function(t){this.okFn&&this.okFn.call(this.okThis,this.httpReq.response),this.clear()},t.prototype.onLoadError=function(t){this.errFn&&this.errFn.call(this.errThis),this.clear(),console.error(t)},t.prototype.clear=function(){this.httpReq&&(this.httpReq.removeEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this.httpReq.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadError,this),this.httpReq=null)},t}();t.HttpOp=e,__reflect(e.prototype,"core.HttpOp")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.initLayer=function(t){this.mainLayer=t,this.sceneLayer=new eui.Component,this.sceneLayer.left=this.sceneLayer.right=this.sceneLayer.top=this.sceneLayer.bottom=0,t.addChild(this.sceneLayer),this.windowLayer=new eui.Component,this.windowLayer.left=this.windowLayer.right=this.windowLayer.top=this.windowLayer.bottom=0,this.windowLayer.touchEnabled=!1,t.addChild(this.windowLayer),this.uiEffLayer=new eui.Component,this.uiEffLayer.left=this.uiEffLayer.right=this.uiEffLayer.top=this.uiEffLayer.bottom=0,this.uiEffLayer.touchEnabled=this.uiEffLayer.touchChildren=!1,t.addChild(this.uiEffLayer),this.loadingLayer=new eui.Component,this.loadingLayer.left=this.loadingLayer.right=this.loadingLayer.top=this.loadingLayer.bottom=0,this.loadingLayer.touchChildren=this.loadingLayer.touchEnabled=!1,t.addChild(this.loadingLayer),this.alertLayer=new eui.Component,this.alertLayer.left=this.alertLayer.right=this.alertLayer.top=this.alertLayer.bottom=0,this.alertLayer.touchEnabled=!1,t.addChild(this.alertLayer),this.tipLayer=new eui.Component,this.tipLayer.left=this.tipLayer.right=this.tipLayer.top=this.tipLayer.bottom=0,this.tipLayer.touchChildren=this.tipLayer.touchEnabled=!1,t.addChild(this.tipLayer),this.topUiLayer=new eui.Component,this.topUiLayer.left=this.topUiLayer.right=this.topUiLayer.top=this.topUiLayer.bottom=0,this.topUiLayer.touchEnabled=!1,t.addChild(this.topUiLayer),this.debugLayer=new eui.Component,this.debugLayer.touchChildren=this.debugLayer.touchEnabled=!1,t.addChild(this.debugLayer)
},t}();t.LayerManager=e,__reflect(e.prototype,"core.LayerManager")}(core||(core={}));var core;!function(t){var e=function(){function e(){var t=this;this.queueCount=0,this.maxQueue=4,this.resInfosDirty=!0,this.resInfos=[],this.resIdMap={},this.loadGroupCount=0,this.queueInfoObj={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onGroupComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onGroupProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),egret.setInterval(function(){t.queueCount>0&&t.queueCount--},this,3e3)}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.sortResInfos=function(){this.resInfosDirty&&(this.resInfosDirty=!1,this.resInfos.sort(function(t,e){return e.priority-t.priority}))},e.prototype.createR=function(e,i){var n=new t.RQueueInfo;return n.resId=e,n.priority=i,n},e.prototype.createRG=function(e,i,n){var s=new t.RGQueueInfo;return s.rgId=e,s.overFn=i,s.overThis=n,s},e.prototype.loadOneRes=function(t,i,n,s){if(void 0===s&&(s=0),!RES.getRes(t)){var o=this.createRG(e.rgId++,i,n),r=this.resIdMap[t];return r?r.priority=Math.max(s,r.priority):this.resIdMap[t]=r=this.createR(t,s),r.rgInfos.push(o),o.rInfos.push(r),this.resInfos.push(r),this.resInfosDirty=!0,egret.callLater(this.checkResLoad,this),o.rgId}return i&&n&&i.call(n),0},e.prototype.backLoadGroup=function(t,i){for(var n=RES.getGroupByName(t),s=[],o=0,r=n;o<r.length;o++){var a=r[o];s.push(a.name)}this.loadResList(s,null,null,i||e.ONE_RES_BACK_PRI)},e.prototype.loadResList=function(t,i,n,s){void 0===s&&(s=0);for(var o=[],r=0;r<t.length;r++){if(!RES.hasRes(t[r]))return void console.error("资源配置文件中无法找到特定的资源："+t[r]);RES.getRes(t[r])||o.push(t[r])}if(o.length){var a=this.createRG(e.rgId++,i,n);this.resInfosDirty=!0;for(var r=0;r<o.length;r++){var h=this.resIdMap[o[r]];h?h.priority=Math.max(s,h.priority):this.resIdMap[o[r]]=h=this.createR(o[r],s),h.rgInfos.push(a),a.rInfos.push(h),this.resInfos.push(h)}return egret.callLater(this.checkResLoad,this),a}return i&&n&&i.call(n),null},e.prototype.checkResLoad=function(){var t=this;if(this.resInfos.length&&this.queueCount<this.maxQueue){this.sortResInfos();for(var e=this.resInfos.shift();this.resInfos.length&&(!e||!e.rgInfos||!e.rgInfos.length);)e=this.resInfos.shift();e&&(this.queueCount++,RES.getResAsync(e.resId,function(i,n){t.loadResOver(e,i,n)},this))}},e.prototype.loadResOver=function(t,e,i){this.queueCount--,delete this.resIdMap[t.resId],t.loadOk(e,i),this.checkResLoad()},e.prototype.loadGroupByList=function(t,i,n,s,o,r){void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),void 0===r&&(r=0);for(var a=[],h=0,l=t;h<l.length;h++){var u=l[h];RES.isGroupLoaded(u)||a.push(u)}if(a.length){var c=void 0;return 1==a.length?c=a[0]:(c=t.join("_"),RES.createGroup(c,a)),e.instance.loadGroup(c,i,n,s,o,r)}return i.apply(s,o),null},e.prototype.loadGroup=function(t,e,n,s,o,r){if(void 0===o&&(o=null),void 0===r&&(r=0),!t||RES.isGroupLoaded(t))return e&&s&&e.apply(s,o),null;var a=this.queueInfoObj[t];return a||(this.queueInfoObj[t]=a=new i),a.check(e,n,s,o)||a.addBack(e,n,s,o),a.loading||(this.loadGroupCount++,a.loading=!0,a.pri=r,RES.loadGroup(t,r)),t},e.prototype.onGroupComplete=function(t){var e=t.groupName;this.execGroupOverFn(e)},e.prototype.execGroupOverFn=function(t,e){void 0===e&&(e=!1);var i=this.queueInfoObj[t];i&&(this.loadGroupCount--,e?i.execFail():i.execOk(),delete this.queueInfoObj[t])},e.prototype.onGroupLoadError=function(t){var e=t.groupName;console.warn("加载资源报错：GroupName:"+e),this.execGroupOverFn(e,!0)},e.prototype.onGroupProgress=function(t){},e.prototype.onItemLoadError=function(t){console.warn("加载资源报错：FileName-->"+t.resItem.url)},e.GAME_BACK_RES=-5e4,e.GAME_RES=-2e4,e.UI_EFFECT_PRI=-1e4,e.SCENE_PRI=3e4,e.UI_PRI=5e4,e.pri_idx=0,e.ONE_RES_BACK_PRI=-5e5,e.ONE_RES_MAIN_EFFECT_PRI=-4e5,e.ONE_RES_SOUND_PRI=-3e5,e.ONE_RES_EFFECT_PRI=-1e5,e.ONE_RES_DEF_PRI=0,e.rgId=1,e}();t.LoaderManager=e,__reflect(e.prototype,"core.LoaderManager");var i=function(){function t(){this.backFuns=[],this.errFuns=[],this.fnThiss=[],this.args=[],this.loading=!1,this.pri=-999999999}return t.prototype.addBack=function(t,e,i,n){this.backFuns.push(t),this.errFuns.push(e),this.fnThiss.push(i),this.args.push(n)},t.prototype.check=function(t,e,i,n){for(var s=this.backFuns.length,o=0;s>o;o++)if(this.backFuns[o]==t&&this.errFuns[o]==e&&this.fnThiss[o]==i&&this.args[o]==n)return!0;return!1},t.prototype.execOk=function(){for(var t=this.backFuns.length,e=0;t>e;e++)this.backFuns[e]&&this.backFuns[e].apply(this.fnThiss[e],this.args[e]);this.backFuns.length=this.errFuns.length=this.fnThiss.length=this.args.length=0},t.prototype.execFail=function(){for(var t=this.errFuns.length,e=0;t>e;e++)this.errFuns[e]&&this.errFuns[e].apply(this.fnThiss[e]);this.backFuns.length=this.errFuns.length=this.fnThiss.length=this.args.length=0},t}();__reflect(i.prototype,"GroupQueueInfo")}(core||(core={}));var core;!function(t){var e=function(){function t(){this.rInfos=[]}return t.prototype.removeResInfo=function(t){for(var e,i=this.rInfos.length-1;i>=0;i--)e=this.rInfos[i],e==t&&this.rInfos.splice(i,1);0==this.rInfos.length&&(this.overFn&&this.overThis&&this.overFn.call(this.overThis,this.rgId,t.value,t.key),this.rInfos=null,this.overFn=this.overThis=null)},t.prototype.cancel=function(){for(var t=0,e=this.rInfos;t<e.length;t++){var i=e[t];i.removeRGInfo(this)}this.rInfos=null,this.overFn=this.overThis=null},t}();t.RGQueueInfo=e,__reflect(e.prototype,"core.RGQueueInfo")}(core||(core={}));var core;!function(t){var e=function(){function t(){this.rgInfos=[],this.priority=-99999999}return t.prototype.loadOk=function(t,e){this.value=t,this.key=e;for(var i=0,n=this.rgInfos;i<n.length;i++){var s=n[i];s.removeResInfo(this)}this.rgInfos.length=null},t.prototype.removeRGInfo=function(t){for(var e=this.rgInfos.length-1;e>=0;e--)if(this.rgInfos[e]==t){this.rgInfos.splice(e,1);break}},t}();t.RQueueInfo=e,__reflect(e.prototype,"core.RQueueInfo")}(core||(core={}));var core;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.size=e,i.setRate(0),i}return __extends(e,t),e.prototype.setRate=function(t){var e=2*Math.min(1,t)*Math.PI;this.graphics.clear(),this.graphics.beginFill(16711680,1),this.graphics.moveTo(0,0),this.graphics.lineTo(0,-this.size),this.graphics.drawArc(0,0,this.size,0,e,!0),this.graphics.lineTo(0,0),this.graphics.endFill()},e}(egret.Shape);t.CircleMask=e,__reflect(e.prototype,"core.CircleMask")}(core||(core={}));var core;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.loadPri=0,t.animSource="",t.defaultAnimationName="",t.autoPlay=!0,t.playOnce=!1,t.stopLaterHide=!1,t.loopNum=0,t._isLoaded=!1,t.touchEnabled=!1,t}return __extends(i,e),i.createDA=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1);var s=new i;return s.animSource=t,s.autoPlay=e,s.playOnce=n,s},Object.defineProperty(i.prototype,"isPlaying",{get:function(){return this.armatureDisplay?this.armatureDisplay.animation.isPlaying:!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isLoaded",{get:function(){return this._isLoaded},enumerable:!0,configurable:!0}),i.prototype.onAwake=function(){e.prototype.onAwake.call(this),this.playOnce?this.loopNum=1:this.loopNum=0,this.setAnimSrc(this.animSource,this.defaultAnimationName,this.loadFn,this.loadThis)},i.prototype.setAnimSrc=function(e,i,n,s){this.animSource=e,this.animName=i,this.animSource&&(this.setLoadFn(n,s),t.CoreConfig.isWebp&&RES.hasRes(this.animSource+"_tex_webp")?this.imgSrc=this.animSource+"_tex_webp":this.imgSrc=this.animSource+"_tex_png",t.LoaderManager.instance.loadResList([this.animSource+"_ske_json",this.animSource+"_tex_json",this.imgSrc],this.loadRESComplete,this,this.loadPri+t.LoaderManager.ONE_RES_EFFECT_PRI))},i.prototype.loadRESComplete=function(){this.isDispose||this.initAnim()},i.prototype.clearArmature=function(){this.armatureDisplay&&(this.armatureDisplay.removeEventListener(dragonBones.EventObject.COMPLETE,this.onAnimationComplete,this),this.armatureDisplay.dispose(!0),t.DisplayUtil.removeDisplay(this.armatureDisplay))},i.prototype.initAnim=function(){this._isLoaded=!0;var t=RES.getRes(this.animSource+"_ske_json"),e=RES.getRes(this.animSource+"_tex_json"),i=RES.getRes(this.imgSrc);if(!t||!e||!i)return void console.warn("资源"+this.animSource+"不存在");this.clearArmature();var n=dragonBones.EgretFactory.factory;if(n.getDragonBonesData(this.animSource)||(n.parseDragonBonesData(t),n.parseTextureAtlasData(e,i)),this.armatureDisplay=n.buildArmatureDisplay(this.animSource),this.armatureDisplay.addEventListener(dragonBones.EventObject.COMPLETE,this.onAnimationComplete,this),this.visible=!this.stopLaterHide,this.autoPlay){var s=-1==this.armatureDisplay.animation.animationNames.indexOf(this.animName)?this.armatureDisplay.animation.animationNames[0]:this.animName;this.play(s,this.loopNum)}this.addChild(this.armatureDisplay),this.loadFn&&(this.loadFn.call(this.loadThis),this.loadFn=null,this.loadThis=null)},i.prototype.onAnimationComplete=function(t){this.visible=!this.stopLaterHide,this.execOverFn()},i.prototype.play=function(t,e,i,n,s){this.autoPlay=!0,this.animName=t,this.loopNum=e,this.armatureDisplay&&this.armatureDisplay.animation&&(this.visible=!0,this.armatureDisplay.animation.play(t,e)),i&&n&&s&&this.setOverFn(i,n,s)},i.prototype.fadeIn=function(t,e){this.animName=t,this.armatureDisplay&&this.armatureDisplay.animation&&(this.visible=!0,this.armatureDisplay.animation.fadeIn(t,.5,e))},i.prototype.stop=function(){this.armatureDisplay&&this.armatureDisplay.animation&&(this.armatureDisplay.animation.stop(),this.visible=!this.stopLaterHide)},i.prototype.getAnimDuration=function(){return 1e3*this.armatureDisplay.animation.getState(this.armatureDisplay.animation.animationList[0]).totalTime},i.prototype.getSlotByName=function(t){return this.armatureDisplay?this.armatureDisplay.armature.getSlot(t):null},i.prototype.setOverFn=function(t,e,i){var n=this;this.overFn=t,this.overThis=e,egret.clearTimeout(this.overTimeId),i&&(this.overTimeId=egret.setTimeout(function(){n.execOverFn()},this,i))},i.prototype.execOverFn=function(){this.overFn&&(this.overFn.apply(this.overThis),this.overFn=null,this.overThis=null),egret.clearTimeout(this.overTimeId)},i.prototype.setLoadFn=function(t,e){this._isLoaded?t&&t.call(e):(this.loadFn=t,this.loadThis=e)},i.prototype.onDestroy=function(){this.clearArmature(),this.armatureDisplay=null,this.overFn=null,this.overThis=null,this.loadFn=null,this.loadThis=null,egret.clearTimeout(this.overTimeId),e.prototype.onDestroy.call(this)},i}(t.BaseView);t.DragonAnim=e,__reflect(e.prototype,"core.DragonAnim")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.removeObj=function(e,i){var n=e.indexOf(i);return-1!=n?t.removeIdx(e,n):null},t.removeIdx=function(t,e){var i=t[e];return t[e]=t[t.length-1],t.pop(),i},t}();t.ArrayUtil=e,__reflect(e.prototype,"core.ArrayUtil")}(core||(core={}));var core;!function(t){var e=function(){function t(){this._length=-1,this.tmpPoint=egret.Point.create(0,0),this.pL=[]}return t.getVal=function(e,i){var n=t.valLL[e];n||(t.valLL[e]=n=[]);var s=n[i];if(!s){for(var o=1,r=1;i>0;)o*=e,r*=i,e--,i--;s=o/r}return s},t.prototype.recyclePointL=function(){if(this.pL&&this.pL.length>0){for(var t=0,e=this.pL;t<e.length;t++){var i=e[t];egret.Point.release(i)}this.pL.length=0}},t.prototype.setPoints=function(t){this.recyclePointL();for(var e=0,i=t;e<i.length;e++){var n=i[e];this.pL.push(egret.Point.create(n.x,n.y))}this._length=-1,this.pLen=t.length},t.prototype.getLength=function(t){if(void 0===t&&(t=1e3),-1==this._length){this._length=0;for(var e=egret.Point.create(this.pL[0].x,this.pL[0].y),i=void 0,n=1;t>n;n++)i=this.getPointByT(n/t),this._length+=egret.Point.distance(e,i),e.setTo(i.x,i.y);egret.Point.release(e)}return this._length},t.prototype.getPointByT=function(e){var i=1-e,n=this.tmpPoint,s=this.pL;n.x=n.y=0;for(var o,r,a=this.pLen-1,h=0;a>=h;h++)o=s[h],r=Math.pow(i,a-h)*Math.pow(e,h)*t.getVal(a,h),n.x+=o.x*r,n.y+=o.y*r;return this.tmpPoint},t.prototype.destroy=function(){egret.Point.release(this.tmpPoint),this.recyclePointL(),this.pL=null},t.valLL=[],t}();t.BezierSpline=e,__reflect(e.prototype,"core.BezierSpline")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.getFixedByteByMsg=function(t,e){var i=new egret.ByteArray;return i.endian=egret.Endian.LITTLE_ENDIAN,i.writeUTFBytes(t),i.length=e,i},t.readInt64=function(t){return t.readUnsignedInt()+4228250625*t.readUnsignedInt()},t.getMsgLen=function(t){var e=new egret.ByteArray;return e.endian=egret.Endian.LITTLE_ENDIAN,e.writeUTFBytes(t),e.length},t.chkstrlen=function(t){for(var e=0,i=0;i<t.length;i++)t.charCodeAt(i)>255?e+=2:e++;return e},t}();t.ByteUtil=e,__reflect(e.prototype,"core.ByteUtil")}(core||(core={}));var app;!function(t){var e=function(){function t(){}return t.to=function(e,i,n){void 0===n&&(n=1e3);var s=parseFloat(e.text),o={value:s};t.addRunTxt(e,o),egret.Tween.get(o,{onChange:function(){e.text=o.value.toFixed(2)},onChangeObj:this}).to({value:i},n,egret.Ease.sineOut).call(function(){t.removeRunTxt(e)},this)},t.addRunTxt=function(e,i){t.removeRunTxt(e),t.runTxts.push(e),t.runTxtObjs.push(i)},t.removeRunTxt=function(e){var i=t.runTxts.indexOf(e);-1!=i&&(t.runTxts.splice(i,1),egret.Tween.removeTweens(t.runTxtObjs[i]),t.runTxtObjs.splice(i,1))},t.runTxts=[],t.runTxtObjs=[],t}();t.CoinAnimUtil=e,__reflect(e.prototype,"app.CoinAnimUtil")}(app||(app={}));var core;!function(t){var e=function(){function e(){}return e.grayObj=function(e,i){void 0===i&&(i=!0),"enabled"in e&&(e.enabled=!i),e.filters=i?[t.FilterUtil.greyFilter]:null},e.spliceColor=function(t){var e={r:-1,g:-1,b:-1};return e.b=t%256,e.g=Math.floor(t/256)%256,e.r=Math.floor(t/256/256),e},e.getColorMatrixFilter=function(t){var e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],i=this.spliceColor(t);return e[0]=i.r/255,e[6]=i.g/255,e[12]=i.b/255,new egret.ColorMatrixFilter(e)},e}();t.ColorUtils=e,__reflect(e.prototype,"core.ColorUtils")}(core||(core={}));var DisassembleAlgorithm=function(){function t(){}return t.greed=function(t,e){var i=[],n=e.concat();for(n.sort(function(t,e){return e-t});n.length;)t>n[0]?(t-=n[0],i.push(n[0])):n.shift();return i},t.dp=function(e,i){if(!i||i.length<=0)return[];var n=i.concat();if(n.sort(function(t,e){return e-t}),10*n[0]>e){var s=[],o=t.parseMoney(e,n,0,s,0);if(o){for(var r=[],a=void 0,h=0;h<s.length;h++){a=s[h];for(var l=0;a>l;l++)r.push(n[h])}return r}}return t.greed(e,n)},t.parseMoney=function(t,e,i,n,s){if(i>=0&&i<e.length)for(var o=e[i],r=Math.floor(t/o),a=!1,h=void 0,l=r;l>=0;l--){if(h=t-o*l,0===h)return n[i]=l,!0;if(a=s+l>10?!1:this.parseMoney(h,e,i+1,n,s+l))return n[i]=l,!0}return!1},t.prototype.getChipsByNumber2=function(t,e){var i=[],n=[],s=[];i[0]=0;for(var o=1;t+1>o;o++){o>=e[0]?(i[o]=i[o-e[0]]+1,s[o]=e[0]):i[o]=1e8-t;for(var r=1;r<e.length;r++)o>=e[r]&&i[o]>i[o-e[r]]+1&&(i[o]=i[o-e[r]]+1,s[o]=e[r])}for(var r=t;r>0;)n.push(s[r]),r-=s[r];return n},t}();__reflect(DisassembleAlgorithm.prototype,"DisassembleAlgorithm");var core;!function(t){var e=function(){function e(){}return e.removeDisplay=function(t,e){void 0===e&&(e=null),t&&(e||(e=t.parent),e&&e.removeChild(t))},e.removeAllChild=function(i){for(var n;i.numChildren>0;)n=i.getChildAt(0),n instanceof egret.DisplayObjectContainer&&e.removeAllChild(n),t.DisplayUtil.removeDisplay(n)},e.showTips=function(t,i,n){function s(t){l=!0}function o(t){egret.callLater(function(){0==l&&r(),l=!1},this)}function r(){t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,s,h),t.removeEventListener(egret.Event.ADDED_TO_STAGE,o,h),uiCore.Application.currentScene.stage.removeEventListener(egret.TouchEvent.TOUCH_END,o,h),t.TipsIndex==a&&(t.visible=!1)}void 0===n&&(n=!0);var a=(t.TipsIndex||0)+1;t.TipsIndex=a,e.currentShowTipsGroup=t;var h=this,l=!1;return 0==t.visible?(t.visible=!0,i.stopPropagation(),n&&t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,s,h),uiCore.Application.currentScene.stage.addEventListener(egret.TouchEvent.TOUCH_END,o,h),t.addEventListener(egret.Event.ADDED_TO_STAGE,o,h),!0):(r(),!1)},e.setImgUrl=function(t,e){t.source=null,t.source=e},e}();t.DisplayUtil=e,__reflect(e.prototype,"core.DisplayUtil")}(core||(core={}));var core;!function(t){var e=function(){function t(){this.startPointB=new egret.Point,this.tmpPoint=new egret.Point}return Object.defineProperty(t,"inst",{get:function(){return t._inst||(t._inst=new t),t._inst},enumerable:!0,configurable:!0}),t.prototype.setup=function(t){this.stage=t},t.prototype.start=function(t,e,i,n,s){void 0===s&&(s=null),this.disObj=t,this.startPointA=e.clone(),this.rect=i,this.moveFn=s,this.moveEnd=n,this.startPointB.x=this.disObj.x,this.startPointB.y=this.disObj.y,this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onMoveEnd,this)},t.prototype.onMove=function(t){this.tmpPoint.x=t.stageX-this.startPointA.x+this.startPointB.x,this.tmpPoint.y=t.stageY-this.startPointA.y+this.startPointB.y,this.tmpPoint.x<this.rect.x?this.disObj.x=this.rect.x:this.tmpPoint.x>this.rect.right?this.disObj.x=this.rect.right:this.disObj.x=this.tmpPoint.x,this.tmpPoint.y<this.rect.y?this.disObj.y=this.rect.y:this.tmpPoint.y>this.rect.bottom?this.disObj.y=this.rect.bottom:this.disObj.y=this.tmpPoint.y,this.moveFn&&this.moveFn(this.disObj)},t.prototype.onMoveEnd=function(t){this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onMoveEnd,this),this.moveEnd&&this.moveEnd(this.disObj),this.disObj=null,this.moveFn=null,this.moveEnd=null,this.rect=null},t}();t.Drag=e,__reflect(e.prototype,"core.Drag")}(core||(core={}));var core;!function(t){var e=function(){function e(){this.evtList=[]}return e.prototype.addEvtListener=function(e,i,n,s){if(!this.hasEvt(e,i,n,s)){var o=new t.RegEventVO;o.target=e,o.type=i,o.backFn=n,o.backThis=s,this.evtList.push(o),e.addEventListener(i,n,s)}},e.prototype.hasEvt=function(t,e,i,n){for(var s=0,o=this.evtList;s<o.length;s++){var r=o[s];if(r.target==t&&r.type==e&&r.backFn==i&&r.backThis==n)return!0}return!1},e.prototype.removeEvtListener=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null);for(var s=0,o=this.evtList;s<o.length;s++){var r=o[s];r.target==t&&(e?e==r.type&&(i?i==r.backFn&&(n?n==r.backThis&&this.removeRegEvtVo(r):this.removeRegEvtVo(r)):this.removeRegEvtVo(r)):this.removeRegEvtVo(r))}},e.prototype.removeRegEvtVo=function(e){e.target.removeEventListener(e.type,e.backFn,e.backThis),t.ArrayUtil.removeObj(this.evtList,e)},e.prototype.awake=function(){for(var t=0,e=this.evtList;t<e.length;t++){var i=e[t];i.target.addEventListener(i.type,i.backFn,i.backThis)}},e.prototype.sleep=function(){for(var t=0,e=this.evtList;t<e.length;t++){var i=e[t];i.target.removeEventListener(i.type,i.backFn,i.backThis)}},e.prototype.removeAll=function(){for(var t=0,e=this.evtList;t<e.length;t++){var i=e[t];i.target.removeEventListener(i.type,i.backFn,i.backThis)}this.evtList.length=0},e}();t.EventControl=e,__reflect(e.prototype,"core.EventControl")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.greyFilter=new egret.ColorMatrixFilter([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0]),t.testFilter=new egret.ColorMatrixFilter([1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0]),t}();t.FilterUtil=e,__reflect(e.prototype,"core.FilterUtil")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.triangleArea=function(t,e,i){var n=Math.abs((t.x*e.y+e.x*i.y+i.x*t.y-e.x*t.y-i.x*e.y-t.x*i.y)/2);return n},t.pInQuad=function(e,i,n,s,o){var r=t.triangleArea(e,i,o)+t.triangleArea(i,n,o)+t.triangleArea(n,s,o)+t.triangleArea(s,e,o),a=t.triangleArea(e,i,n)+t.triangleArea(n,s,e);return Math.abs(r-a)<t.eps},t.sgn=function(e){return Math.abs(e)<t.eps?0:0>e?-1:1},t.dot=function(t,e){return t.x*e.x+t.y*e.y},t.cross=function(t,e){return t.x*e.y-t.y*e.x},t.len=function(e){return Math.sqrt(t.dot(e,e))},t.len2=function(e){return t.dot(e,e)},t.distTL=function(e,i,n){var s=n.subtract(i),o=e.subtract(i);return Math.abs(t.cross(s,o)/t.len(s))},t.distTS=function(e,i,n){if(i.equals(n))return t.len(e.subtract(i));var s=n.subtract(i),o=e.subtract(i),r=e.subtract(n);return t.sgn(t.dot(s,o))<0?t.len(o):t.sgn(t.dot(s,r))>0?t.len(r):Math.abs(t.cross(s,o)/t.len(s))},t.pointOnSeg=function(e,i,n){return 0==t.distTL(e,i,n)&&t.sgn(t.dot(e.subtract(i),e.subtract(n)))<0},t.lineIntersect=function(e,i,n,s){var o=e.subtract(n),r=i.subtract(e),a=s.subtract(n),h=t.cross(a,o)/t.cross(r,a);return e.add(r.setTo(r.x*h,r.y*h))},t.isLSI=function(e,i,n,s){var o=i.subtract(e),r=n.subtract(e),a=s.subtract(e);return t.sgn(t.cross(o,r))!=t.sgn(t.cross(o,a))},t.isSSI=function(e,i,n,s){return t.isLSI(e,i,n,s)&&t.isLSI(n,s,e,i)},t.isRRI=function(e,i){for(var n=[[e[0],e[1]],[e[1],e[2]],[e[2],e[3]],[e[3],e[0]]],s=[[i[0],i[1]],[i[1],i[2]],[i[2],i[3]],[i[3],i[0]]],o=0;4>o;o++)for(var r=0;4>r;r++)if(t.isSSI(n[o][0],n[o][1],s[r][0],s[r][1]))return!0;return!1},t.polygonArea=function(e){for(var i=0,n=e.length-1,s=1;n>s;s++)i+=t.cross(e[s].subtract(e[0]),e[s+1].subtract(e[0]));return i},t.pointInPolygon=function(t,e){return!1},t.pointRotate=function(t,e,i,n,s){var o=s||new egret.Point;return o.x=(e.x-t.x)*i-(e.y-t.y)*n+t.x,o.y=(e.x-t.x)*n+(e.y-t.y)*i+t.y,o},t.eps=1,t}();t.GemoUtil=e,__reflect(e.prototype,"core.GemoUtil")}(core||(core={}));var LineUtil=function(){function t(){}return t.findLine2LineIntersection=function(t,e,i,n,s,o,r,a,h){t=Math.floor(t),e=Math.floor(e),i=Math.floor(i),n=Math.floor(n),s=Math.floor(s),o=Math.floor(o),r=Math.floor(r),a=Math.floor(a);var l=n-e,u=t-i,c=i*e-t*n,p=a-o,g=s-r,f=r*o-s*a;return h.x=Math.floor((u*f-g*c)/(l*g-p*u)),h.y=Math.floor((p*c-l*f)/(l*g-p*u)),Math.min(t,i)<=h.x&&h.x<=Math.max(t,i)&&Math.min(e,n)<=h.y&&h.y<=Math.max(e,n)&&Math.min(s,r)<=h.x&&h.x<=Math.max(s,r)&&Math.min(o,a)<=h.y&&h.y<=Math.max(o,a)?!0:!1},t}();__reflect(LineUtil.prototype,"LineUtil");var core;!function(t){var e=function(){function t(){this._heapVec=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this._heapVec.length},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._heapVec.length=0},Object.defineProperty(t.prototype,"minVal",{get:function(){return this._heapVec[0].f},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var e=this._heapVec;e.push(t);for(var i,n=e.length-1,s=n-1>>1;n>0&&e[n].f>e[s].f;)i=e[n],e[n]=e[s],e[s]=i,n=s,s=n-1>>1},t.prototype.pop=function(){var t=this._heapVec;if(1==t.length)return t.pop();var e=t[0];t[0]=t.pop();var i,n=t.length,s=0,o=0,r=0,a=0;for(o=2*s+1,r=o+1;n>o&&(a=n>r?t[o].f>t[r].f?o:r:o,t[a].f>t[s].f);)i=t[a],t[a]=t[s],t[s]=i,s=a,o=2*s+1,r=o+1;return e},t}();t.MaxBinaryHeap=e,__reflect(e.prototype,"core.MaxBinaryHeap")}(core||(core={}));var core;!function(t){var e=function(){function t(t,e,i){void 0===i&&(i=1),this.maxQueue=i,this.queue=[],this.playCount=0,this.playFn=t,this.playThis=e}return t.prototype.remove=function(t){var e=this.queue.indexOf(t);-1!=e&&(this.queue.splice(e,1),this.checkState())},t.prototype.push=function(t){this.queue.push(t),this.checkState()},t.prototype.checkState=function(){this.playCount<this.maxQueue&&this.queue.length>0&&this.play()},t.prototype.over=function(){this.playCount--,this.checkState()},t.prototype.play=function(){this.playCount++;var t=this.queue.shift();this.playFn.call(this.playThis,t)},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0==this.queue.length},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.queue.length=0,this.playCount=0},t}();t.PlayQueueUtil=e,__reflect(e.prototype,"core.PlayQueueUtil")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.recycleObj=function(e,i,n){void 0===n&&(n=100);var s=t.pool[e];s||(s=t.pool[e]=[]),-1==s.indexOf(i)?s.length<n?(i.poolClear(),s.push(i)):i.clear():console.log(i)},t.getPoolObj=function(e,i){var n,s=t.pool[e];return n=s&&s.length>0?s.pop():new i,n.poolInit(),n},t.pool={},t}();t.PoolUtil=e,__reflect(e.prototype,"core.PoolUtil")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.format=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=t,s=0;s<e.length;s++)n=n.replace("{"+s+"}",e[s].toString());return n},t.isEmpty=function(t){return null==t||void 0==t||0==t.length},t.trim=function(t){return t.replace(/(^\s*)|(\s*$)/g,"")},t.textToRichText=function(t){if(null!=t)return(new egret.HtmlTextParser).parser(t)},t.repeat=function(e,i){if(void 0===i&&(i=null),i)for(var n=i.length,s=0;n>s;s++)e=e.replace(t.regex[s],i[s]);return e},t.formatLength=function(t,e,i,n){void 0===i&&(i="0"),void 0===n&&(n=!0);for(var s=e-t.length,o=t,r=0;s>r;r++)o=n?i+o:o+i;return o},t.resetMoney=function(t){var e;if(t>=1e6){var i=t/100+"";e=parseInt(i)/10+"k"}else t=parseInt(100*t+"")/100,e=t+"",e=-1==e.indexOf(".")?e:(t+"").substr(0,(t+"").indexOf("."));return e},t.formatMoney=function(t){t=isNaN(t)?0:.01*Math.floor(100*t);for(var e,i,n=t.toString().split("."),s=parseInt(n[0]),o="",r="",a=n[1];s>1e3;)e=Math.floor(s/1e3),i=s-1e3*e,s=e,o=i.toString(),1==o.length?o="00"+o:2==o.length&&(o="0"+o),r=","+o+r;return r=s+r,a?(1==a.length?a+="0":a.length>2&&(a=a.substring(0,2)),r+="."+a):r+=".00",r},t.fillLen=function(t,e){for(var i="",n=0;e>n;n++)i+=t;return i},t.regex=[/\{0\}/g,/\{1\}/g,/\{2\}/g,/\{3\}/g,/\{4\}/g,/\{5\}/g,/\{6\}/g,/\{7\}/g],t}();t.StringUtil=e,__reflect(e.prototype,"core.StringUtil")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.convert=function(e){var i=e.name.split("_");if("l"==i[0]){var n=i[1]+"语言包";e instanceof eui.TextInput?e.prompt=n:e instanceof egret.TextField?e.text=n:e instanceof eui.Button?e.label=n:e instanceof eui.RadioButton?e.label=n:e instanceof eui.CheckBox&&(e.label=n)}if(e instanceof egret.DisplayObjectContainer)for(var s,o=e,r=o.numChildren,a=0;r>a;a++)s=o.getChildAt(a),t.convert(s)},t}();t.UILanaguageUtil=e,__reflect(e.prototype,"core.UILanaguageUtil")}(core||(core={}));var core;!function(t){var e=function(){function t(){this.msg="",this.color=16773803,this.duration=500}return t}();t.MessageVO=e,__reflect(e.prototype,"core.MessageVO")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.create=function(e,i,n,s){var o=new t;return o.target=e,o.type=i,o.backFn=n,o.backThis=this,o},t}();t.RegEventVO=e,__reflect(e.prototype,"core.RegEventVO")}(core||(core={}));var Heardbeat=function(){function t(){this.lastTime=0,this.ping=0,this.status=0}return t.getInstance=function(){return t.instance||(t.instance=new t,t.instance._timer=new egret.Timer(t.HEART_BEAT_INTERVAL),t.instance._timer.addEventListener(egret.TimerEvent.TIMER,t.instance.onTimer_heartBeat,t.instance),t.instance._insideTimer=new egret.Timer(t.HEART_BEAT_TIMER),t.instance._insideTimer.addEventListener(egret.TimerEvent.TIMER,t.instance.onInsideTimer_heartBeat,t.instance)),t.instance},t.prototype.begin=function(){this._timer.running||(0==this.status&&(this.lastTime=egret.getTimer()),this._timer.start())},t.prototype.onTimer_heartBeat=function(e){this.ping>=t.HEART_BEAT_INTERVAL&&t.ws_onHeartbeat(),2!=this.status&&(this.lastTime=egret.getTimer(),this.status=2,this.ping=0,this._insideTimer.start(),Net.GameService.send(HallSocketType.HEARDBEAT,{},0))},t.prototype.onInsideTimer_heartBeat=function(e){this.ping+=t.HEART_BEAT_TIMER},t.ws_onHeartbeat=function(){if(2==this.instance.status&&(this.instance._insideTimer.reset(),this.instance.status=1,this.instance.ping=egret.getTimer()-this.instance.lastTime,this.instance.ping>0)){if(null==uiCore.Application.currentScene)return;if(uiCore.Application.currentScene.hasOwnProperty("sharedHeader")&&uiCore.Application.currentScene.sharedHeader.hasOwnProperty("pingView"))return void uiCore.Application.currentScene.sharedHeader.pingView.PingChange(this.instance.ping);if(uiCore.Application.currentScene.hasOwnProperty("pingView"))return void uiCore.Application.currentScene.pingView.PingChange(this.instance.ping)}},t.HEART_BEAT_INTERVAL=1e4,t.HEART_BEAT_TIMER=1e3,t}();__reflect(Heardbeat.prototype,"Heardbeat");var Sound=function(){function t(t,e,i){this.music=t,this.soundType=e,this.soundName=i}return Object.defineProperty(t.prototype,"getSoundType",{get:function(){return this.soundType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getSoundName",{get:function(){return this.soundName},enumerable:!0,configurable:!0}),t}();__reflect(Sound.prototype,"Sound");var HitFish_Contract=function(){function t(){}return t}();__reflect(HitFish_Contract.prototype,"HitFish_Contract");var Bullet=function(){function t(t){this.pengzhuangIndx=5,this.pzIndx=2,this.fishGenPoint=new egret.Point,this.gameObject=t,this.bullets={},this.isCannon=!1,this.Running=!1,this.bullets[0]=["xbullet11_01","xbullet12_01","xbullet13_01","xbullet14_01","xbullet15_01","xbullet16_01","xbullet17_01"],this.bullets[1]=["xbullet1_01","xbullet2_01","xbullet3_01","xbullet4_01","xbullet5_01","xbullet6_01","xbullet7_02"],this.bullets[2]=["xbullet31_01","xbullet32_01","xbullet33_01","xbullet34_01","xbullet35_01","xbullet36_01","xbullet37_02"],this.bullets[3]=["xbullet41_01","xbullet42_01","xbullet43_01","xbullet44_01","xbullet45_01","xbullet46_01","xbullet47_01"],this.gameObject.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddBullet,this),this.startPoint=new egret.Point(-9999,-9999),this.endPoint=new egret.Point(-9999,-9999),this.fxPoint=new egret.Point}return t.prototype.onAddBullet=function(){this.gameObject.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddBullet,this),this.gameObject.addEventListener(egret.Event.ENTER_FRAME,this.Update,this)},t.prototype.initInfo=function(t,e,i,n,s,o){e>3&&(e=3),this.Running=!0,this.gameObject.visible=!0,this.bulletNum=e,this.bulletInfo=t,this.BulletId=t.BulletId,this.BulletOdds=n,i?this.gameObject.source=this.bullets[e-1][6]:this.gameObject.source=this.bullets[e-1][s],this.startPoint.x=-9999,this.startPoint.y=-9999,this.endPoint.x=-9999,this.endPoint.y=-9999,this.nextRotation=null,this.bulletfangxiang=null,this.gameObject.anchorOffsetX=this.gameObject.width/2,this.gameObject.anchorOffsetY=this.gameObject.height/2,this.fishGenPoint.x=o.fishGen.x,this.fishGenPoint.y=o.fishGen.y;var r=uiCore.CircleUtils.getCirclePoint(this.fishGenPoint,60,o.fishGen.rotation-90);o.localToGlobal(r.x,r.y,this.fishGenPoint),this.gameObject.x=this.fishGenPoint.x,this.gameObject.y=this.fishGenPoint.y,3>s?(this.gameObject.scaleX=-1,this.gameObject.scaleY=1):(this.gameObject.scaleY=-1,this.gameObject.scaleX=1),this.isCannon=i},t.prototype.setLockFish=function(t){this.lockFish=t,null!=t?this.BindFish=t:this.BindFish=null},t.prototype.setFishGen=function(t){this.fishGen=t,this.PaoTai=t.fishGen},t.prototype.returnObjectPool=function(){this.Running=!1,this.gameObject.x=-100,this.gameObject.y=-100,this.lockFish&&this.setLockFish(null),this.gameObject.visible=!1},t.prototype.setDirection=function(t){this.gameObject.rotation=t},t.prototype.FishInBombRange=function(t,e,i){var n=Math.floor(t.x-e.x),s=Math.floor(t.y-e.y),o=Math.sqrt(n*n+s*s);return i>o},t.prototype.IsRunning=function(){return this.Running},t.prototype.onBoxTrigger=function(t){if((this.fishGen==FishGameController.getGameView().thisFishGen||this.fishGen.isRobot)&&t.fishInfo){var e=new HitFish_Contract;e.FishTag=t.fishInfo.FishTag,e.FishId=t.fishInfo.FishId,e.BulletId=this.bulletInfo.BulletId,e.SeatNo=this.bulletInfo.SeatNo,e.BulletOdds=this.BulletOdds;var i=0;if(null!=t.fishSet&&0!=t.fishSet.bombRange)for(var n=FishGameController.getGameView().getAllFishes(),s=0;s<n.length;s++)(n[s]&&this.FishInBombRange(t,n[s],t.fishSet.bombRange)||t.fishSet.bombRange<0)&&n[s].fishInfo&&(i+=n[s].fishInfo.Odds);
else i=t.fishInfo.Odds;e.TotalOdds=i,FishGameController.sendCatchFish(e)}this.gameObject.x=this.gameObject.x+(t.x-this.gameObject.x)/3*2,this.gameObject.y=this.gameObject.y+(t.y-this.gameObject.y)/3*2,this.fishGen.removeBullet(this)},t.prototype.Dispose=function(){this.lockFish=null,this.gameObject.hasEventListener(egret.Event.ENTER_FRAME)&&this.gameObject.removeEventListener(egret.Event.ENTER_FRAME,this.Update,this)},t.prototype.Update=function(){if(this.Running)if(this.pzIndx--,this.BindFish&&this.BindFish.isRunning&&this.fishGen.checkLockFishInScreen(this.BindFish))this.pengzhuangIndx--,this.pzIndx<=0?(this.pzIndx=2,this.UpdateRoPoint()):this.pengzhuangIndx<=0&&(this.pengzhuangIndx=5,uiCore.ImpactCheckUtils.impactCheck(this.BindFish,this.gameObject.x,this.gameObject.y)&&this.onBoxTrigger(this.BindFish));else if(this.pzIndx<=0)this.pzIndx=2,this.bulletUpdate();else if(FishGameController.getGameView()){var t=FishGameController.getGameView().getAllFishes();if(t.length>0)for(var e in t)if(t[e].x>-25&&t[e].x<uiCore.Application.app.stage.stageWidth+25&&t[e].y>-25&&t[e].y<uiCore.Application.app.stage.stageHeight+25&&uiCore.ImpactCheckUtils.impactCheck(t[e],this.gameObject.x,this.gameObject.y)){this.onBoxTrigger(t[e]);break}}},t.prototype.UpdateRotation=function(){if(Math.abs(this.gameObject.x)-uiCore.Application.app.stage.stageWidth/2>=0||Math.abs(this.gameObject.y)-uiCore.Application.app.stage.stageHeight/2>=0){Math.abs(this.gameObject.y)-uiCore.Application.app.stage.stageHeight/2>=0&&(this.gameObject.rotation=180-this.gameObject.rotation,this.gameObject.y<-uiCore.Application.app.stage.stageHeight/2?(this.gameObject.x=this.gameObject.x,this.gameObject.y=-uiCore.Application.app.stage.stageHeight/2,this.gameObject.rotation=this.gameObject.rotation):this.gameObject.y>uiCore.Application.app.stage.stageHeight/2&&(this.gameObject.x=this.gameObject.x,this.gameObject.y=uiCore.Application.app.stage.stageHeight/2,this.gameObject.rotation=this.gameObject.rotation)),Math.abs(this.gameObject.x)-uiCore.Application.app.stage.stageWidth/2>0&&(this.gameObject.rotation=-this.gameObject.rotation,this.gameObject.x<-uiCore.Application.app.stage.stageWidth/2?(this.gameObject.x=-uiCore.Application.app.stage.stageWidth/2,this.gameObject.y=this.gameObject.y,this.gameObject.rotation=this.gameObject.rotation):this.gameObject.x>uiCore.Application.app.stage.stageWidth/2&&(this.gameObject.x=uiCore.Application.app.stage.stageWidth/2,this.gameObject.y=this.gameObject.y,this.gameObject.rotation=this.gameObject.rotation))}},t.prototype.bulletUpdate=function(){return-9999==this.endPoint.x&&-9999==this.endPoint.y?void this.bulletInitChange():this.gameObject.y<0||this.gameObject.x>uiCore.Application.app.stage.stageWidth||this.gameObject.y>uiCore.Application.app.stage.stageHeight||this.gameObject.x<0?void this.bulletInitChange():void this.bulletMove()},t.prototype.bulletInitChange=function(){-9999==this.startPoint.x&&-9999==this.startPoint.y?(this.startPoint.x=this.gameObject.x,this.startPoint.y=this.gameObject.y):(this.gameObject.x=this.startPoint.x,this.gameObject.y=this.startPoint.y),null!=this.nextRotation&&(this.bulletshenwei?(this.gameObject.scaleX=1,this.gameObject.scaleY=-1):(this.gameObject.scaleX=-1,this.gameObject.scaleY=1),this.gameObject.rotation=this.nextRotation);var t=this.gameObject.rotation;if(null==this.bulletfangxiang&&(1==this.gameObject.scaleX&&-1==this.gameObject.scaleY?this.bulletfangxiang=1:this.bulletfangxiang=3),1==this.bulletfangxiang)if(t>0)if(t>90){var e=this.gameObject.y-Math.tan((t-90)*Math.PI/180)*this.gameObject.x;0>=e?(this.endPoint.x=0,this.endPoint.y=0,this.bulletshenwei=!0,this.bulletfangxiang=1,this.nextRotation=-45):(this.endPoint.x=0,this.endPoint.y=e,this.bulletshenwei=!1,this.bulletfangxiang=4,this.nextRotation=90-(t-90))}else if(90==t)this.bulletshenwei=!1,this.endPoint.x=0,this.endPoint.y=this.gameObject.y,this.bulletfangxiang=4,this.nextRotation=90;else{var i=this.gameObject.x-Math.tan(t*Math.PI/180)*(uiCore.Application.app.stage.stageHeight-this.gameObject.y);this.bulletshenwei=!1,0>i?(this.endPoint.x=0,this.endPoint.y=this.gameObject.y+Math.tan((90-t)*Math.PI/180)*this.gameObject.x,this.bulletfangxiang=4,this.nextRotation=180-t):0==i?(this.endPoint.x=0,this.endPoint.y=uiCore.Application.app.stage.stageHeight,this.bulletfangxiang=3,this.nextRotation=45):(this.endPoint.x=i,this.endPoint.y=uiCore.Application.app.stage.stageHeight,this.bulletfangxiang=3,this.nextRotation=90-t-90)}else if(0>t)if(t>-90){var i=this.gameObject.x+Math.tan(Math.abs(t)*Math.PI/180)*(uiCore.Application.app.stage.stageHeight-this.gameObject.y);i>uiCore.Application.app.stage.stageWidth?(this.endPoint.x=uiCore.Application.app.stage.stageWidth,this.endPoint.y=this.gameObject.y+Math.tan((t+90)*Math.PI/180)*(uiCore.Application.app.stage.stageWidth-this.gameObject.x),this.bulletshenwei=!0,this.bulletfangxiang=2,this.nextRotation=90-(t+90)):i==uiCore.Application.app.stage.stageWidth?(this.endPoint.x=uiCore.Application.app.stage.stageWidth,this.endPoint.y=uiCore.Application.app.stage.stageHeight,this.bulletshenwei=!1,this.bulletfangxiang=3,this.nextRotation=-45):(this.endPoint.x=i,this.endPoint.y=uiCore.Application.app.stage.stageHeight,this.bulletshenwei=!1,this.bulletfangxiang=3,this.nextRotation=90-(90-Math.abs(t)))}else if(-90==t)this.bulletshenwei=!0,this.endPoint.x=uiCore.Application.app.stage.stageWidth,this.endPoint.y=this.gameObject.y,this.bulletfangxiang=2,this.nextRotation=90;else{var e=this.gameObject.y-Math.tan((Math.abs(t)-90)*Math.PI/180)*(uiCore.Application.app.stage.stageWidth-this.gameObject.x);this.bulletshenwei=!0,0>=e?(this.endPoint.x=uiCore.Application.app.stage.stageWidth,this.endPoint.y=0,this.bulletfangxiang=1,this.nextRotation=45):(this.endPoint.x=uiCore.Application.app.stage.stageWidth,this.endPoint.y=e,this.bulletfangxiang=2,this.nextRotation=180-(90-(Math.abs(t)-90)))}else this.endPoint.x=this.gameObject.x,this.endPoint.y=uiCore.Application.app.stage.stageHeight,this.bulletshenwei=!1,this.bulletfangxiang=3,this.nextRotation=0;else if(2==this.bulletfangxiang)if(t>90){var e=this.gameObject.y-Math.tan((t-90)*Math.PI/180)*uiCore.Application.app.stage.stageWidth;e>0?(this.endPoint.x=0,this.endPoint.y=e,this.bulletshenwei=!1,this.bulletfangxiang=4,this.nextRotation=90-(t-90)):0>e?(this.endPoint.x=uiCore.Application.app.stage.stageWidth-Math.tan((180-t)*Math.PI/180)*this.gameObject.y,this.endPoint.y=0,this.bulletshenwei=!0,this.bulletfangxiang=1,this.nextRotation=90-(90-(180-t))):(this.endPoint.x=0,this.endPoint.y=0,this.bulletshenwei=!0,this.bulletfangxiang=1,this.nextRotation=-45)}else if(90>t){var i=uiCore.Application.app.stage.stageWidth-Math.tan(t*Math.PI/180)*(uiCore.Application.app.stage.stageHeight-this.gameObject.y);i>0?(this.endPoint.x=i,this.endPoint.y=uiCore.Application.app.stage.stageHeight,this.bulletshenwei=!1,this.bulletfangxiang=3,this.nextRotation=90-t-90):0>i?(this.endPoint.x=0,this.endPoint.y=this.gameObject.y+Math.tan((90-t)*Math.PI/180)*uiCore.Application.app.stage.stageWidth,this.bulletshenwei=!1,this.bulletfangxiang=4,this.nextRotation=180-(90-(90-t))):(this.endPoint.x=0,this.endPoint.y=uiCore.Application.app.stage.stageHeight,this.bulletshenwei=!1,this.bulletfangxiang=3,this.nextRotation=45)}else this.endPoint.x=0,this.endPoint.y=this.gameObject.y,this.bulletshenwei=!1,this.bulletfangxiang=4,this.nextRotation=90;else if(3==this.bulletfangxiang)if(t>0)if(t>90){var e=this.gameObject.y+Math.tan((t-90)*Math.PI/180)*(uiCore.Application.app.stage.stageWidth-this.gameObject.x);e>=uiCore.Application.app.stage.stageHeight?(this.endPoint.x=uiCore.Application.app.stage.stageWidth,this.endPoint.y=uiCore.Application.app.stage.stageHeight,this.bulletshenwei=!1,this.bulletfangxiang=3,this.nextRotation=-45):(this.endPoint.x=uiCore.Application.app.stage.stageWidth,this.endPoint.y=e,this.bulletshenwei=!0,this.bulletfangxiang=2,this.nextRotation=90-(t-90))}else if(90==t)this.bulletshenwei=!0,this.endPoint.x=uiCore.Application.app.stage.stageWidth,this.endPoint.y=this.gameObject.y,this.bulletfangxiang=2,this.nextRotation=90;else{var i=this.gameObject.x+Math.tan(t*Math.PI/180)*this.gameObject.y;this.bulletshenwei=!0,i<uiCore.Application.app.stage.stageWidth?(this.endPoint.x=i,this.endPoint.y=0,this.bulletfangxiang=1,this.nextRotation=90-t-90):i==uiCore.Application.app.stage.stageWidth?(this.endPoint.x=uiCore.Application.app.stage.stageWidth,this.endPoint.y=0,this.bulletfangxiang=1,this.nextRotation=45):(this.endPoint.x=uiCore.Application.app.stage.stageWidth,this.endPoint.y=this.gameObject.y-Math.tan((90-t)*Math.PI/180)*(uiCore.Application.app.stage.stageWidth-this.gameObject.x),this.bulletfangxiang=2,this.nextRotation=180-(90-(90-t)))}else if(0>t)if(t>-90){var i=this.gameObject.x-Math.tan(Math.abs(t)*Math.PI/180)*this.gameObject.y;i>0?(this.endPoint.x=i,this.endPoint.y=0,this.bulletshenwei=!0,this.bulletfangxiang=1,this.nextRotation=90-(90-Math.abs(t))):0==i?(this.endPoint.x=0,this.endPoint.y=0,this.bulletshenwei=!0,this.bulletfangxiang=1,this.nextRotation=-45):(this.endPoint.x=0,this.endPoint.y=this.gameObject.y-Math.tan((t+90)*Math.PI/180)*this.gameObject.x,this.bulletshenwei=!1,this.bulletfangxiang=4,this.nextRotation=90-(t+90))}else if(-90==t)this.bulletshenwei=!1,this.endPoint.x=0,this.endPoint.y=this.gameObject.y,this.bulletfangxiang=4,this.nextRotation=90;else{var e=this.gameObject.y+Math.tan((Math.abs(t)-90)*Math.PI/180)*this.gameObject.x;this.bulletshenwei=!1,e>=uiCore.Application.app.stage.stageHeight?(this.endPoint.x=0,this.endPoint.y=uiCore.Application.app.stage.stageHeight,this.bulletfangxiang=3,this.nextRotation=45):(this.endPoint.x=0,this.endPoint.y=e,this.bulletfangxiang=4,this.nextRotation=180-(90-(Math.abs(t)-90)))}else this.endPoint.x=this.gameObject.x,this.endPoint.y=0,this.bulletshenwei=!0,this.bulletfangxiang=1,this.nextRotation=0;else if(4==this.bulletfangxiang)if(t>90){var e=this.gameObject.y+Math.tan((t-90)*Math.PI/180)*uiCore.Application.app.stage.stageWidth;e>uiCore.Application.app.stage.stageHeight?(this.endPoint.x=Math.tan((180-t)*Math.PI/180)*(uiCore.Application.app.stage.stageHeight-this.gameObject.y),this.endPoint.y=uiCore.Application.app.stage.stageHeight,this.bulletshenwei=!1,this.bulletfangxiang=3,this.nextRotation=90-(90-(180-t))):e<uiCore.Application.app.stage.stageHeight?(this.endPoint.x=uiCore.Application.app.stage.stageWidth,this.endPoint.y=e,this.bulletshenwei=!0,this.bulletfangxiang=2,this.nextRotation=90-(t-90)):(this.endPoint.x=uiCore.Application.app.stage.stageWidth,this.endPoint.y=uiCore.Application.app.stage.stageHeight,this.bulletshenwei=!1,this.bulletfangxiang=3,this.nextRotation=-45)}else if(90>t){var i=Math.tan(t*Math.PI/180)*this.gameObject.y;i>uiCore.Application.app.stage.stageWidth?(this.endPoint.x=uiCore.Application.app.stage.stageWidth,this.endPoint.y=this.gameObject.y-Math.tan((90-t)*Math.PI/180)*uiCore.Application.app.stage.stageWidth,this.bulletshenwei=!0,this.bulletfangxiang=2,this.nextRotation=180-(90-(90-t))):i<uiCore.Application.app.stage.stageWidth?(this.endPoint.x=i,this.endPoint.y=0,this.bulletshenwei=!0,this.bulletfangxiang=1,this.nextRotation=90-t-90):(this.endPoint.x=uiCore.Application.app.stage.stageWidth,this.endPoint.y=0,this.bulletshenwei=!0,this.bulletfangxiang=1,this.nextRotation=45)}else this.endPoint.x=uiCore.Application.app.stage.stageWidth,this.endPoint.y=this.gameObject.y,this.bulletshenwei=!0,this.bulletfangxiang=2,this.nextRotation=90;this.fxPoint.x=this.endPoint.x-this.startPoint.x,this.fxPoint.y=this.endPoint.y-this.startPoint.y,this.startPoint.x=this.endPoint.x,this.startPoint.y=this.endPoint.y,this.distNumber=Math.sqrt(this.fxPoint.x*this.fxPoint.x+this.fxPoint.y*this.fxPoint.y),this.bulletMove()},t.prototype.bulletMove=function(){this.gameObject.x+=this.fxPoint.x/this.distNumber*uiCore.Application.bulletSuDu,this.gameObject.y+=this.fxPoint.y/this.distNumber*uiCore.Application.bulletSuDu},t.prototype.UpdateRoPoint=function(){this.gameObject.rotation=this.fishGen.fishGen.rotation,this.fxPoint.x=this.BindFish.x-this.gameObject.x,this.fxPoint.y=this.BindFish.y-this.gameObject.y,this.distNumber=Math.sqrt(this.fxPoint.x*this.fxPoint.x+this.fxPoint.y*this.fxPoint.y),this.bulletMove(),(this.gameObject.x<0||this.gameObject.x>uiCore.Application.app.stage.stageWidth||this.gameObject.y<0||this.gameObject.y>uiCore.Application.app.stage.stageHeight)&&this.fishGen.setLockFish(null)},t}();__reflect(Bullet.prototype,"Bullet");var BulletPool=function(){function t(t){this.objList=[],this.createObjFunc=t}return t.prototype.Init=function(t){if(0==this.objList.length)for(var e=0;t>e;e++){var i=this.createObjFunc();this.objList.push(i)}},t.prototype.activeNum=function(){for(var t=0,e=0;e<this.objList.length;e++)this.objList[e].Running&&t++;return t},t.prototype.setLockFish=function(){for(var t=0;t<this.objList.length;t++)this.objList[t].Running&&this.objList[t].setLockFish(null)},t.prototype.GetObject=function(){for(var t=0;t<this.objList.length;t++)if(!this.objList[t].Running)return this.objList[t];var e=this.createObjFunc();return this.objList.push(e),e},t.prototype.Dispose=function(){var t=this.objList.length;if(t>0)for(var e=t;e>0;e--){var i=this.objList.pop();i.Dispose()}this.objList=[]},t}();__reflect(BulletPool.prototype,"BulletPool");var Fish=function(t){function e(e,i){void 0===i&&(i=!0);var n=t.call(this)||this;return i&&(n.addEventListener(egret.Event.REMOVED_FROM_STAGE,n.onRemovedFish,n),n.addEventListener(egret.Event.ADDED_TO_STAGE,n.onAddedFish,n),n.fishPath=new FishPath(n),n.isRunning=!0,n.canLock=!0,n.fishSet=e),n}return __extends(e,t),e.prototype.onRemovedFish=function(t){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovedFish,this),this.hasEventListener(egret.Event.ENTER_FRAME)&&this.removeEventListener(egret.Event.ENTER_FRAME,this.update,this),this.removeChildren()},e.prototype.onAddedFish=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddedFish,this),this.addEventListener(egret.Event.ENTER_FRAME,this.update,this)},e.prototype.update=function(){this.fishPath.update()},e.prototype.OnPress=function(){Number(this.fishInfo.FishId)<=uiCore.Application.lockminfish?FishGameController.getGameView().thisFishGen.lockFish&&FishGameController.getGameView().thisFishGen.setLockFish(null):Number(this.fishInfo.FishId)>uiCore.Application.lockminfish&&FishGameController.getGameView().thisFishGen.setLockFish(this),FishGameController.getGameView().onPress()},e.prototype.playOrStopMC=function(t){if(this.numChildren>0)for(var e=0;e<this.numChildren;e++){var i=this.getChildAt(e);t?i.gotoAndPlay("swimming",-1):i.isPlaying&&i.stop()}},e.prototype.initInfo=function(t){this.canLock=!0,this.isRunning=!0,this.playOrStopMC(!0),this.isFishArray=t.isFishArray,this.isFishFont=t.isFishFont,this.FishTag=t.FishTag,this.fishInfo=t,this.fishtype=this.fishSet.type,this.isMutiFish=this.fishSet.isMutiFish,this.alpha=1,this.visible=!0,this.scaleX=1,this.scaleY=1,this.lifeTime=t.lifeTime,this.isFishFont||(this.isFishArray?this.setGroupPath(t):this.setPath(t),this.fishPath.fixedScreen=t.FixedScreen||0),this.fishPath.IsCanDown=this.fishSet.isCanDown},e.prototype.setGroupPath=function(t){this.speed=t.Speed,this.lifeTime=0,void 0!=t.LifeTime&&null!=t.LifeTime&&(this.lifeTime=.001*t.LifeTime),void 0!=t.FishDelay&&null!=t.FishDelay&&(this.lifeTime=this.lifeTime-.001*t.FishDelay);var e=void 0!=t.Roat&&null!=t.Roat&&t.Roat/180*Math.PI||0;FishGameController.getGameView().isUpSideDown&&(e+=Math.PI),this.fishPath.setGroupPath(t.FishWay,this.lifeTime,e,this.speed,FishGameController.getGameView().isUpSideDown)},e.prototype.setPath=function(t){this.speed=2*this.fishSet.move_speed,this.lifeTime=0,void 0!=t.LifeTime&&null!=t.LifeTime&&(this.lifeTime=.001*t.LifeTime);var e=t.Roat/180*Math.PI||0;if(FishGameController.getGameView().isUpSideDown&&(e+=Math.PI),this.isFreeGroup=!1,void 0!=t.FishDelay&&null!=t.FishDelay&&(this.lifeTime=this.lifeTime-.001*t.FishDelay,1==t.FishId&&0==t.FishDelay&&(this.isFreeGroup=!0)),this.fishPath.setPath(t.FishWay,this.lifeTime,this.isFreeGroup,e,this.speed),this.fishSet.tweens){var i=this.fishSet.tweens;if(i.length>0)for(var n=0;n<i.length;n++)this.fishPath.addTween(i[n].fps,i[n].frames,i[n].weight,i[n].eases,i[n].trans);this.fishPath.setTween()}},e.prototype.FixedScreen=function(t){this.fishPath.fixedScreen=t,this.playOrStopMC(!1)},e.prototype.FixedScreenEnd=function(){this.fishPath.fixedScreen=0,this.playOrStopMC(!0)},e.prototype.checkInScreen=function(t){return t.x<uiCore.Application.app.stage.stageWidth&&t.x>0&&t.y<uiCore.Application.app.stage.stageHeight&&t.y>0},e.prototype.onInScreen=function(t){this.canLock=t},e.prototype.die=function(){this.isRunning=!1,this.hasEventListener(egret.Event.ENTER_FRAME)&&this.removeEventListener(egret.Event.ENTER_FRAME,this.update,this);var t=this.numChildren;if(t>0){var e=0;t>1&&(e=t-1);for(var i=0;t>i;i++){var n=3;4==this.fishInfo.FishId?n=1:6==this.fishInfo.FishId?n=1:8==this.fishInfo.FishId&&(n=2);var s=this.getChildAt(i);s.gotoAndPlay("death",n),i==e&&s.addEventListener(egret.Event.COMPLETE,this.fishDieDonghua,this)}}},e.prototype.eatFish=function(t){this.fishInfo.Odds=t},e.prototype.fishDieDonghua=function(t){var e=t.currentTarget;e.removeEventListener(egret.Event.COMPLETE,this.fishDieDonghua,this),this.x=-1e4,this.y=1e4,this.visible=!1},e.prototype.recovery=function(){this.isRunning=!1,this.playOrStopMC(!1),this.hasEventListener(egret.Event.ENTER_FRAME)&&this.removeEventListener(egret.Event.ENTER_FRAME,this.update,this),this.x=-1e4,this.y=1e4,this.visible=!1},e.prototype.Dispose=function(){FishGameController.getGameView().downGroup.removeChild(this),this.fishSet=null,this.fishInfo=null},e}(eui.Group);__reflect(Fish.prototype,"Fish");var FishGen=function(t){function e(){var e=t.call(this)||this;return e.lockFish=null,e.isSelfGen=!1,e.targetPos=new egret.Point,e.genPoint=new egret.Point,e.currGenPoint=new egret.Point,e.fx=new egret.Point,e.fishPoint=new egret.Point,e.skinName="FishGenSceneSkin",e.isCannon=!1,e.tagIndex=0,e.lockTag=0,e.isAware=!1,e.isRobot=!1,e.isInited=!1,e.allBullets=[],e.fireRate=.4,e.visible=!1,e}return __extends(e,t),e.prototype.initCoinColumnAnimation=function(){this.currGenPoint.x=this.fishGen.x,this.currGenPoint.y=this.fishGen.y;var t=uiCore.CircleUtils.getCirclePoint(this.currGenPoint,80,this.fishGen.rotation-92),e=uiCore.CircleUtils.getCirclePoint(this.currGenPoint,80,this.fishGen.rotation-88);this.LfireLight.x=t.x,this.LfireLight.y=t.y,this.LlittleLight.x=t.x,this.LlittleLight.y=t.y,this.RfireLight.x=e.x,this.RfireLight.y=e.y,this.RlittleLight.x=e.x,this.RlittleLight.y=e.y},e.prototype.SetId=function(t){var e=this;this.bulletPool=new BulletPool(function(){var i=new eui.Image;i.source=FishGameController.getGameView().getBulletPrefab(t,!1);var n=new Bullet(i);return n.setFishGen(e),n}),this.bulletPool.Init(6),this.SeatNo=t,this.lockFishTraker=new eui.Image,this.lockFishTraker.source="locknum"+(t+1),FishGameController.getGameView().addChild(this.lockFishTraker),this.lockFishTraker.anchorOffsetX=50,this.lockFishTraker.anchorOffsetY=50,this.lockFishTraker.visible=!1,this.lockFishTraker.touchEnabled=!1},e.prototype.initInfo=function(t){this.playerInfo=null,this.playerInfo=t,this.playername.text=t.nickname,this.setGoldNum(t.userMoney),this.moneybg.source="0"+(t.SeatNo+1),this.visible=!0,t==FishGameController.getSelfPlayerInfo()&&(this.addbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRightClick,this),this.downbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftClick,this),this.addbtn.visible=!0,this.downbtn.visible=!0,this.isSelfGen=!0,FishGameController.getGameView()&&(FishGameController.getGameView().isShowSelfPlayerGenPosion||FishGameController.getGameView().showSelfPlayerGenPosion(this.x,this.y),this.lockFishTraker&&FishGameController.getGameView().setChildIndex(this.lockFishTraker,FishGameController.getGameView().numChildren-1)));var e=FishGameController.getFishGameSetting();this.bulletOdssList=e.CannonLevelValue,this.CannonShowNumList=e.CannonShowNum,"0"==t.userId?(this.isRobot=!0,this.bulletOddsSelected=uiCore.Utils.getRandom(1,4)):(this.isRobot=!1,null==this.bulletOddsSelected&&(this.bulletOddsSelected=1)),this.goldPillarPool?this.goldPillarPool.initGoldPillarPool():this.goldPillarPool=new GoldPillarPool(this),egret.Tween.get(this.lockFishView,{loop:!0}).to({factor:360},2e3),egret.Tween.pauseTweens(this.lockFishView),egret.Tween.get(this.card,{loop:!0}).to({factor:360},2e3),egret.Tween.pauseTweens(this.card),this.addEventListener(egret.Event.ENTER_FRAME,this.update,this),this.AIUpdateLastTime=0,this.BulletUpdateLastTime=0,this.fireTime=0,this.isInited=!0,this.setCannon(!1)},e.prototype.ResetInfo=function(){this.isInited=!1,this.setLockFish(null),this.lockFish=null,this.visible=!1,this.removeEventListener(egret.Event.ENTER_FRAME,this.update,this),this.addbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRightClick,this),this.downbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftClick,this),this.removeAllBullet(),this.bulletPool&&this.bulletPool.Dispose(),this.goldPillarPool&&this.goldPillarPool.Dispose(),egret.Tween.removeTweens(this.lockFishView),egret.Tween.removeTweens(this.card),egret.Tween.removeTweens(this.fishGen)},e.prototype.checkLockFishInScreen=function(t){return t.x>0&&t.x<uiCore.Application.app.stage.stageWidth&&t.y>0&&t.y<uiCore.Application.app.stage.stageHeight},e.prototype.setBulletSelected=function(t){this.bulletOddsSelected=t,this.onOddsChange()},e.prototype.setCannon=function(t){this.isCannon=t,this.card.visible=t,t?egret.Tween.resumeTweens(this.card):egret.Tween.pauseTweens(this.card),this.onOddsChange()},e.prototype.onOddsChange=function(){var t=this.getBulletOdds();LibCore.GameConfig.IsPayExchange&&SceneManager.exchangeValue&&(t=(t/SceneManager.exchangeValue).toFixed(2)),this.oddsMoney.text=t,this.fishGen.source=this.getGunSpritePic()},e.prototype.CreateCoinColumn=function(t,e){this.goldPillarPool.getGoldPillarObject().init(t,e,this.fishSeat.x-90,this.fishSeat.x-90-27*this.goldPillarPool.getGoldPillarCount())},e.prototype.getBulletOdds=function(){return this.bulletOdssList[this.bulletOddsSelected-1]},e.prototype.getGunSpritePic=function(){var t="gun1";this.isCannon&&(t="gun2");var e=this.CannonShowNumList[this.bulletOddsSelected-1]-1;return e>3&&(e=3),e>0&&(t=t+"_"+e),t},e.prototype.setAware=function(t){this.isAware=t,this.clearLock()},e.prototype.setFireRate=function(t){this.fireRate=t/2e3},e.prototype.update=function(){!this.isAware&&this.isInited&&(this.isRobot&&!this.isSelfGen&&(this.fireTime=this.fireTime+FishGameManager.deltaTime/3500,this.fireTime>this.fireRate&&(this.fire(),this.fireTime=0),this.AIUpdateLastTime++,this.AIUpdateLastTime>50&&this.findFishToBind(),this.BulletUpdateLastTime=this.BulletUpdateLastTime+FishGameManager.deltaTime/2e3,this.BulletUpdateLastTime>10&&this.updateBulletOdds()),this.SetAutoLockFish(),this.UpdateGenRotation(),this.lockFish&&(this.lockFishTraker.x=this.lockFish.x,this.lockFishTraker.y=this.lockFish.y))},e.prototype.fire=function(){if(FishGameController.getGameView()&&!(this.bulletPool.activeNum()>=FishGameController.getFishGameSetting().MaxBulletCount)&&!FishGameController.getGameView().isPlayWave()&&FishGameController.isOnLine())if(this.BulletOdds=this.getBulletOdds(),this.isSelfGen){var t=GameData.getInstance().userData("gold_num");if(Number(t)>=this.BulletOdds){GameData.getInstance().setUserData("gold_num",t-this.BulletOdds);var e=new Bullet_Contract;e.SeatNo=this.playerInfo.SeatNo,e.BulletId=this.getTagIndex(),e.BulletNum=this.bulletOddsSelected-1,e.PlayerMoney=GameData.getInstance().userData("gold_num"),e.LocalRotation={x:0,y:0,z:this.fishGen.rotation<0?this.fishGen.rotation+360:this.fishGen.rotation},FishGameController.sendCreateBullet(e,!0),this.createBullet(e,!1,this.BulletOdds)}}else if(this.isRobot){var i=Number(this.money.text);if(LibCore.GameConfig.IsPayExchange&&SceneManager.exchangeValue&&(i=Math.round(i*SceneManager.exchangeValue)),i>=this.BulletOdds){var e=new Bullet_Contract;e.SeatNo=this.playerInfo.SeatNo,e.BulletId=this.getTagIndex(),e.BulletNum=this.bulletOddsSelected-1,e.PlayerMoney=i-this.BulletOdds;var n=0;uiCore.Utils.getRandom(1,100)<7&&(n=uiCore.Utils.getRandom(-95,95),n=0>n?n+360:n),e.LocalRotation={x:0,y:0,z:n},FishGameController.sendCreateBullet(e,!1)}else this.bulletOddsSelected>1&&(this.onLeftClick(),this.fire())}},e.prototype.findFishToBind=function(){var t=0,e=uiCore.Application.currGameId;t=e==uiCore.Application.currGameId?22:27;var i=FishGameController.getGameView().ContainFishTypeInScreen(uiCore.Utils.getRandom(10,t));null!=i&&(uiCore.Utils.getRandom(1,100)<8&&null==this.lockFish&&this.checkLockFishInScreen(i)&&this.SendLockFishData(i),this.AIUpdateLastTime=0)},e.prototype.updateBulletOdds=function(){uiCore.Utils.getRandom(1,100)<20&&(this.bulletOddsSelected=uiCore.Utils.getRandom(1,4)),this.BulletUpdateLastTime=0},e.prototype.SetAutoLockFish=function(){if(1==this.wantToLockFish&&1==this.wantToGetAutofile&&null==this.lockFish){var t=FishGameController.getGameView().getAllFishes(),e=[];for(var i in t)(t[i].fishInfo.Odds>=10||t[i].fishInfo.FishId>9)&&e.push(t[i]);if(e.length>0){var n=e[uiCore.Utils.getRandom(0,e.length-1)];n&&n.isRunning&&null==this.lockFish&&this.checkLockFishInScreen(n)&&this.setLockFish(n)}else this.lockFish&&this.setLockFish(null)}},e.prototype.UpdateGenRotation=function(){if(this.lockFish)this.targetPos.x=this.lockFish.x,this.targetPos.y=this.lockFish.y,this.checkLockFishInScreen(this.lockFish)&&this.lockFish.isRunning||this.setLockFish(null);else{if(!this.isSelfGen)return;if(1==this.wantToLockFish&&1==this.wantToGetAutofile)return void(this.fishGen.rotation=0);this.targetPos=FishGameController.getGameView().mousePositionToViewPort()}if(this.targetPos.y>0&&this.targetPos.x>0&&this.targetPos.x<uiCore.Application.app.stage.stageWidth&&this.targetPos.y<uiCore.Application.app.stage.stageHeight){this.localToGlobal(this.fishSeat.x,this.fishSeat.y,this.genPoint),this.fx.x=this.genPoint.x-this.targetPos.x,this.fx.y=this.genPoint.y-this.targetPos.y;var t=Math.atan2(this.fx.y,this.fx.x)*(180/Math.PI);this.fx.x>=0&&this.fx.y>=0?t-=90:this.fx.x<=0&&this.fx.y>=0?t-=90:this.fx.x<=0&&this.fx.y<=0?t=270+t:t-=90,this.SeatNo>2?this.fishGen.rotation=t+180:t>=-95&&95>=t&&(this.fishGen.rotation=t)}},e.prototype.createBullet=function(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=0),this.isInited&&(!this.isSelfGen||!e)){this.initCoinColumnAnimation();var n=uiCore.CircleUtils.getCirclePoint(this.currGenPoint,10,this.fishGen.rotation+90);egret.Tween.get(this.fishGen).to({x:n.x,y:n.y},50).to({x:40,y:40},50),this.LfireLight.getParticleSystem&&this.RfireLight.getParticleSystem&&this.LlittleLight.getParticleSystem&&this.RlittleLight.getParticleSystem&&(this.LfireLight.getParticleSystem.start(100),this.RfireLight.getParticleSystem.start(100),this.LlittleLight.getParticleSystem.start(100),this.RlittleLight.getParticleSystem.start(100)),void 0!=t.BulletNum&&null!=t.BulletNum&&this.bulletOddsSelected!=t.BulletNum+1&&this.setBulletSelected(t.BulletNum+1),this.isSelfGen?FishGameController.playGenAudio(this.isCannon):null==this.lockFish&&t.LocalRotation&&(this.fishGen.rotation=t.LocalRotation.z),this.setGoldNum(t.PlayerMoney);var s=this.bulletPool.GetObject();s.gameObject.parent?s.gameObject.hasEventListener(egret.Event.ENTER_FRAME)||s.gameObject.addEventListener(egret.Event.ENTER_FRAME,s.Update,s):FishGameController.getGameView().bulletGroup.addChild(s.gameObject),s.setDirection(this.fishGen.rotation),s.setLockFish(this.lockFish),this.isRobot&&(i=this.BulletOdds),s.initInfo(t,this.CannonShowNumList[this.bulletOddsSelected-1],this.isCannon,i,this.SeatNo,this),this.allBullets.push(s)}},e.prototype.getTagIndex=function(){return this.tagIndex=this.tagIndex+1,this.tagIndex>2147483647&&(this.tagIndex=0),this.tagIndex},e.prototype.setLockFish=function(t){if((!t||!this.lockFish||this.lockFish!=t)&&(!t||this.wantToLockFish||1!=this.isSelfGen)){if(this.lockFish=t,t?this.lockTag=t.FishTag:(this.lockTag=0,this.bulletPool.setLockFish(),this.lockFishViewContent&&(this.lockFishView.removeChild(this.lockFishViewContent),this.lockFishViewContent=null)),this.lockFish){if(this.lockFishTraker.visible=!0,this.lockFishView.visible=!0,egret.Tween.resumeTweens(this.lockFishView),this.lockFishTraker.x=t.x,this.lockFishTraker.y=t.y,this.lockFishViewContent&&(this.lockFishView.removeChild(this.lockFishViewContent),this.lockFishViewContent=null),FishGameController.getGameView()&&(this.lockFishViewContent=FishGameController.getGameView().fishBorn(t.FishId,!1),this.lockFishViewContent)){if(this.lockFishView.addChild(this.lockFishViewContent),this.lockFishViewContent.FishId=t.FishId,FishGameController.getGameView().allFishes.setFishAnchorOff(this.lockFishViewContent),4==t.fishSet.type&&t.fishInfo.GroupFishId>0){var e=uiCore.MovieClipManager.getGenerateMovieClipData(t.fishInfo.GroupFishId[0]+"");e&&(this.lockFishViewContent.addChild(e),FishGameController.getGameView().setMcAnchorOff(e,t.fishInfo.GroupFishId[0]),t.globalToLocal(t.x,t.y,this.fishPoint),e.x=this.fishPoint.x,e.y=this.fishPoint.y)}var i=Math.min(this.lockFishView.width/this.lockFishViewContent.getChildAt(0).width*.9,this.lockFishView.height/this.lockFishViewContent.getChildAt(0).height*.9);i>.6&&(i=.5),this.lockFishViewContent.scaleX=i,this.lockFishViewContent.scaleY=i,22==t.FishId||21==t.FishId||24==t.FishId||25==t.FishId?this.lockFishViewContent.rotation=0:this.lockFishViewContent.rotation=-90,this.lockFishViewContent.x=this.lockFishView.width/2,this.lockFishViewContent.y=this.lockFishView.height/2,this.lockFishViewContent.playOrStopMC(!0)}}else this.lockFishTraker.visible=!1,this.lockFishView.visible=!1,egret.Tween.pauseTweens(this.lockFishView);this.SendLockFishData(t)}},e.prototype.SendLockFishData=function(t){if(this.isSelfGen||this.isRobot&&t){var e=new lock_FishData;null!=t?(e.FishId=t.fishInfo.FishId,e.FishTag=t.fishInfo.FishTag):(e.FishTag=0,e.FishId=0),e.SeatNo=this.playerInfo.SeatNo,e.FishId>9&&FishGameController.sendLockFish(e)}},e.prototype.LockFishDead=function(t){return 0==this.isInited&&t==this.lockTag?void this.bulletPool.setLockFish():void(t==this.lockTag&&this.setLockFish(null))},e.prototype.setRobot=function(t){this.isRobot=!0},e.prototype.SetGenHitFish=function(t){},e.prototype.onLeftClick=function(){this.bulletOddsSelected=this.bulletOddsSelected-1,this.bulletOddsSelected<1&&(this.bulletOddsSelected=this.bulletOdssList.length),this.onOddsChange(),FishGameController.getGameView().IsAutoFire||FishGameController.getGameView().fireTimer.stop()},e.prototype.onRightClick=function(){this.bulletOddsSelected=this.bulletOddsSelected+1,this.bulletOddsSelected>this.bulletOdssList.length&&(this.bulletOddsSelected=1),this.onOddsChange(),FishGameController.getGameView().IsAutoFire||FishGameController.getGameView().fireTimer.stop()},e.prototype.setWantToLockFish=function(t){this.isSelfGen&&(this.wantToLockFish=t,t||this.RemoveLockFish())},e.prototype.RemoveLockFish=function(){this.setLockFish(null)},e.prototype.GetAutoFile=function(t){this.wantToGetAutofile=t},e.prototype.clearLock=function(){this.RemoveLockFish()},e.prototype.setGoldNum=function(t){0>=t?this.money.text="0":(LibCore.GameConfig.IsPayExchange&&SceneManager.exchangeValue&&(t=(t/SceneManager.exchangeValue).toFixed(2)),this.money.text=t)},e.prototype.getallBullet=function(){if(this.allBullets.length>0){var t=new Array;for(var e in this.allBullets)t.push(this.allBullets[e]);return t}},e.prototype.removeBullet=function(t){for(var e=0;e<this.allBullets.length;e++)this.allBullets[e].BulletId==t.BulletId&&this.allBullets.splice(e,1);this.creatFishNet(t),t.returnObjectPool()},e.prototype.removeBulletNotNet=function(t){for(var e=0;e<this.allBullets.length;e++)this.allBullets[e].BulletId==t.BulletId&&this.allBullets.splice(e,1);t.returnObjectPool()},e.prototype.removeAllBullet=function(){if(this.allBullets.length>0){for(var t in this.allBullets)this.allBullets[t].returnObjectPool();this.allBullets=[]}},e.prototype.creatFishNet=function(t){this.isInited&&FishnetPool.getFishnetObject().Init(t)
},e.prototype.Dispose=function(){this.isInited=!1,this.lockFish=null,this.lockFishView&&egret.Tween.removeTweens(this.lockFishView),this.card&&egret.Tween.removeTweens(this.card),this.lockFishTraker&&FishGameController.getGameView().removeChild(this.lockFishTraker),this.removeAllBullet(),this.removeEventListener(egret.Event.ENTER_FRAME,this.update,this),this.addbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRightClick,this),this.downbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftClick,this),this.bulletPool.Dispose(),this.goldPillarPool&&this.goldPillarPool.Dispose(),this.fishGen&&egret.Tween.removeTweens(this.fishGen)},e}(eui.Component);__reflect(FishGen.prototype,"FishGen");var Player_Info=function(){function t(){}return t}();__reflect(Player_Info.prototype,"Player_Info");var Bullet_Contract=function(){function t(){}return t}();__reflect(Bullet_Contract.prototype,"Bullet_Contract");var lock_FishData=function(){function t(){}return t}();__reflect(lock_FishData.prototype,"lock_FishData");var Fishnet=function(t){function e(){var e=t.call(this)||this;return e.Running=!1,e.visible=!1,FishGameController.getGameView()&&(e.bowens=new Array,e.showTime=500,e.createFishnet(),FishGameController.getGameView().bulletGroup.addChild(e),e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x=-200,e.y=-200),e}return __extends(e,t),Object.defineProperty(e.prototype,"getRunning",{get:function(){return this.Running},enumerable:!0,configurable:!0}),e.prototype.createFishnet=function(){for(var t=0;3>t;t++){var e=uiCore.ParticleManager.getParticleSystem("bowen"),i=new eui.Image;i.source="cobweb",i.scaleX=.3,i.scaleY=.3,t>0&&(i.x=72),2==t&&(i.y=-72),e&&(this.addChild(e),e.scaleX=1.3,e.scaleY=1.3,e.x=54,e.y=54,t>0&&(e.x=e.x+72),2==t&&(e.y=e.y-72),this.bowens.push(e)),this.addChild(i)}},e.prototype.Init=function(t){if(this.Running=!0,this.visible=!0,Number(t.BulletOdds)>100?(this.getChildAt(this.numChildren-1).visible=!0,this.getChildAt(this.numChildren-2).visible=!0):(this.getChildAt(this.numChildren-1).visible=!1,this.getChildAt(this.numChildren-2).visible=!1),this.x=t.gameObject.x,this.y=t.gameObject.y,this.bowens&&this.bowens.length>0)for(var e in this.bowens)this.bowens[e].start(400);egret.setTimeout(function(){this.recovery()},this,this.showTime)},e.prototype.recovery=function(){if(this.Running=!1,this.visible=!1,this.x=-200,this.y=-200,this.bowens&&this.bowens.length>0)for(var t in this.bowens)this.bowens[t].stop(!1)},e}(eui.Component);__reflect(Fishnet.prototype,"Fishnet");var FishnetPool=function(){function t(){}return t.getFishnetObject=function(){if(this.fishNetList.length>0)for(var t in this.fishNetList)if(!this.fishNetList[t].getRunning)return this.fishNetList[t];var e=new Fishnet;return this.fishNetList.push(e),e},t.Dispose=function(){if(this.fishNetList.length>0&&FishGameController.getGameView())for(var t in this.fishNetList)FishGameController.getGameView().bulletGroup.removeChild(this.fishNetList[t]);this.fishNetList=[]},t.fishNetList=[],t}();__reflect(FishnetPool.prototype,"FishnetPool");var FishPath=function(){function t(t){this._elapsed=0,this.delay=0,this._activated=!1,this._forward=!0,this._index=0,this._hidden=!1,this._freeGroup=!1,this._inScreen=!1,this.learp=0,this.pont_done=-1,this.IsCanDown=!0,this.isStatic=!1,this.IsShake=!1,this.fish=t,this._nextOffset=new egret.Point,this.offest=new egret.Point,this._tween=new FishStat_Tween,this.last_pos=new egret.Point,this.fishStatPoint=new egret.Point,this.fangxiang=new egret.Point,this.fishStartInitPoint=new egret.Point}return t.prototype.setGroupPath=function(t,e,i,n,s){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=!1);var o=FishGameManager.groupPathDic[t];o?(this._points=o.paths.points,this._ratio=o.config.fps*n/o.config.speed,this._elapsed=e,this.isActive=this._elapsed>0,s?this._mat=new Matrix32(-o.paths.pos.x/100,-o.paths.pos.y/100,0):this._mat=new Matrix32(o.paths.pos.x/100,o.paths.pos.y/100,0),this._forward=!0,this._mat.roated(i),this.fishStat_init()):(this.removeFish(),FishGameController.getGameView()&&(FishGameController.getGameView().isInFishArray=!1))},t.prototype.setPath=function(t,e,i,n,s){void 0===e&&(e=0),void 0===i&&(i=!1),void 0===n&&(n=0),void 0===s&&(s=0);var o=FishGameManager.pathDic[t];o?(this._points=o.paths,this._ratio=o.config.fps*s/o.config.speed,this._elapsed=e,this.isActive=this._elapsed>0,this._mat=new Matrix32(0,0,0),this._forward=!0,this._freeGroup=i,this._inScreen=!1,this._freeGroup&&(this.offest.x=uiCore.Utils.getRandom(-40,40),this.offest.y=uiCore.Utils.getRandom(-40,40),this._nextOffset.x=uiCore.Utils.getRandom(-40,40),this._nextOffset.y=uiCore.Utils.getRandom(-40,40)),this._mat.roated(n),this.fishStat_init()):(this.removeFish(),FishGameController.getGameView()&&(FishGameController.getGameView().isInFishArray=!0))},t.prototype.fishStat_init=function(){var t=this.fishStat_get_point_pos(0);this.fishStartInitPoint.x=t.x,this.fishStartInitPoint.y=t.y,this.fish.x=this.fishStartInitPoint.x,this.fish.y=this.fishStartInitPoint.y;var e=this.fishStat_get_point_pos(1);this.lastIndex=1;var i=Math.atan2(this.fishStartInitPoint.y-e.y,this.fishStartInitPoint.x-e.x),n=i*(180/Math.PI);this.fishStartInitPoint.x-e.x>=0&&this.fishStartInitPoint.y-e.y>=0?n-=180:this.fishStartInitPoint.x-e.x<=0&&this.fishStartInitPoint.y-e.y>=0?n-=180:n=180+n,this.fish.rotation=n},t.prototype.fishStat_get_point_pos=function(t){return this._mat.xform(this.stat_get_point_pos(t))},t.prototype.stat_get_point_pos=function(t){return this.fishStatPoint.x=.01*this._points[2*t]*uiCore.Application.fishPathXmultiple,this.fishStatPoint.y=.01*this._points[2*t+1]*uiCore.Application.fishPathYmultiple,this.fishStatPoint},t.prototype.addTween=function(t,e,i,n,s){null==this.tweens&&(this.tweens=new Array);var o={fps:t,frames:e,weight:i,eases:n,trans:s};this.tweens.push(o)},t.prototype.setTween=function(){if(null!=this.tweens){this._tween.phases=[];for(var t=0,e=0,i=this.tweens[0].fps,n=0;n<this.tweens.length;n++){var s=this.tweens[n],o=1*s.frames/i;t+=o,e+=s.weight;var r=new FishStat_Phase;r.delta=o,r.weight=s.weight,r.trans=s.trans,r.eases=s.eases,this._tween.phases.push(r)}this._tween.delta=t,this._tween.weight=e,this.tweens=null}},t.prototype.update=function(){null!=this._points&&this.fishUpdate()},t.prototype.fishUpdate=function(){if(this.fixedScreen>0)return void(this.fixedScreen-=FishGameManager.deltaTime/1e3);var t=this.fishStat_get_index(),e=!0;if(t>1&&t==this.lastIndex&&(e=!1),this.lastIndex=t,t>=this._points.length/2)return void this.removeFish();this.last_pos.x=this.fish.x,this.last_pos.y=this.fish.y;var i=this.fishStat_get_point_pos(t);if(this._freeGroup&&(i.x+=this.offest.x+(this._nextOffset.x-this.offest.x)*this.Lerp(0,1,this.learp/120),i.y+=this.offest.y+(this._nextOffset.y-this.offest.y)*this.Lerp(0,1,this.learp/120)),!this.last_pos.equals(i)){this.learp++,this._freeGroup&&this.learp>120&&(this.offest.x=this._nextOffset.x,this.offest.y=this._nextOffset.y,this._nextOffset.x=uiCore.Utils.getRandom(-40,40),this._nextOffset.y=uiCore.Utils.getRandom(-40,40),this.learp=0),this.fish.x=i.x,this.fish.y=i.y;var n=i.x>0&&i.x<uiCore.Application.app.stage.stageWidth&&i.y>0&&i.y<uiCore.Application.app.stage.stageHeight;this.fish&&this._inScreen!=n&&(this.fish.onInScreen(n),this._inScreen=n),e&&(this.fangxiang.x=this.last_pos.x-i.x,this.fangxiang.y=this.last_pos.y-i.y,this.getFishData())}},t.prototype.getFishData=function(t){if(void 0===t&&(t=!0),0!=this.fangxiang.x||0!=this.fangxiang.y){this.fishangle_=Math.atan2(this.fangxiang.y,this.fangxiang.x),this.fishangle=this.fishangle_*(180/Math.PI),this.fangxiang.x>=0&&this.fangxiang.y>=0?this.fishangle=this.fishangle-180:this.fangxiang.x<=0&&this.fangxiang.y>=0?this.fishangle=this.fishangle-180:this.fishangle=180+this.fishangle;var e=void 0,i=this.fish.rotation,n=180,s=0;i>0?(n=i-180,this.fishangle<i&&this.fishangle>n?(e=!1,s=i-this.fishangle):(this.fishangle>i||this.fishangle<n)&&(e=!0,s=this.fishangle>0?this.fishangle-i:360+this.fishangle-i)):0>i?(n=180+i,this.fishangle>i&&this.fishangle<n?(e=!0,s=this.fishangle-i):(this.fishangle<i||this.fishangle>n)&&(e=!1,s=this.fishangle>0?360+i-this.fishangle:i-this.fishangle)):this.fishangle>0?(e=!0,s=this.fishangle-i):this.fishangle<0&&(e=!1,s=i-this.fishangle),s/=60,e?this.fishangle=i+s:this.fishangle=i-s,(this.fishangle>10||this.fishangle<-10)&&(this.IsCanDown?(this.fish.scaleX=1,this.fish.scaleY=-1):(this.fish.scaleX=1,this.fish.scaleY=1)),this.fish.rotation=this.fishangle}this.NotCanDown()},t.prototype.NotCanDown=function(){this.IsCanDown||(this.fish.rotation<90&&this.fish.rotation>-90&&!this.isStatic?(this.fish.scaleX=-1,this.fish.scaleY=1):(this.fish.scaleX=1,this.fish.scaleY=1),this.fish.rotation=0)},t.prototype.removeFish=function(){this.fish&&this.fish.recovery()},t.prototype.fishStat_get_index=function(){var t=this.stat_get_index();if(0==t||null==this._tween||0==this._tween.delta)return t;for(var e=this._elapsed-this.delay,i=e%this._tween.delta,n=Math.floor(e/this._tween.delta)*this._tween.delta,s=0;s<this._tween.phases.length;s++){var o=this._tween.phases[s];{if(!(i>o.delta)){var r=o.delta,a=r;e=uiCore.TweenManager.Call(o.trans,o.eases,i,n,a,r);break}i-=o.delta,i+=o.delta}}i=e%this._tween.delta;for(var s=0;s<this._tween.phases.length;s++){var o=this._tween.phases[s];if(0>=i)break;var h=o.weight/this._tween.weight,l=this._tween.delta*h,u=l/o.delta;e+=i>=o.delta?o.delta*(u-1):i*(u-1),i-=o.delta}return Math.floor(e*this._ratio)},t.prototype.stat_get_index=function(){return this._elapsed+=FishGameManager.deltaTime/1e3,Math.max(Math.floor(this._elapsed*this._ratio),0)},t.prototype.Clamp01=function(t){var e;return e=0>t?0:t>1?1:t},t.prototype.Lerp=function(t,e,i){return t+(e-t)*this.Clamp01(i)},t}();__reflect(FishPath.prototype,"FishPath");var Matrix32=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.elements=new Array(3),this.tmp=new egret.Point;for(var n=0;3>n;n++)this.elements[n]=[];var s=Math.cos(i),o=Math.sin(i);this.elements[0][0]=s,this.elements[1][1]=s,this.elements[0][1]=-o,this.elements[1][0]=o,this.elements[2][0]=t,this.elements[2][1]=e}return t.prototype.tdotx=function(t,e){return this.elements[0][0]*t+this.elements[1][0]*e},t.prototype.tdoty=function(t,e){return this.elements[0][1]*t+this.elements[1][1]*e},t.prototype.roated=function(e){var i=new t(uiCore.Application.app.stage.stageWidth/2,uiCore.Application.app.stage.stageHeight/2,e);this.elements[2][0]+=this.tdotx(i.elements[2][0],i.elements[2][1]),this.elements[2][1]+=this.tdoty(i.elements[2][0],i.elements[2][1]);var n=this.tdotx(i.elements[0][0],i.elements[0][1]),s=this.tdoty(i.elements[0][0],i.elements[0][1]),o=this.tdotx(i.elements[1][0],i.elements[1][1]),r=this.tdoty(i.elements[1][0],i.elements[1][1]);this.elements[0][0]=n,this.elements[0][1]=s,this.elements[1][0]=o,this.elements[1][1]=r},t.prototype.xform=function(t){return this.tmp.x=this.tdotx(t.x,t.y)+this.elements[2][0],this.tmp.y=this.elements[2][1]-this.tdoty(t.x,t.y),this.tmp},t}();__reflect(Matrix32.prototype,"Matrix32");var FishStat_Tween=function(){function t(){this.phases=new Array}return t}();__reflect(FishStat_Tween.prototype,"FishStat_Tween");var FishStat_Phase=function(){function t(){}return t}();__reflect(FishStat_Phase.prototype,"FishStat_Phase");var fishDataTween=function(){function t(){}return t}();__reflect(fishDataTween.prototype,"fishDataTween");var FishPool=function(){function t(t){this.fishPoolArray=[],this.fishPoolSiwimmingMap=[],this.createObjFunc=t,this.fishPoint=new egret.Point,this.resultFish=new Array,this.fishcatchContractArray=new Array}return t.prototype.getObject=function(t){if(this.fishPoolArray.length>0)for(var e=0;e<this.fishPoolArray.length;e++)if(this.fishPoolArray[e].FishId==t&&!this.fishPoolArray[e].isRunning)return this.fishPoolArray[e].hasEventListener(egret.Event.ENTER_FRAME)||this.fishPoolArray[e].addEventListener(egret.Event.ENTER_FRAME,this.fishPoolArray[e].update,this.fishPoolArray[e]),this.fishPoolArray[e];var i=this.createObjFunc(t);return i&&(i.FishId=t,this.fishPoolArray.push(i),FishGameController.getGameView().downGroup.addChild(i),this.setFishAnchorOff(i)),i},t.prototype.setFishAnchorOff=function(t){1==t.FishId?(t.anchorOffsetX=60,t.anchorOffsetY=11):2==t.FishId?(t.anchorOffsetX=50,t.anchorOffsetY=20):3==t.FishId?(t.anchorOffsetX=50,t.anchorOffsetY=20):4==t.FishId?(t.anchorOffsetX=60,t.anchorOffsetY=30):5==t.FishId?(t.anchorOffsetX=90,t.anchorOffsetY=25):6==t.FishId?(t.anchorOffsetX=80,t.anchorOffsetY=30):7==t.FishId?(t.anchorOffsetX=80,t.anchorOffsetY=23):8==t.FishId?(t.anchorOffsetX=90,t.anchorOffsetY=30):9==t.FishId?(t.anchorOffsetX=80,t.anchorOffsetY=30):10==t.FishId?(t.anchorOffsetX=60.5,t.anchorOffsetY=70):11==t.FishId?(t.anchorOffsetX=118,t.anchorOffsetY=45):12==t.FishId?(t.anchorOffsetX=100,t.anchorOffsetY=80):13==t.FishId?(t.anchorOffsetX=125,t.anchorOffsetY=40):14==t.FishId?(t.anchorOffsetX=150,t.anchorOffsetY=50):15==t.FishId?(t.anchorOffsetX=130,t.anchorOffsetY=125):16==t.FishId?(t.anchorOffsetX=200,t.anchorOffsetY=60):17==t.FishId?(t.anchorOffsetX=200,t.anchorOffsetY=60):18==t.FishId?(t.anchorOffsetX=300,t.anchorOffsetY=40):19==t.FishId?(t.anchorOffsetX=100,t.anchorOffsetY=150):20==t.FishId?(t.anchorOffsetX=98,t.anchorOffsetY=98):21==t.FishId?(t.anchorOffsetX=200,t.anchorOffsetY=230):22==t.FishId?(t.anchorOffsetX=30,t.anchorOffsetY=180):23==t.FishId?(t.anchorOffsetX=230,t.anchorOffsetY=100):24==t.FishId?(t.anchorOffsetX=220,t.anchorOffsetY=180):25==t.FishId?(t.anchorOffsetX=75,t.anchorOffsetY=75):26==t.FishId?(t.anchorOffsetX=90,t.anchorOffsetY=90):27==t.FishId&&(t.anchorOffsetX=120,t.anchorOffsetY=80)},t.prototype.checkPoolNum=function(){if(this.fishPoolArray.length>110)for(var t=0,e=this.fishPoolArray.length,i=0;e>i;i++)if(this.fishPoolArray[i]&&!this.fishPoolArray[i].isRunning){var n=this.fishPoolArray.splice(i,1);if(n[0].Dispose(),t++,t>e-110)break}},t.prototype.getFishByType=function(t){for(var e=0;e<this.fishPoolArray.length;e++)if(this.fishPoolArray[e].FishId==t&&1==this.fishPoolArray[e].isRunning&&(this.fishPoint.x=this.fishPoolArray[e].x,this.fishPoint.y=this.fishPoolArray[e].y,this.fishPoolArray[e].checkInScreen(this.fishPoint)))return this.fishPoolArray[e];return null},t.prototype.markFish=function(){for(var t=0;t<this.fishPoolArray.length;t++)this.fishPoolArray[t].isRunning&&this.fishPoolSiwimmingMap.push(this.fishPoolArray[t].FishTag)},t.prototype.getAllTheTypeFish=function(t){for(var e=new Array,i=0;i<this.fishPoolArray.length;i++)this.fishPoolArray[i].FishId==t&&1==this.fishPoolArray[i].isRunning&&e.push(this.fishPoolArray[i]);return e},t.prototype.getAllFishInBombRange=function(t,e,i,n){this.fishcatchContractArray=[];for(var s=0;s<this.fishPoolArray.length;s++)if(this.fishPoolArray[s].isRunning&&this.fishPoolArray[s].canLock&&this.isInRange(t,e,this.fishPoolArray[s].x,this.fishPoolArray[s].y,i)){var o=new Fishcatch_Contract;o.SeatNo=n.SeatNo,o.FishTag=this.fishPoolArray[s].FishTag,o.FishId=this.fishPoolArray[s].FishId,o.BulletId=n.BulletId,o.WinMoney=this.fishPoolArray[s].fishInfo.Odds*n.BulletOdds,this.fishcatchContractArray.push(o)}return this.fishcatchContractArray},t.prototype.getAllActiveFish=function(){this.resultFish=[];for(var t in this.fishPoolArray)this.fishPoolArray[t].isRunning&&this.resultFish.push(this.fishPoolArray[t]);return this.resultFish},t.prototype.FixedScreen=function(t){for(var e=0;e<this.fishPoolArray.length;e++)this.fishPoolArray[e].isRunning&&this.fishPoolArray[e].FixedScreen(t)},t.prototype.FixedScreenEnd=function(){for(var t=0;t<this.fishPoolArray.length;t++)this.fishPoolArray[t].isRunning&&this.fishPoolArray[t].FixedScreenEnd()},t.prototype.getFish=function(t){for(var e in this.fishPoolArray)if(this.fishPoolArray[e].FishTag==t&&1==this.fishPoolArray[e].isRunning)return this.fishPoolArray[e];return null},t.prototype.recovery=function(t){for(var e=0;e<this.fishPoolArray.length;e++)if(this.fishPoolArray[e].FishTag==t){this.fishPoolArray[e].recovery();break}},t.prototype.bossEatFish=function(t,e){for(var i=0;i<this.fishPoolArray.length;i++)if(this.fishPoolArray[i].FishTag==t)return void this.fishPoolArray[i].eatFish(e)},t.prototype.fishDie=function(t){for(var e=0;e<this.fishPoolArray.length;e++)this.fishPoolArray[e].FishTag==t&&this.fishPoolArray[e].die()},t.prototype.recoveryAllMark=function(){for(var t=0;t<this.fishPoolSiwimmingMap.length;t++)for(var e=0;e<this.fishPoolArray.length;e++)if(this.fishPoolArray[e].FishTag==this.fishPoolSiwimmingMap[t]){this.fishPoolArray[e].recovery();break}this.fishPoolSiwimmingMap=[]},t.prototype.getAllSiwimming=function(){for(var t=new Array,e=0;e<this.fishPoolSiwimmingMap.length;e++)for(var i=0;i<this.fishPoolArray.length;i++)this.fishPoolArray[i].FishTag==this.fishPoolSiwimmingMap[e]&&t.push(this.fishPoolArray[i]);return t},t.prototype.recoveryAllFish=function(){for(var t=0;t<this.fishPoolArray.length;t++)this.fishPoolArray[t].recovery()},t.prototype.reconnectAllFish=function(){if(this.fishPoolArray.length>0)for(var t=this.fishPoolArray.length;t>0;t--)this.fishPoolArray.pop().Dispose();this.fishPoolArray=[]},t.prototype.isInRange=function(t,e,i,n,s){return-1==s?!0:Math.sqrt(Math.floor(t-i)*Math.floor(t-i)+Math.floor(e-n)*Math.floor(e-n))<s},t}();__reflect(FishPool.prototype,"FishPool");var Fishcatch_Contract=function(){function t(){}return t}();__reflect(Fishcatch_Contract.prototype,"Fishcatch_Contract");var FlyCoin=function(){function t(t,e){this.isGold=e,this.Running=!1,this.flyCoinType=t;var i="one";this.playStr="playjinbi",this.isGold?(i="goldOneCoin",this.playStr="run",5==t?(i="jbzGoldRotate",this.playStr="start"):10==t&&(i="ten",this.playStr="play")):5==t?(i="silverFive",this.playStr="run"):10==t&&(i="silverTen",this.playStr="run"),FishGameController.getGameView()&&(this.flyCoinMc=uiCore.MovieClipManager.getGenerateMovieClipData(i),this.flyCoinMc&&(FishGameController.getGameView().addChild(this.flyCoinMc),this.flyCoinMc.frameRate=15,this.flyCoinMc.x=-500,this.flyCoinMc.y=-500,this.flyCoinMc.visible=!1))}return t.prototype.checkFlyCoinMc=function(){return this.flyCoinMc?!0:!1},Object.defineProperty(t.prototype,"getRunning",{get:function(){return this.Running},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getIsGold",{get:function(){return this.isGold},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getFlyCoinType",{get:function(){return this.flyCoinType},enumerable:!0,configurable:!0}),t.prototype.Init=function(t,e,i,n){if(this.flyCoinMc){this.Running=!0,this.flyCoinMc.visible=!0;var s=0;s=e.x>t.x?n-i:i+1,t.x+=(this.flyCoinMc.width+20)*i;var o=t.subtract(e),r=Math.abs(Math.sqrt(o.x*o.x+o.y*o.y)),a=r+100*s+500;this.flyCoinMc.gotoAndPlay(this.playStr,-1),this.flyCoinMc.x=t.x,this.flyCoinMc.y=t.y,egret.Tween.get(this.flyCoinMc).wait(500).to({x:e.x,y:e.y},a).call(function(){this.recovery()},this)}},t.prototype.recovery=function(){this.Running=!1,this.flyCoinMc.visible=!1,this.flyCoinMc.x=-500,this.flyCoinMc.y=-500,this.flyCoinMc.stop(),this.cleanFlyCoin()},t.prototype.cleanFlyCoin=function(){this.flyCoinMc&&egret.Tween.removeTweens(this.flyCoinMc)},t}();__reflect(FlyCoin.prototype,"FlyCoin");var FlyCoinPool=function(){function t(){}return t.getFlyCoinObject=function(t,e){if(this.FlyCoinList.length>0)for(var i in this.FlyCoinList)if(!this.FlyCoinList[i].getRunning&&this.FlyCoinList[i].getFlyCoinType==t&&this.FlyCoinList[i].getIsGold==e){if(this.FlyCoinList[i].checkFlyCoinMc())return this.FlyCoinList[i];this.FlyCoinList.splice(Number(i),1)}var n=new FlyCoin(t,e);return this.FlyCoinList.push(n),n},t.Dispose=function(){if(this.FlyCoinList.length>0)for(var t in this.FlyCoinList)this.FlyCoinList[t].cleanFlyCoin();this.FlyCoinList=[]},t.FlyCoinList=[],t}();__reflect(FlyCoinPool.prototype,"FlyCoinPool");var GoldPillar=function(t){function e(){var e=t.call(this)||this;return e.Running=!1,e.visible=!1,e.bottom=0,e.alpha=0,e.pillarCopy=new eui.Image,e.pillarCopy.source="stack_s",e.pillarCopy.bottom=0,e.pillarCopy.visible=!1,e.pillarCopy.horizontalCenter=0,e.pillar=new eui.Image,e.pillar.source="stack_s",e.pillar.bottom=0,e.pillar.horizontalCenter=0,e.pillar.mask=e.pillarCopy,e.addChild(e.pillar),e.addChild(e.pillarCopy),e.bgc1=new eui.Image,e.bgc1.source="bgc1",e.bgc1.scaleX=.4,e.bgc1.horizontalCenter=0,e.bgc2=new eui.Image,e.bgc2.source="bgc2",e.bgc2.scaleX=.4,e.bgc2.horizontalCenter=0,e.addChild(e.bgc1),e.addChild(e.bgc2),e.mcGoldRotate=uiCore.MovieClipManager.getGenerateMovieClipData("jbzGoldRotate"),e.mcGoldRotate&&(e.addChild(e.mcGoldRotate),e.mcGoldRotate.scaleX=.36,e.mcGoldRotate.scaleY=.36),e.pillarText=new egret.BitmapText,e.pillarText.font=uiCore.ZipManager.getFontImageMap("fishAndPillarFont_fnt"),e.pillarText.textAlign="center",e.pillarText.scaleX=.2,e.pillarText.scaleY=.2,e.addChild(e.pillarText),e}return __extends(e,t),e.prototype.goldPillarReset=function(){this.alpha=1,this.pillarCopy.scaleY=0,this.bgc2.bottom=0,this.bgc1.bottom=.3,this.mcGoldRotate.visible=!0,this.mcGoldRotate.x=(this.width-.36*this.mcGoldRotate.width)/2,this.mcGoldRotate.y=this.height-.36*this.mcGoldRotate.height+.36*this.mcGoldRotate.height/6,this.mcGoldRotate.gotoAndPlay("start",-1),this.pillarText.visible=!1,this.pillarText.x=-((.2*this.pillarText.width-this.width)/2)},Object.defineProperty(e.prototype,"getRunning",{get:function(){return this.Running},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e,i,n){this.Running=!0,this.visible=!0,LibCore.GameConfig.IsPayExchange&&SceneManager.exchangeValue&&(t=(t/SceneManager.exchangeValue).toFixed(2)),this.pillarText.text=t,this.x=n,this.goldPillarPlay(e,i,n)},e.prototype.goldPillarPlay=function(t,e,i){this.goldPillarReset();var n=Math.min(t,19.5)/64,s=30*Math.min(Number(t),30);egret.Tween.get(this.pillarCopy).to({scaleY:n},s),egret.Tween.get(this.bgc1).to({bottom:this.pillar.height*n+.3},s),egret.Tween.get(this.bgc2).to({bottom:this.pillar.height*n},s),egret.Tween.get(this.mcGoldRotate).to({y:this.height-this.pillar.height*n-.36*this.mcGoldRotate.height},s).call(function(){this.mcGoldRotate.visible=!1,this.mcGoldRotate.stop(),this.pillarText.y=this.mcGoldRotate.y+.2*this.pillarText.height,this.pillarText.visible=!0,i!=e&&egret.Tween.get(this).to({x:e},35*FishGameManager.deltaTime),egret.Tween.get(this).to({alpha:0},1e3).call(this.recovery,this)},this)},e.prototype.recovery=function(){this.removeTween(),this.Running=!1,this.visible=!1},e.prototype.removeTween=function(){this.pillarCopy&&this.bgc1&&this.bgc2&&this.mcGoldRotate&&this&&(egret.Tween.removeTweens(this.pillarCopy),egret.Tween.removeTweens(this.bgc1),egret.Tween.removeTweens(this.bgc2),egret.Tween.removeTweens(this.mcGoldRotate),egret.Tween.removeTweens(this))},e.prototype.clearGoldPillar=function(){this.removeTween()},e}(eui.Group);__reflect(GoldPillar.prototype,"GoldPillar");var GoldPillarPool=function(){function t(t){this.goldPillarList=[],this.fishGen=t}return t.prototype.initGoldPillarPool=function(){if(this.goldPillarList&&this.goldPillarList.length>0)for(var t in this.goldPillarList)this.goldPillarList[t].Running=!1,this.goldPillarList[t].alpha=0,this.goldPillarList[t].visible=!1},t.prototype.getGoldPillarObject=function(){if(this.goldPillarList&&this.goldPillarList.length>0)for(var t in this.goldPillarList)if(!this.goldPillarList[t].getRunning)return this.goldPillarList[t];var e=new GoldPillar;return this.goldPillarList.push(e),this.fishGen.addChild(e),e},t.prototype.getGoldPillarCount=function(){var t=0;if(this.goldPillarList.length>0)for(var e in this.goldPillarList)this.goldPillarList[e].getRunning&&t++;return t},t.prototype.Dispose=function(){if(this.goldPillarList&&this.goldPillarList.length>0)for(var t in this.goldPillarList)this.goldPillarList[t].clearGoldPillar()},t}();__reflect(GoldPillarPool.prototype,"GoldPillarPool");var Lunzi=function(){function t(){this.Running=!1,FishGameController.getGameView()&&(this.lunzigold=new eui.Image,this.lunzigold.source="fishlunzi",this.lunziMoney=new eui.BitmapLabel,this.lunziMoney.font=uiCore.ZipManager.getFontImageMap("powerFont_fnt"),this.lunziMoney.textAlign="center",FishGameController.getGameView().addChild(this.lunzigold),FishGameController.getGameView().addChild(this.lunziMoney),this.lunzigold.visible=!1,this.lunziMoney.visible=!1,this.lunzigold.x=-500,this.lunzigold.y=-500,this.lunzigold.anchorOffsetX=this.lunzigold.width/2,this.lunzigold.anchorOffsetY=this.lunzigold.height/2,this.lunziMoney.x=-500,this.lunziMoney.y=-500,egret.Tween.get(this.lunzigold,{loop:!0}).to({rotation:180},500).to({rotation:-60},500),egret.Tween.pauseTweens(this.lunzigold))}return Object.defineProperty(t.prototype,"getRunning",{get:function(){return this.Running},enumerable:!0,configurable:!0}),t.prototype.checkLunzigold=function(){return this.lunzigold?!0:!1},t.prototype.Init=function(t,e,i){this.Running=!0,this.lunzigold.visible=!0,this.lunziMoney.visible=!0,egret.Tween.resumeTweens(this.lunzigold),LibCore.GameConfig.IsPayExchange&&SceneManager.exchangeValue&&(i=(i/SceneManager.exchangeValue).toFixed(2)),this.lunziMoney.text=i,e>300?(t+=40,e=e-this.lunzigold.height/2-30):(t-=40,e=e+this.lunzigold.height/2+30),this.lunzigold.x=t,this.lunzigold.y=e,t-=this.lunziMoney.width/2,e-=this.lunziMoney.height/2,this.lunziMoney.x=t,this.lunziMoney.y=e,egret.setTimeout(function(){this.recovery()},this,1500)},t.prototype.recovery=function(){this.Running=!1,this.lunzigold.visible=!1,this.lunziMoney.visible=!1,this.lunzigold.x=-500,this.lunzigold.y=-500,this.lunziMoney.x=-500,this.lunziMoney.y=-500,egret.Tween.pauseTweens(this.lunzigold)},t.prototype.cleanLunzi=function(){this.lunzigold&&egret.Tween.removeTweens(this.lunzigold)},t}();__reflect(Lunzi.prototype,"Lunzi");var LunziPool=function(){function t(){}return t.getLunziObject=function(){if(this.LunziList.length>0)for(var t in this.LunziList)if(!this.LunziList[t].getRunning){if(this.LunziList[t].checkLunzigold())return this.LunziList[t];this.LunziList.splice(Number(t),1)}var e=new Lunzi;return this.LunziList.push(e),e},t.Dispose=function(){if(this.LunziList.length>0)for(var t in this.LunziList)this.LunziList[t].cleanLunzi();this.LunziList=[]},t.LunziList=[],t}();__reflect(LunziPool.prototype,"LunziPool");var MoneyLabel=function(){function t(){this.Running=!1,FishGameController.getGameView()&&(this.moneyBit=new eui.BitmapLabel,this.moneyBit.textAlign="center",FishGameController.getGameView().addChild(this.moneyBit),this.moneyBit.x=-500,this.moneyBit.y=-500,this.moneyBit.visible=!1)}return Object.defineProperty(t.prototype,"getRunning",{get:function(){return this.Running},enumerable:!0,configurable:!0}),t.prototype.checkMoneyBit=function(){return this.moneyBit?!0:!1},t.prototype.Init=function(t,e,i){e&&"undefined"!=i&&(this.Running=!0,this.moneyBit.visible=!0,LibCore.GameConfig.IsPayExchange&&SceneManager.exchangeValue&&(i=(i/SceneManager.exchangeValue).toFixed(2)),this.moneyBit.text=i,this.moneyBit.x=e.x,this.moneyBit.y=e.y,t?this.moneyBit.font=uiCore.ZipManager.getFontImageMap("powerFont_fnt"):this.moneyBit.font=uiCore.ZipManager.getFontImageMap("silverFont_fnt"),egret.Tween.get(this.moneyBit).to({y:this.moneyBit.y+20},100).to({y:this.moneyBit.y-80},100).to({y:this.moneyBit.y},800).call(function(){this.recovery()},this))},t.prototype.recovery=function(){this.Running=!1,this.moneyBit.visible=!1,this.moneyBit.x=-500,this.moneyBit.y=-500,this.cleanMoneyLabel()},t.prototype.cleanMoneyLabel=function(){this.moneyBit&&egret.Tween.removeTweens(this.moneyBit)},t}();__reflect(MoneyLabel.prototype,"MoneyLabel");var MoneyLabelPool=function(){function t(){}return t.getMoneyLabelObject=function(){if(this.MoneyLabelList.length>0)for(var t in this.MoneyLabelList)if(!this.MoneyLabelList[t].getRunning){if(this.MoneyLabelList[t].checkMoneyBit())return this.MoneyLabelList[t];this.MoneyLabelList.splice(Number(t),1)}var e=new MoneyLabel;return this.MoneyLabelList.push(e),e},t.Dispose=function(){if(this.MoneyLabelList.length>0)for(var t in this.MoneyLabelList)this.MoneyLabelList[t].cleanMoneyLabel();this.MoneyLabelList=[]},t.MoneyLabelList=[],t}();__reflect(MoneyLabelPool.prototype,"MoneyLabelPool");var ObjectPool=function(){function t(t){this.objList=[],this.createObjFunc=t}return t.getInstance=function(e){return this._instance||(this._instance=new t(e)),this._instance},t.prototype.Init=function(t){if(0==this.objList.length)for(var e=0;t>e;e++){var i=this.createObjFunc();this.objList.push(i)}},t.prototype.GetObject=function(){for(var t=0;t<this.objList.length;t++)if(!this.objList[t].Running)return this.objList[t];var e=this.createObjFunc();return this.objList.push(e),e},t.prototype.Dispose=function(){var t=this.objList.length;if(t>0)for(var e=t;e>0;e--){var i=this.objList.shift();i.Dispose(),i=null}},t}();__reflect(ObjectPool.prototype,"ObjectPool");var Data;!function(t){t.EnMsgData=[{id:1,msgId:"1",msg:"Operation failed. Please try again later!"},{id:2,msgId:"2",msg:"Logging in to the game, please wait......\nUse Google Chrome to play games and get a better experience!"},{id:3,msgId:"3",msg:"Installing Game resources,"},{id:4,msgId:"4",msg:"Copy successful"},{id:5,msgId:"5",msg:"Table"},{id:6,msgId:"6",msg:"To maintain fairness among all players on the game platform, the coins received from the deposit event cannot be used in the game. Please understand."},{id:7,msgId:"7",msg:"Insufficient coins!"},{id:8,msgId:"8",msg:"Beginner Room"},{id:9,msgId:"9",msg:"Advance Room"},{id:10,msgId:"10",msg:"Expert Room"},{id:11,msgId:"11",msg:"Login Failed!"},{id:12,msgId:"12",msg:"The game will quit in (0) seconds due to long idle time. "},{id:13,msgId:"13",msg:"Error when connecting to server"},{id:14,msgId:"14",msg:"Password error"},{id:15,msgId:"15",msg:"Game loading failed. Please restart the game!"},{id:16,msgId:"16",msg:"Now loading game content. Please wait."},{id:17,msgId:"17",msg:"This account is logged in from another location. Please use another account to log in again!"},{id:18,msgId:"18",msg:"Exiting game failed. Please try to exit again!"},{id:19,msgId:"19",msg:"No connection"},{id:20,msgId:"20",msg:"Delay"},{id:21,msgId:"21",msg:"Confirm"},{id:22,msgId:"22",msg:"Cancel"},{id:23,msgId:"23",msg:"QuickLogin"},{id:24,msgId:"24",msg:"Connection is unstable. Please reconnect."},{id:25,msgId:"25",msg:"Network connection failed!"},{id:26,msgId:"26",msg:"登录失败，请重新登陆！"}]}(Data||(Data={}));var LibCore;!function(t){var e=function(){function e(){}return e._log=function(t,e){},e.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&this._log("[LOG] ",t)},e.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&this._log("[**ERROR**] ",t)},e.warning=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&this.outputWarning&&this._log("[!WARNING!] ",t)},e.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&this._log("[INFO] ",t)},e.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&this.outputDebug&&this._log("[DEBUG] ",t)},e.enabled=t.GameConfig.useConsoleLog,e.outputWarning=t.GameConfig.useConsoleLog,e.outputDebug=!1,e}();t.GameLog=e,__reflect(e.prototype,"LibCore.GameLog")}(LibCore||(LibCore={}));var Net;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.endian=egret.Endian.LITTLE_ENDIAN,e}return __extends(e,t),e.prototype.toString=function(){return"<ByteArrayLittle len="+this.length+",pos="+this.position+">"},e}(egret.ByteArray);t.ByteArrayLittle=e,__reflect(e.prototype,"Net.ByteArrayLittle")}(Net||(Net={}));var Net;!function(t){var e=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=0);var n=t.call(this)||this;return n._port=0,n.host="127.0.0.1",n.ports=null,e&&(n.host=e),i instanceof Array?n.ports=i:i&&(n.port=i),n}return __extends(e,t),Object.defineProperty(e.prototype,"port",{get:function(){return!this._port&&this.ports&&this.ports.length>0&&(this._port=this.ports[Math.floor(Math.random()*this.ports.length)]),this._port},set:function(t){this._port=t
},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"host="+this.host+",port="+this.port},e}(egret.HashObject);t.ConnectInfo=e,__reflect(e.prototype,"Net.ConnectInfo")}(Net||(Net={}));var Net;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),Object.defineProperty(i.prototype,"socketSvc",{get:function(){return this._socketSvc||(this._socketSvc=t.SocketService.instance),this._socketSvc},enumerable:!0,configurable:!0}),i.connect=function(){i.instance._connInfo||(i.instance._connInfo=new t.ConnectInfo(LibCore.GameConfig.SVR_HOST,LibCore.GameConfig.SVR_PORT)),i.instance.socketSvc.connect(i.instance._connInfo)},i.send=function(e,i,n){void 0===i&&(i={});var s=t.SocketInterface.createRecvPacket();s.write(n,GameData.getInstance().userData("username"),e,i),t.SocketService.instance.sendPacket(s)},i.instance=new i,i}(egret.HashObject);t.GameService=e,__reflect(e.prototype,"Net.GameService")}(Net||(Net={}));var Net;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._content=new t.ByteArrayLittle,i}return __extends(i,e),Object.defineProperty(i.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"resultPackage",{get:function(){return this._resultPackage},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"result",{get:function(){return this._result},enumerable:!0,configurable:!0}),i.prototype.read=function(e){var i=uiCore.ProtobufManager.spObject.unpack(e.bytes);this._resultPackage=uiCore.ProtobufManager.spObject.decode("package",i);var n=uiCore.ProtobufManager.spObject.objlen("package",i),s=i.slice(n,i.length),o=t.FishGameTypeUtils.getFishGameTypeStr(this._resultPackage.type,!1);null!=o&&(this._result=uiCore.ProtobufManager.spObject.decode(o,s))},i.prototype.write=function(e,i,n,s){if(void 0===s&&(s={}),uiCore.ProtobufManager.spObject){var o={playerId:i,type:n,serverId:e},r=uiCore.ProtobufManager.spObject.encode("package",o),a=t.FishGameTypeUtils.getFishGameTypeStr(n,!0);if(null!=a){var h=uiCore.ProtobufManager.spObject.encode(a,s),l=uiCore.ProtobufManager.spObject.pack(utils.arrayconcat(r,h));this._content=new egret.ByteArray(new Uint8Array(l))}}},i}(egret.HashObject);t.Packet=e,__reflect(e.prototype,"Net.Packet")}(Net||(Net={}));var net;!function(t){var e=function(){function e(){}return e.RestConnectHttp=function(){var e={openIMEI:uiCore.Utils.getIMEI(),agent:LibCore.GameConfig.agentid};uiCore.HttpManager.getInstance().send(LibCore.GameConfig.http_visterlogin_url,e,egret.URLRequestMethod.POST,function(e){1==e.code?(GameData.getInstance().setUserData("signText",e.LoginSign),GameData.getInstance().setUserData("username",e.AccountName),GameData.getInstance().setUserData("userId",e.UserID),GameData.getInstance().setUserData("passward",e.Password),GameData.getInstance().setUserData("bankgoldnum",e.BankMoney),GameData.getInstance().setUserData("gold_num",e.Money),GameData.getInstance().setUserData("iconid",e.SystemIconID),GameData.getInstance().setUserData("viplevel",e.Viplevel),GameData.getInstance().setUserData("isnicknamechange",e.IsNickNameChange),GameData.getInstance().setUserData("agentId",LibCore.GameConfig.agentid),GameData.getInstance().setUserData("nickname",e.nickName),GameData.getInstance().requestLoggedInData(),Net.GameService.connect()):t.RestConnect.RestConnectHttp()},function(){egret.setTimeout(function(){t.RestConnect.RestConnectHttp()},this,1e3)},this)},e}();t.RestConnect=e,__reflect(e.prototype,"net.RestConnect")}(net||(net={}));var Net;!function(t){var e=function(){function e(){}return e.createRecvPacket=function(){return new t.Packet},e.errorLog=console.log,e.debugLog=console.log,e}();t.SocketInterface=e,__reflect(e.prototype,"Net.SocketInterface")}(Net||(Net={}));var Net;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),Object.defineProperty(i.prototype,"connected",{get:function(){return this._socket&&this._socket.connected},enumerable:!0,configurable:!0}),i.prototype.connect=function(e){this.disconnect();try{this._connInfo=e,this.initSocket();var i="ws://";0==this._connInfo.port?this._socket.connectByUrl(i+this._connInfo.host):this._socket.connectByUrl(i+this._connInfo.host+":"+this._connInfo.port)}catch(n){t.SocketInterface.service=this,t.SocketInterface.onConnectFail&&t.SocketInterface.onConnectFail()}},i.prototype.disconnect=function(){this._socket&&this.onDisconnect(null)},i.prototype.onConnect=function(e){t.SocketInterface.service=this,t.SocketInterface.onConnect&&t.SocketInterface.onConnect()},i.prototype.onDisconnect=function(e){this.clearSocket(),t.SocketInterface.service=this,e&&t.SocketInterface.onDisconnect&&t.SocketInterface.onDisconnect()},i.prototype.onData=function(e){this._socket.readBytes(this._readBuffer,this._readBuffer.length),t.SocketInterface.service=this;var i=new egret.ByteArray,n=new egret.ByteArray;this._readBuffer.readBytes(n,0,4),this._readBuffer.readBytes(i);var s=t.SocketInterface.createRecvPacket();s.read(i),this.readPacket(s),this._readBuffer&&0==t.ByteArrayUtils.readAvailable(this._readBuffer)&&(this._readBuffer.length=0)},i.prototype.onError=function(e){t.SocketInterface.service=this,this.connected?t.SocketInterface.onError&&t.SocketInterface.onError():t.SocketInterface.onConnectFail&&t.SocketInterface.onConnectFail()},i.prototype.initSocket=function(){this._socket||(this._socket=new egret.WebSocket,this._socket.type=egret.WebSocket.TYPE_BINARY,this._socket.addEventListener(egret.Event.CONNECT,this.onConnect,this),this._socket.addEventListener(egret.Event.CLOSE,this.onDisconnect,this),this._socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onData,this),this._socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this),this._readBuffer=new t.ByteArrayLittle,this._writeBuffer=new t.ByteArrayLittle)},i.prototype.clearSocket=function(){this._socket&&(this._socket.removeEventListener(egret.Event.CONNECT,this.onConnect,this),this._socket.removeEventListener(egret.Event.CLOSE,this.onDisconnect,this),this._socket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onData,this),this._socket.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this),this._socket.connected&&this._socket.close(),this._socket=null,this._readBuffer.clear(),this._readBuffer=null,this._writeBuffer.clear(),this._writeBuffer=null)},i.prototype.readPacket=function(t){if(t.resultPackage&&t.result){var e=uiCore.ProtobufManager.getReturnCallFunMap(t.resultPackage.type);null!=e&&e(t.result)}},i.prototype.sendPacket=function(e){if(this.connected)try{this._writeBuffer.length=e.content.length+4,this._writeBuffer.position=0,this._writeBuffer.writeUnsignedInt(e.content.length),this._writeBuffer.writeBytes(e.content),this._socket.writeBytes(this._writeBuffer),this._socket.flush()}catch(i){t.SocketInterface.service=this,t.SocketInterface.onSendError&&t.SocketInterface.onSendError(i,e)}},i.prototype.clearBuffer=function(){this._readBuffer&&0==this._readBuffer.length&&this._readBuffer.clear(),this._writeBuffer&&this._writeBuffer.clear()},i.instance=new i,i}(egret.HashObject);t.SocketService=e,__reflect(e.prototype,"Net.SocketService")}(Net||(Net={}));var Net;!function(t){var e=function(){function t(){}return t.isEqual=function(e,i){var n=e.length;if(n!=i.length)return!1;for(var s=t.getBytes(e),o=t.getBytes(i),r=0;n>r;r++)if(s[r]!=o[r])return!1;return!0},t.concat=function(t,e,i){void 0===i&&(i=!1);var n=i?new t.constructor:t,s=n.length;return n.position=s,n.writeBytes(e),n},t.toHex=function(t,e,i,n,s){if(void 0===e&&(e=" "),void 0===i&&(i=""),void 0===n&&(n=0),void 0===s&&(s=0),n=0>n?Math.max(0,t.length+n):Math.min(n,t.length),s=Math.min(t.length-n,s||2147483647),s>0){for(var o=[],r=new Uint8Array(t.buffer),a=0;s>a;a++){var h=r[a+n].toString(16);o[a]=(i&&a+n==t.position?i:"")+(1==h.length?"0"+h:h)}return o.join(e)}return""},t.readAvailable=function(t){return t.length-t.position},t.getBytes=function(t){return t.bytes?t.bytes:new Uint8Array(t.buffer)},t}();t.ByteArrayUtils=e,__reflect(e.prototype,"Net.ByteArrayUtils")}(Net||(Net={}));var Net;!function(t){var e=function(){function t(){}return t.getFishGameTypeStr=function(t,e){var i="request";e||(i="response");var n=null;return t==HallSocketType.LOGIN?n="login":t==HallSocketType.KICK_OUT?n="kickout":t==HallSocketType.OutForServer?n="outLinkForServer":t==HallSocketType.LoginHall?n="LoginHall":t==HallSocketType.UserInfo?n="UserInfo":t==HallSocketType.LoginGame?n="LoginGame":t==HallSocketType.ExitGame?n="ExitGame":t==HallSocketType.UpdateSystemMsg?n="UpdateSystemMsg":t==HallSocketType.UpdateDataCMD?n="UpdateDataCMD":t==HallSocketType.UpDownGoldState?n="UpDownGoldState":t==HallSocketType.UpDownGold?n="UpDownGold":t==HallSocketType.GameBank?n="GameBank":t==HallSocketType.UpDownGoldCancel?n="UpDownGoldCancel":t==HallSocketType.InMailMessage?n="InMailMessage":t==HallSocketType.InFormMessage?n="InFormMessage":t==HallSocketType.InMailTrueMessage?n="InMailTrueMessage":t==HallSocketType.MissionMessage?n="MissionMessage":t==HallSocketType.LimitMessage?n="LimitMessage":t==HallSocketType.TipsMessage?n="TipsMessage":t==HallSocketType.FishActivityMessage?n="FishActivityMessage":t==HallSocketType.HEARDBEAT?n="heardbeat":t==FishGameContractType.DESK_LIST?n="DeskRpc":t==FishGameContractType.LOGIJOIN_DESKN?n="JoinDeskRpc":t==FishGameContractType.QUIT_DESK?n="QuitDeskRpc":t==FishGameContractType.LOAD_COMPLETE?n="ClientLoadCompleteRpc":t==FishGameContractType.ROBOT_AGENT?n="RobotRpc":t==FishGameContractType.CREATE_BULLET?n="CreateBulletRpc":t==FishGameContractType.FISH_GAME_SETTING?n="FishGameSettingRpc":t==FishGameContractType.CANNON?n="CannonRpc":t==FishGameContractType.LOCK_FISH?n="LockFishRpc":t==FishGameContractType.BOMB_FISH?n="BombFishRpc":t==FishGameContractType.CREATE_FISH?n="CreateFishRpc":t==FishGameContractType.BOSS_EAT_FISH?n="EatFishRpc":t==FishGameContractType.CATCH_FISH?n="CatchFishRpc":t==FishGameContractType.CATCH_FISH_RECORD?n="GetFishCatchRecordRpc":t==FishGameContractType.CREATED_FISH?n="GetCreatedFishRpc":t==FishGameContractType.CREATE_FISH_ARRAY&&(n="CreateFishArrayRpc"),null!=n&&(n=n+"."+i),n},t}();t.FishGameTypeUtils=e,__reflect(e.prototype,"Net.FishGameTypeUtils")}(Net||(Net={}));var uiCore;!function(t){var e=function(e){function i(i,n,s,o,r,a){var h=e.call(this)||this;return h.skinName=t.Alert.skinName,h.message=i,h.title=n,h.buttonLable=s,h.okHandler=o,h.thisObject=r,h}return __extends(i,e),i.prototype.childrenCreated=function(){this.txtTitle&&(this.txtTitle.text=this.title),this.okButton.label=t.LangUtils.getMsgById(21),this.messageLabel.textFlow=t.StringUtils.textToRichText(this.message),this.okButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOKButton,this)},i.prototype.onOKButton=function(e){this.okButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOKButton,this),t.Application.closeWindow(this),this.okHandler&&this.okHandler.apply(this.thisObject)},i.init=function(t){this.skinName=t},i.show=function(e,i,n,s,o,r){void 0===r&&(r=!1);for(var a=t.WindowManager.getInstance().windowList,h=0;h<a.length;h++)if(a[h]instanceof t.Alert){var l=a[h];if(l.messageLabel.text==e)return l}s=s||t.Alert.titleString,o=o||t.Alert.buttonLableString,this.skinName||warn("Alert弹窗未初始化，将不会被显示，请先调用uiCore.Alert.init()。");var l=new t.Alert(e,s,o,i,n,r);return t.Application.addWindow(l,!0,!0,r),l},i}(t.Window);t.Alert=e,__reflect(e.prototype,"uiCore.Alert")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.animationSource="demo{0}_png",i.autoPlay=!0,i.loop=!0,i.loopTime=0,i.frameRate=24,i.frameNum=0,i.stopIndex=0,i.stopAndVisible=!1,i.loopID=-1,i.frames=new Array,i._currentFrame=-1,i._isPlaying=!1,i.reverse=!1,i.addEventListener(egret.Event.REMOVED_FROM_STAGE,i.onRemoved,i),i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAdded,i),i.animationSource=t,i}return __extends(i,e),Object.defineProperty(i.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),i.prototype.onRemoved=function(t){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this),this.stop()},i.prototype.onAdded=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),this.refresh()},i.prototype.childrenCreated=function(){this.getResources()},i.prototype.getResources=function(){if(this.frames=[],0==this.frameNum)for(var e=1,i="01";RES.getRes(t.StringUtils.format(this.animationSource,i));)this.frames.push(t.StringUtils.format(this.animationSource,i)),e++,i=e+"",10>e&&(i="0"+e);else for(var e=1;e<=this.frameNum;e++){var i=e+"";10>e&&(i="0"+i),this.frames.push(t.StringUtils.format(this.animationSource,i))}},i.prototype.play=function(){this.reverse=!1,this.visible=!0,this._isPlaying&&this.stop(),this.timerID=egret.setInterval(this.onInterval,this,this.frameRate),this._isPlaying=!0},i.prototype.reversePlay=function(){this.reverse=!0,this.visible=!0,this._isPlaying&&this.stop(),this.timerID=egret.setInterval(this.onInterval,this,this.frameRate),this._isPlaying=!0},i.prototype.playToIndex=function(t){this.visible=!0,this._isPlaying&&this.stop(),t>this.frameNum-1&&(t=this.frameNum-1),this.stopIndex=t,this.timerID=egret.setInterval(this.onIntervalControlByIndex,this,this.frameRate),this._isPlaying=!0},i.prototype.stop=function(){this.currentFrame=0,egret.clearInterval(this.timerID),this._isPlaying=!1,-1!=this.loopID&&egret.clearTimeout(this.loopID)},i.prototype.stopToIndex=function(t){this.setFrame(t),this.currentFrame=t},Object.defineProperty(i.prototype,"currentFrame",{set:function(t){this._currentFrame=t},enumerable:!0,configurable:!0}),i.prototype.setFrame=function(t){this.stop(),t>this.frameNum-1&&(t=this.frameNum-1),this.source=this.frames[t],this.visible=!0},i.prototype.getCurrentFrame=function(){return this._currentFrame},i.prototype.refresh=function(){this.stop(),this.autoPlay?(this.onInterval(),this.play()):this.source=this.frames[this._currentFrame]},i.prototype.onInterval=function(){t.Utils.checkRealVisible(this)&&(this.reverse?this.source=this.frames.concat().reverse()[this._currentFrame]:this.source=this.frames[this._currentFrame],this.currentFrame=this._currentFrame+1,this._currentFrame==this.frames.length&&(this.loop?(this.currentFrame=0,this.loopTime>0&&(this.stop(),this.loopID=egret.setTimeout(this.play,this,this.loopTime))):(this.stop(),this.visible=!this.stopAndVisible),this.completeEvent||(this.completeEvent=new egret.Event(egret.Event.ENDED)),this.dispatchEvent(this.completeEvent)))},i.prototype.onIntervalControlByIndex=function(){t.Utils.checkRealVisible(this)&&(this.source=this.frames[this._currentFrame],this.currentFrame=this._currentFrame+1,this._currentFrame==this.frames.length&&(this.currentFrame=0,this.play()),this._currentFrame==this.stopIndex&&(this.stopToIndex(this.stopIndex),this.completeEvent||(this.completeEvent=new egret.Event(egret.Event.ENDED)),this.dispatchEvent(this.completeEvent)))},i}(eui.Image);t.Animation=e,__reflect(e.prototype,"uiCore.Animation")}(uiCore||(uiCore={}));var Main=function(t){function e(){var e=this;return RES.setMaxLoadingThread(6),uiCore.LangUtils.setLangType(),Object.defineProperty(Data,"MsgData",{get:function(){var t;return uiCore.LangUtils.getLangType()==uiCore.LangUtils.ZH_CN&&(t=Data.ZhMsgData),uiCore.LangUtils.getLangType()==uiCore.LangUtils.EN_US&&(t=Data.EnMsgData),uiCore.LangUtils.getLangType()==uiCore.LangUtils.TH_TH&&(t=Data.ThMsgData),uiCore.LangUtils.getLangType()==uiCore.LangUtils.VI_VI&&(t=Data.ViMsgData),uiCore.LangUtils.getLangType()==uiCore.LangUtils.ID_ID&&(t=Data.IdMsgData),t}}),e=t.call(this,LoadingUI,"default_"+uiCore.LangUtils.getLangType()+".res.json?v="+LibCore.GameConfig.version,LibCore.GameConfig.RES,"default.thm.json?v="+LibCore.GameConfig.version,["preload"],uiCore.Loadding)||this}return __extends(e,t),e.prototype.start=function(){uiCore.ComponentUtils.init("public.AlertSkin","public.DialogSkin","public.BannerSkin","public.LoaddingSkin",this.afterStart,this)},e.prototype.afterStart=function(){this.stage.maxTouches=1,this.initLocalStorage()},e.prototype.initLocalStorage=function(){null==egret.localStorage.getItem(uiCore.SoundByteManager.FISH_MUSIC_VALUE)&&egret.localStorage.setItem(uiCore.SoundByteManager.FISH_MUSIC_VALUE,"0.5"),null==egret.localStorage.getItem(uiCore.SoundByteManager.FISH_SOUND_VALUE)&&egret.localStorage.setItem(uiCore.SoundByteManager.FISH_SOUND_VALUE,"0.8"),uiCore.SoundByteManager.musicValue=uiCore.Utils.getLocalStorageItem(uiCore.SoundByteManager.FISH_MUSIC_VALUE,"Number"),uiCore.SoundByteManager.soundValue=uiCore.Utils.getLocalStorageItem(uiCore.SoundByteManager.FISH_SOUND_VALUE,"Number"),GameData.getInstance(),SceneManager.init(),uiCore.ZipManager.initFont(["ttlBlueFont","ttlGreenFont","ttlPurpleFont"]);var t=this;Net.SocketInterface.onConnect=function(){t.onConnect()},Net.SocketInterface.onDisconnect=function(){t.onDisconnect()},Net.SocketInterface.onError=function(){t.onError()},Net.SocketInterface.onConnectFail=function(){t.onConnectFail()};var e=uiCore.Utils.getQueryString("AccountName"),i=uiCore.Utils.getQueryString("Token"),n=null==uiCore.Utils.getQueryString("GameID")?uiCore.Application.currGameId:parseInt(uiCore.Utils.getQueryString("GameID")),s=uiCore.Utils.getQueryString("AgentID"),o=uiCore.Utils.getQueryString("NickName"),r=uiCore.Utils.getQueryString("SystemIconID"),a=uiCore.Utils.getQueryString("Password"),h=uiCore.Utils.getQueryString("Viplevel"),l=0,u=uiCore.Utils.getQueryString("UserID"),c=uiCore.Utils.getQueryString("UserType"),p=0,g=uiCore.Utils.getQueryString("Money"),f=uiCore.Utils.getQueryString("icon");null!=e&&null!=i&&null!=s?(GameData.getInstance().clearUserData(),GameData.getInstance().setUserData("userId",u),GameData.getInstance().setUserData("signText",i),GameData.getInstance().setUserData("username",e),GameData.getInstance().setUserData("agentId",s),GameData.getInstance().setUserData("useragentid",s),GameData.getInstance().setUserData("nickname",o),GameData.getInstance().setUserData("GameID",n),GameData.getInstance().setUserData("UserType",c),GameData.getInstance().setUserData("iconid",r),GameData.getInstance().setUserData("viplevel",h),GameData.getInstance().setUserData("passward",a),GameData.getInstance().setUserData("isnicknamechange",l),GameData.getInstance().setUserData("gold_num",g),GameData.getInstance().setUserData("bankgoldnum",p),f&&GameData.getInstance().setUserData("playerHeadId",f),SceneManager.getExchange(),GameData.getInstance().requestLoggedInData(),uiCore.Application.addLoadding(),Net.GameService.connect(),0==n?t.ChangeMainSceneView():t.ChangeRoomScaneView()):(t.goLogin(),GameData.getInstance().setUserData("agentId",LibCore.GameConfig.agentid))},e.prototype.onConnect=function(){var t={LoginModel:1,LoginType:2,AccountName:GameData.getInstance().userData("username"),Sign:GameData.getInstance().userData("signText"),AgentID:GameData.getInstance().userData("agentId"),LoginDeviceID:uiCore.Utils.getIMEI()};Net.GameService.send(HallSocketType.LoginHall,t,0)},e.prototype.onDisconnect=function(){console.log("连接被断开事件"),SceneManager.tryTimer.running||SceneManager.restConnect()},e.prototype.onError=function(){uiCore.Alert.show(uiCore.LangUtils.getMsgById(1))},e.prototype.onConnectFail=function(){console.log("发生错误断开连接"),SceneManager.tryTimer.running||SceneManager.restConnect()},e.prototype.goLogin=function(){uiCore.Application.changeScene(new LoginSceneView)},e.prototype.ChangeMainSceneView=function(){SceneManager.changeSceneView(MainSceneView)},e.prototype.ChangeRoomScaneView=function(){SceneManager.changeSceneView(RoomSceneView)},e.prototype.onLoaddingProgress=function(t,e,i){var n=this.loadingUI;n.setProgress(t,e,i)},e.prototype.onAllGroupComplete=function(){var t=this.loadingUI;t.setText(uiCore.LangUtils.getMsgById(2)),null!=t.tipTextSetInterval&&egret.clearInterval(t.tipTextSetInterval)},e}(uiCore.BaseMain);__reflect(Main.prototype,"Main");var uiCore;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.source="",e.sourceGroup="",e.speed=1,e.autoPlay=!0,e.playOnce=!1,e.defentAnimationName="",e.stopAndVisible=!1,e._isLoaded=!1,e}return __extends(e,t),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this.armature?this.armature.animation.isPlaying:!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return this._isLoaded},enumerable:!0,configurable:!0}),e.prototype.getResource=function(){""!=this.source&&(""!=this.sourceGroup?RES.isGroupLoaded(this.sourceGroup)?this.armature&&this.contains(this.armature)?(this.armature.removeEventListener(dragonBones.EventObject.COMPLETE,this.onAnimationComplete,this),this.removeChild(this.armature)):this.init():(RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.loadGroup(this.sourceGroup)):this.loadRESComplete()&&(RES.getResAsync(this.source+"_ske_json",this.loadRESComplete,this),RES.getResAsync(this.source+"_tex_json",this.loadRESComplete,this),RES.getResAsync(this.source+"_tex_png",this.loadRESComplete,this)))},e.prototype.loadRESComplete=function(){return RES.getRes(this.source+"_ske_json")&&RES.getRes(this.source+"_tex_json")&&RES.getRes(this.source+"_tex_png")?(this.init(),!1):!0},e.prototype.onResourceLoadComplete=function(t){t.groupName==this.sourceGroup&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),this.init())},e.prototype.childrenCreated=function(){this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovedFromStage,this),this.getResource()},e.prototype.init=function(){this._isLoaded=!0;var t=RES.getRes(this.source+"_ske_json"),i=RES.getRes(this.source+"_tex_json"),n=RES.getRes(this.source+"_tex_png");if(!t||!i||!n)return void warn("资源"+this.source+"不存在");this.armature&&this.removeChild(this.armature);var s=dragonBones.EgretFactory.factory;if(s.getDragonBonesData(this.source)||(s.parseDragonBonesData(t),s.parseTextureAtlasData(i,n)),this.armature=s.buildArmatureDisplay(this.source,this.source),!this.armature){var o=s.getAllDragonBonesData(),r=o[this.source],a=r.armatureNames[0];this.armature=s.buildArmatureDisplay(a,this.source)}if(this.addChild(this.armature),this.armature.addEventListener(dragonBones.EventObject.COMPLETE,this.onAnimationComplete,this),this.visible=!this.stopAndVisible,this.autoPlay){var h=-1==this.armature.animation.animationNames.indexOf(this.defentAnimationName)?this.armature.animation.animationNames[0]:this.defentAnimationName;this.playOnce?this.play(h,1).timeScale=this.speed:this.play(h).timeScale=this.speed}e.isAdvanceTime||(egret.Ticker.getInstance().register(e.onTicker,this),e.isAdvanceTime=!0),this.dispatchEventWith(e.EVENT_LOADCOMPLETE)},e.onTicker=function(t){dragonBones.WorldClock.clock.advanceTime(t/1e3)},e.prototype.onRemovedFromStage=function(t){t.type==egret.Event.REMOVED&&t.type==egret.Event.REMOVED_FROM_STAGE&&(this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovedFromStage,this),this.stop(),e.isAdvanceTime||egret.Ticker.getInstance().unregister(e.onTicker,this),this.armature&&(this.armature.removeEventListener(dragonBones.EventObject.COMPLETE,this.onAnimationComplete,this),this.armature.dispose(!0),this.armature&&this.armature.parent&&this.armature.parent.removeChild(this.armature)),dragonBones.EgretFactory.factory.getDragonBonesData(this.source)&&dragonBones.EgretFactory.factory.removeDragonBonesData(this.source,!1),this.armature=null,this.okHander=null,this.thisObject=null,this.params=null)},e.prototype.onAnimationComplete=function(t){this.visible=!this.stopAndVisible,this.dispatchEvent(t),this.okHander&&this.okHander.apply(this.thisObject,this.params)},e.prototype.play=function(t,e){return this.armature?(this.armature.animation.stop(),this.visible=!0,this.armature.animation.play(t,e)):void 0},e.prototype.stop=function(){this.armature&&this.armature.animation&&(this.armature.animation.stop(),this.visible=!this.stopAndVisible)},e.prototype.getAnimDuration=function(){return 1e3*this.armature.animation.getState(this.armature.animation.animationNames[0]).totalTime},e.prototype.addHander=function(t,e,i){this.okHander=t,this.thisObject=e,this.params=i},e.prototype.replaceSlot=function(t,e){var i=this.armature.armature.getSlot(t);i.displayController="none",i.displayIndex=e},Object.defineProperty(e.prototype,"animation",{get:function(){return this.armature?this.armature.animation:void 0},enumerable:!0,configurable:!0}),e.isAdvanceTime=!1,e.EVENT_LOADCOMPLETE="loadComplete",e}(eui.Group);t.Animator=e,__reflect(e.prototype,"uiCore.Animator")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"getanimDisplay",{get:function(){return this.animDisplay},enumerable:!0,configurable:!0}),e.prototype.getAnimDelay=function(){return this.animDisplay.getAnimDuration()},e}(t.Button);t.AnimButton=e,__reflect(e.prototype,"uiCore.AnimButton")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(e){function i(i,n,s){var o=e.call(this)||this;return o.skinName=t.Banner.skinName,o.message=i,o.horizontalCenter=0,o.okHandler=n,o.thisObject=s,o.delay=i.length/7,o.delay<3?o.delay=3:o.delay>6&&(o.delay=6),null!=o.okHandler&&(o.delay=6),o}return __extends(i,e),i.prototype.childrenCreated=function(){this.messageLabel.textFlow=t.StringUtils.textToRichText(this.message),this.y=-this.height,egret.Tween.get(this).to({y:0},300),this.playTimer()},i.prototype.pauseTimer=function(){egret.clearTimeout(this.timeID);egret.getTimer()},i.prototype.playTimer=function(){this.timeID=egret.setTimeout(this.onTimeOut,this,1e3*this.delay)},i.prototype.replayTimer=function(){this.pauseTimer(),this.playTimer()},i.prototype.close=function(){if(t.Application.closeWindow(this),egret.clearTimeout(this.timeID),i.bannerList.pop(),i.bannerList.length){var e=i.bannerList[i.bannerList.length-1];e.playTimer()}this.okHandler&&this.okHandler.apply(this.thisObject)},i.prototype.onTimeOut=function(){egret.Tween.get(this).to({y:-this.height},300).call(this.close,this)},i.init=function(t,e){void 0===e&&(e=2e3),this.skinName=t,this.bannerList=new Array},i.show=function(e,n,s){this.skinName||warn("Banner标语未初始化，将不会被显示，请先调用uiCore.Banner.init()。");var o=new t.Banner(e,n,s);if(i.bannerList.length){var r=i.bannerList[i.bannerList.length-1];r.pauseTimer(),r.message==e&&r.okHandler==n&&r.thisObject==s&&r.replayTimer()}return this.bannerList.push(o),t.Application.addWindow(o,!1,!1,!1,!1),o},i}(eui.Component);t.Banner=e,__reflect(e.prototype,"uiCore.Banner")}(uiCore||(uiCore={}));var HallSocketType=function(){function t(){}return t.LOGIN=100,t.KICK_OUT=101,t.OutForServer=102,t.LoginHall=103,t.UserInfo=104,t.LoginGame=105,t.ExitGame=106,t.UpdateSystemMsg=107,t.UpdateDataCMD=108,t.UpDownGoldState=109,t.UpDownGold=110,t.GameBank=111,t.UpDownGoldCancel=112,t.InMailMessage=113,t.InFormMessage=114,t.InMailTrueMessage=115,t.MissionMessage=116,t.LimitMessage=119,t.TipsMessage=120,t.FishActivityMessage=130,t.HEARDBEAT=201,t}();__reflect(HallSocketType.prototype,"HallSocketType");var FishGameContractType=function(){function t(){}return t.DESK_LIST=1015,t.LOGIJOIN_DESKN=1016,t.QUIT_DESK=1017,t.LOAD_COMPLETE=1019,t.ROBOT_AGENT=1020,t.CREATE_BULLET=1025,t.FISH_GAME_SETTING=1027,t.CANNON=1028,t.LOCK_FISH=1032,t.BOMB_FISH=1033,t.CREATE_FISH=1034,t.BOSS_EAT_FISH=1035,t.CATCH_FISH=1036,t.CATCH_FISH_RECORD=1037,t.CREATED_FISH=1038,t.CREATE_FISH_ARRAY=1039,t}();__reflect(FishGameContractType.prototype,"FishGameContractType");var uiCore;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.soundPath="window_open_mp3",e._styleFrame="",e._styleBtnUp="button_up",e._styleBtnDown="button_down",e._suffName="_png",e.data=new i,e.skinName="ButtonExSkin",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e.prototype.onTouchTab=function(t){RES.hasRes(this.soundPath)},Object.defineProperty(e.prototype,"styleFrame",{get:function(){return this._styleFrame},set:function(t){this._styleFrame!=t&&(this._styleFrame=t,this.data.upIcon=this.styleBtnUp+this._styleFrame+this._suffName,this.data.downIcon=this.styleBtnDown+this._styleFrame+this._suffName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleBtnUp",{get:function(){return this._styleBtnUp},set:function(t){this._styleBtnUp=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleBtnDown",{get:function(){return this._styleBtnDown},set:function(t){this._styleBtnDown=t},enumerable:!0,configurable:!0}),e}(eui.Button);t.ButtonEx=e,__reflect(e.prototype,"uiCore.ButtonEx",["eui.UIComponent","egret.DisplayObject"]);var i=function(){function t(){}return Object.defineProperty(t.prototype,"downIcon",{get:function(){return this._downIcon},set:function(t){this._downIcon=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"upIcon",{get:function(){return this._upIcon},set:function(t){this._upIcon=t},enumerable:!0,configurable:!0}),t}();__reflect(i.prototype,"StyleFrameData")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.isNeedMask=!1,e.scaleDuration=100,e.scaleWhenDown=.95,e.soundPath="touch_mp3",e.isScale=!0,e._visible=!1,e.addEventListener(egret.Event.RESIZE,e.onSizeOne,e),e}return __extends(e,t),e.prototype.childrenCreated=function(){this.groupScale?this._scaleGroup=this.groupScale:this._scaleGroup=new eui.Group,this._scaleGroup.visible=!1,this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchOutSide,this)},e.prototype.setSkin=function(e){t.prototype.setSkin.call(this,e),this._scaleGroup&&this._scaleGroup.parent&&(this._scaleGroup.parent.removeChild(this._scaleGroup),this._scaleGroup=new eui.Group,this.initGroupScale())},e.prototype.onSizeOne=function(){this.removeEventListener(egret.Event.RESIZE,this.onSizeOne,this),this.initGroupScale()},e.prototype.initGroupScale=function(){if(!(this._scaleGroup.anchorOffsetX>0)){var t=this.width,e=this.height;if(this._scaleGroup!=this.groupScale&&this._scaleGroup.numChildren<=0){for(var i=null;this.numChildren>0;)i=this.getChildAt(0),this._scaleGroup.addChild(i);this.addChild(this._scaleGroup)}this._scaleGroup.width=t,this._scaleGroup.height=e,this._scaleGroup.anchorOffsetX=.5*t,this._scaleGroup.anchorOffsetY=.5*e,this._scaleGroup.x=.5*t,this._scaleGroup.y=.5*e,this.width=t,this.height=e,this._scaleGroup.visible=!0}},e.prototype.onTouchBegin=function(i){t.prototype.onTouchBegin.call(this,i),this.isScale&&(this._scaleGroup.scaleX=this.scaleWhenDown,this._scaleGroup.scaleY=this.scaleWhenDown),this.isNeedMask&&(e._mask||(e._mask=new eui.Rect,e._mask.fillColor=0,e._mask.fillAlpha=0),e._mask.width=this.stage.width,e._mask.height=this.stage.height,this.stage.addChild(e._mask),egret.setTimeout(function(t){t.removeChild(e._mask)},this,300,this.stage))},e.prototype.onTouchEnd=function(t){this.isScale&&(this._scaleGroup.scaleX=1,this._scaleGroup.scaleY=1)},e.prototype.onTouchOutSide=function(t){this.onTouchEnd(null),this.stage&&this.stage.contains(e._mask)&&t.target.hitTestPoint(t.stageX,t.stageY)&&egret.TouchEvent.dispatchTouchEvent(t.target,egret.TouchEvent.TOUCH_TAP,!0,!0,t.stageX,t.stageX,t.touchPointID,!1)},e.prototype.setScaleByStatus=function(){var t=this.getCurrentState();this.scaleX=this.scaleY="down"==t?this.scaleWhenDown:1},e.prototype.onTouchTab=function(t){RES.hasRes(this.soundPath)},e}(eui.CheckBox);t.CheckBox=e,__reflect(e.prototype,"uiCore.CheckBox")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(){function e(){}return e.init=function(e,i,n,s,o,r){void 0===r&&(r=null),t.Alert.init(e),t.Dialog.init(i),t.Banner.init(n),t.Loadding.init(s),o&&o.apply(r)},e}();t.ComponentUtils=e,__reflect(e.prototype,"uiCore.ComponentUtils")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(e){function i(i,n,s,o,r,a){var h=e.call(this)||this;
return h.skinName=t.Dialog.skinName,h.message=i,h.title=n,h.buttonLable=s,h.okHandler=o,h.cancelHandler=r,h.thisObject=a,h}return __extends(i,e),i.prototype.childrenCreated=function(){this.txtTitle&&(this.txtTitle.text=this.title);this.buttonLable?this.buttonLable.split("|"):[];this.okButton.label=t.LangUtils.getMsgById(21)||this.buttonLable,this.cancelButton.label=t.LangUtils.getMsgById(22)||this.buttonLable,this.messageLabel.textFlow=t.StringUtils.textToRichText(this.message),this.okButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOKButton,this),this.cancelButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancelButton,this)},i.prototype.onOKButton=function(e){this.okButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOKButton,this),t.Application.closeWindow(this),this.okHandler&&this.okHandler.apply(this.thisObject)},i.prototype.onCancelButton=function(e){this.cancelButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancelButton,this),t.Application.closeWindow(this),this.cancelHandler&&this.cancelHandler.apply(this.thisObject)},i.init=function(t){this.skinName=t},i.show=function(e,i,n,s,o,r){for(var a=t.WindowManager.getInstance().windowList,h=0;h<a.length;h++)if(a[h]instanceof t.Dialog){var l=a[h];if(l.messageLabel.text==e)return l}o=o||t.Dialog.titleString,this.skinName||warn("Dialog弹窗未初始化，将不会被显示，请先调用uiCore.Dialog.init()。");var l=new t.Dialog(e,o,r,i,n,s);return t.Application.addWindow(l),l},i}(t.Window);t.Dialog=e,__reflect(e.prototype,"uiCore.Dialog")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){this.fontFamily="微软雅黑"},e}(eui.EditableText);t.EditableText=e,__reflect(e.prototype,"uiCore.EditableText")}(uiCore||(uiCore={}));var HttpContractType=function(){function t(){}return t.FAST_LOGIN=1004,t.OpenControl=1101,t.ModifyPassword=1112,t.GetKeyConfig=1134,t.GetServiceCustomer=1121,t.RequireGoodsList=1103,t}();__reflect(HttpContractType.prototype,"HttpContractType");var uiCore;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){this.fontFamily="微软雅黑"},e}(eui.Label);t.Label=e,__reflect(e.prototype,"uiCore.Label")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(e){function i(n){void 0===n&&(n=!1);var s=e.call(this)||this;return s.skinName=i.skinName,s.restConnect.text=t.LangUtils.getMsgById(24),s.left=s.right=s.top=s.bottom=0,s.progressTxt.text="",n?s.restConnect.visible=!0:s.restConnect.visible=!1,s}return __extends(i,e),i.init=function(t){this.skinName=t},i.prototype.onLoaddingProgress=function(t){this.progressTxt.text=t+"%"},i}(t.Window);t.Loadding=e,__reflect(e.prototype,"uiCore.Loadding")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.timeoutId=-1,e.tick=0,e.autoPlay=!1,e.timeGap=300,e}return __extends(e,t),e.prototype.start=function(){this.totalTick=this.looperGroup.numChildren+1,this.autoPlay&&this.play()},e.prototype.play=function(){var t=this;this.visible=!0;var e;-1!=this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){clearTimeout(t.timeoutId),t.timeoutId=-1,0===t.tick?(t.stop(),t.tick++,t.play()):t.tick===t.totalTick?(t.tick=0,t.play()):(e=t.looperGroup.getChildAt(t.tick-1),e.visible=!0,t.tick++,t.play())},this.timeGap)},e.prototype.stop=function(){this.visible=!1,clearTimeout(this.timeoutId),this.timeoutId=-1;for(var t=0;t<this.totalTick-1;t++)this.looperGroup.getChildAt(t).visible=!1},e.prototype.onDestroy=function(){clearTimeout(this.timeoutId)},e}(t.View);t.Looper=e,__reflect(e.prototype,"uiCore.Looper")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.rate=200,e.scrollerSpeed=500,e.boundSpeed=300,e.isScrolling=!1,e.throwSpeed=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDestroy,this),this.addEventListener(eui.UIEvent.CHANGE_START,this.touchBegin,this),this.addEventListener(eui.UIEvent.CHANGE_END,this.touchEnd,this),this.group=this.getChildAt(0),this.isLand=egret.is(this.group.layout,"eui.VerticalLayout")?"scrollV":"scrollH",this.start()},e.prototype.touchBegin=function(t){this.isScrolling||(this.scrollerCount=Math.floor(this.viewport[this.isLand]/this.width),this.beginPoint=this.viewport[this.isLand])},e.prototype.touchEnd=function(t){this.isScrolling||(this.endPoint=this.viewport[this.isLand],this.onMove())},e.prototype.onMove=function(){this.touchEnabled=!1,Math.abs(this.endPoint-this.beginPoint)>=this.rate?(this.endPoint-this.beginPoint>0?(this.scrollerCount++,this.scrollerCount=this.scrollerCount>=this.group.numChildren?this.group.numChildren-1:this.scrollerCount):(this.scrollerCount--,this.scrollerCount=this.scrollerCount<0?0:this.scrollerCount),egret.Tween.get(this.viewport).to((t={},t[this.isLand]=this.width*this.scrollerCount,t),this.scrollerSpeed).call(this._scrollerend,this,[!0]),this.isScrolling=!0):(egret.Tween.get(this.viewport).to((e={},e[this.isLand]=this.width*this.scrollerCount,e),this.boundSpeed).call(this._scrollerend,this,[!1]),this.isScrolling=!0);var t,e},e.prototype.onDestroy=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDestroy,this),this.removeEventListener(eui.UIEvent.CHANGE_START,this.touchBegin,this),this.removeEventListener(eui.UIEvent.CHANGE_END,this.touchEnd,this),this.end()},e.prototype._scrollerend=function(t){this.touchEnabled=!0,this.isScrolling=!1,this.scrollerEnd(t)},e.prototype.scrollerEnd=function(t){},e.prototype.start=function(){},e.prototype.end=function(){},e}(eui.Scroller);t.PageView=e,__reflect(e.prototype,"uiCore.PageView")}(uiCore||(uiCore={}));var PingTip=function(t){function e(){var e=t.call(this)||this;return e.localTime=0,e.colors=["0xa6aaaf","0xf00000","0xc46a39","0xc6c05e","0x30ca4f","0x28fb47"],e.skinName="PingTipSkin",e}return __extends(e,t),e.prototype.start=function(){this.PingChange(e.ping),this.pingImage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPingtBtn,this),this.localTime=egret.getTimer(),this.pingLable.text=uiCore.LangUtils.getMsgById(20)+" 3500ms"},e.prototype.dataChanged=function(){},e.prototype.setSelect=function(t){},e.prototype.PingChange=function(t){0>t?(this.pingImage.source="lv0",this.pingLable.text=uiCore.LangUtils.getMsgById(19),this.pingLable.textColor=this.colors[0]):(100>t?(this.pingImage.source="lv5",this.pingLable.textColor=this.colors[5]):200>t?(this.pingImage.source="lv4",this.pingLable.textColor=this.colors[4]):500>t?(this.pingImage.source="lv3",this.pingLable.textColor=this.colors[3]):1e3>t?(this.pingImage.source="lv2",this.pingLable.textColor=this.colors[2]):3e3>t?(this.pingImage.source="lv1",this.pingLable.textColor=this.colors[1]):(this.pingImage.source="lv1",this.pingLable.textColor=this.colors[1]),this.pingLable.text=uiCore.LangUtils.getMsgById(20)+" "+t+"ms"),e.ping=t},e.prototype.onPingtBtn=function(){},e.ping=0,e}(uiCore.ItemView);__reflect(PingTip.prototype,"PingTip");var uiCore;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.ENTER_FRAME,e.onEnterFrame,e),e}return __extends(e,t),e.prototype.updateIcon=function(){var t=this.data?this.data.icon:null;t&&this.iconDisplay&&(this.iconDisplay.source=this.selected?t.split(",")[1]:t.split(",")[0])},e.prototype.onEnterFrame=function(t){this.updateIcon()},e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this),this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},e}(eui.ItemRenderer);t.TabBarButtonItemRenderer=e,__reflect(e.prototype,"uiCore.TabBarButtonItemRenderer")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){},e}(eui.TextInput);t.TextInput=e,__reflect(e.prototype,"uiCore.TextInput")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(){function e(){}return Object.defineProperty(e,"app",{get:function(){return this._app},enumerable:!0,configurable:!0}),e.cacheSceneAsBitmap=function(t){void 0===t&&(t=!1),this._guiLayer.cacheAsBitmap=t},Object.defineProperty(e,"APPEVENT_RIGHTCLICK",{get:function(){return"app_rightclick"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"APPEVENT_EXIT",{get:function(){return"app_exit"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"APPEVENT_BACK",{get:function(){return"app_back"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"APPEVENT_RESUME",{get:function(){return"app_resume"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"APPEVENT_PAUSE",{get:function(){return"app_pause"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"APPEVENT_RESIZE",{get:function(){return"app_resize"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"APPEVENT_WINDOW_OPEN",{get:function(){return"app_window_open"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"APPEVENT_WINDOW_CLOSE",{get:function(){return"app_window_close"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CHANGESCENE",{get:function(){return"app_changeScene"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"currentScene",{get:function(){return this._currentScene},enumerable:!0,configurable:!0}),Object.defineProperty(e,"loadClass",{get:function(){return this._loadClass},enumerable:!0,configurable:!0}),e.init=function(e,i){return void 0===i&&(i=null),this._loadClass=i,this._app=e,this._guiLayer=this.createLayer(),this._guiLayer.percentWidth=this._guiLayer.percentHeight=100,this._windowLayer=this.createLayer(),this._windowLayer.percentWidth=this._windowLayer.percentHeight=100,this._windowLayer.touchEnabled=!1,t.WindowManager.getInstance().init(this._windowLayer),t.ExternalInterfaceUtils.init(),this.setfishPathMultiple(),e.stage.addEventListener(egret.Event.RESIZE,this.onStageResize,this),this._guiLayer},e.setfishPathMultiple=function(){this.fishPathXmultiple=this._app.stage.stageWidth/1220,this.fishPathYmultiple=this._app.stage.stageHeight/600},e.setbulletSuDu=function(){this.bulletSuDu=Math.sqrt(this._app.stage.stageWidth*this._app.stage.stageWidth+this._app.stage.stageHeight*this._app.stage.stageHeight)/60*(0==FishGameManager.deltaTime?1:FishGameManager.deltaTime/15)},e.changeScene=function(e){this.assetAdapter.stopLoadRes();var i=new t.ResourceLoader;i.loadGroups(e.resourceList,this.onResourceComplete,this,e)},e.onResourceComplete=function(t){this._currentScene?this._guiLayer.removeChild(this._currentScene):this.app.removeLoadding(),this.removeLoadding(),this.assetAdapter.startLoadRes(),this._currentScene=t,t.isLoaded=!0,this._guiLayer.addChild(t)},e.createLayer=function(){var t=new eui.Group;return t.width=this._app.stage.stageWidth,t.height=this._app.stage.stageHeight,t.left=t.right=t.top=t.bottom=0,this._app.addChild(t),t},e.openWindow=function(e,i,n,s,o){void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===s&&(s=!0),void 0===o&&(o=!0);var r=new e;return t.WindowManager.getInstance().addWindow(r,i,n,s,o),r},e.addWindow=function(e,i,n,s,o){void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===s&&(s=!0),void 0===o&&(o=!0),t.WindowManager.getInstance().addWindow(e,i,n,s,o)},e.addLoadding=function(t){return void 0===t&&(t=!1),this.removeLoadding(),this.loadUI=new e.loadClass(t),this.addWindow(this.loadUI,!1,!0,!1,!1),this.loadUI},e.removeLoadding=function(){this.loadUI&&this.loadUI.parent&&this.closeWindow(this.loadUI)},e.closeWindow=function(e){t.WindowManager.getInstance().closeWindow(e)},e.onStageResize=function(e){t.WindowManager.getInstance().updateBg(),this.setfishPathMultiple(),FishGameController.getGameView()&&FishGameController.getGameView().shuangciGroup&&(FishGameController.getGameView().shuangciGroup.getDragonBonesEgret.scaleX=this._app.stage.stageWidth/(FishGameController.getGameView().shuangciGroup.getDragonBonesEgret.width-600),FishGameController.getGameView().shuangciGroup.getDragonBonesEgret.scaleY=this._app.stage.stageHeight/FishGameController.getGameView().shuangciGroup.getDragonBonesEgret.height,FishGameController.getGameView().waterLightResize(),FishGameController.getGameView().fishGenResize())},e.closeLoaddingTip=function(e){void 0===e&&(e=t.LangUtils.getMsgById(1)),SceneManager.tryTimer.running||this.loadUI&&this.loadUI.parent&&(this.closeWindow(this.loadUI),t.Alert.show(e),this.closeSetTime())},e.addSetTimeCloseLoaddingTip=function(){null==this.timeOutIndex&&!SceneManager.tryTimer.running&&this.loadUI&&this.loadUI.parent&&(this.timeOutIndex=egret.setTimeout(function(){this.timeOutIndex=null,this.closeLoaddingTip()},this,2e4))},e.closeSetTime=function(){null!=this.timeOutIndex&&(egret.clearTimeout(this.timeOutIndex),this.timeOutIndex=null)},e.openGameTips=function(){this.closeGameSetTime(),t.Alert.show(t.LangUtils.getMsgById(15),function(){FishGameController.sendQuitDesk()})},e.addGameSetTime=function(){null==this.gameTimeOutIndex&&(this.gameTimeOutIndex=egret.setTimeout(function(){this.gameTimeOutIndex=null,FishGameController.isOnLine()||this.openGameTips()},this,2e4))},e.closeGameSetTime=function(){null!=this.gameTimeOutIndex&&(egret.clearTimeout(this.gameTimeOutIndex),this.gameTimeOutIndex=null)},e.addGameOutTime=function(){null==this.gameOutIndex&&(this.gameOutIndex=egret.setTimeout(function(){this.gameOutIndex=null,this.showGameOut()},this,2e4))},e.showGameOut=function(){this.hideGameOut(),t.Alert.show(t.LangUtils.getMsgById(18),function(){FishGameController.sendQuitDesk()})},e.hideGameOut=function(){null!=this.gameOutIndex&&(egret.clearTimeout(this.gameOutIndex),this.gameOutIndex=null)},e.vibrationScreen=function(){this.vibrationScreenAbled&&(this._app.removeEventListener(egret.Event.ENTER_FRAME,this.onSceneEnterFrame,this),this.i=0,this._app.addEventListener(egret.Event.ENTER_FRAME,this.onSceneEnterFrame,this))},e.onSceneEnterFrame=function(){this.i<this.vibrationArrayY.length?(this._app.y=this.vibrationArrayY[this.i],this._app.x=this.vibrationArrayX[this.i]):(this._app.removeEventListener(egret.Event.ENTER_FRAME,this.onSceneEnterFrame,this),this.i=0),this.i++},e.fishPathXmultiple=1,e.fishPathYmultiple=1,e.bulletSuDu=30,e.currGameId=30300601,e.lockminfish=0,e.vibrationScreenAbled=!0,e.vibrationArrayY=[-8,8,-6,6,-4,4,-2,2,0],e.vibrationArrayX=[-5,7,-3,9,-2,3,-1,1,0],e.i=0,e}();t.Application=e,__reflect(e.prototype,"uiCore.Application")}(uiCore||(uiCore={}));var Data;!function(t){t.IdMsgData=[{id:1,msgId:"1",msg:"Operasi kali ini gagal, silakan coba sebentar lagi!"},{id:2,msgId:"2",msg:"Sedang memasuki game, harap tunggu......\ngunakan Google Chrome bermain game, untuk mendapatkan pengalaman yang lebih baik!"},{id:3,msgId:"3",msg:"Sedang memuat data game,"},{id:4,msgId:"4",msg:"Salinan berhasil"},{id:5,msgId:"5",msg:"Stasiun"},{id:6,msgId:"6",msg:"Demi memastikan keadilan dan kejujuran semua pemain di platform ini, koin emas yang berpartisipasi dalam top up event tidak dapat digunakan untuk bertaruh dalam game. Harap dimaklumi."},{id:7,msgId:"7",msg:"Koin emas tidak cukup!"},{id:8,msgId:"8",msg:"Basic"},{id:9,msgId:"9",msg:"Intermediate"},{id:10,msgId:"10",msg:"Advanced"},{id:11,msgId:"11",msg:"Login gagal!"},{id:12,msgId:"12",msg:"Karena tidak ada operasi untuk waktu yang lama, masih ada {0} detik untuk keluar dari game."},{id:13,msgId:"13",msg:"Server koneksi error"},{id:14,msgId:"14",msg:"Password salah"},{id:15,msgId:"15",msg:"Game gagal didownload, silakan login ulang!"},{id:16,msgId:"16",msg:"Sedang menarik informasi game, harap tunggu sebentar"},{id:17,msgId:"17",msg:"ID ini login di lokasi lain, silakan ubah ID dan login lagi!"},{id:18,msgId:"18",msg:"Gagal keluar dari game, silakan keluar ulang!"},{id:19,msgId:"19",msg:"Tidak ada jaringan"},{id:20,msgId:"20",msg:"Delay"},{id:21,msgId:"21",msg:"Konfirmasi"},{id:22,msgId:"22",msg:"Cancel"},{id:23,msgId:"23",msg:"LoginCepat"},{id:24,msgId:"24",msg:"Jaringan error, mencoba koneksi ulang"},{id:25,msgId:"25",msg:"Koneksi jaringan gagal"},{id:26,msgId:"26",msg:"登录失败，请重新登陆！"}]}(Data||(Data={}));var useConsoleLog=LibCore.GameConfig.useConsoleLog,uiCore;!function(t){var e=function(){function e(){}return e.setDragonBoneMap=function(t,e){this.DragonBoneFactoryMap[t]=e},e.init=function(t){if(t)for(var e=0;e<t.length;e++)this.setDbFactory(t[e])},e.setDbFactory=function(e){t.ZipManager.getDragonBoneJsonMap(e+"_ske")&&t.ZipManager.getDragonBoneJsonMap(e+"_tex")&&(this.DragonBoneFactoryMap[e]||this.dragonBoneLoading(e))},e.dragonBoneLoading=function(e){var i=RES.getRes(e+"_tex_png");if(i){var n=dragonBones.EgretFactory.factory;n.parseDragonBonesData(t.ZipManager.getDragonBoneJsonMap(e+"_ske")),n.parseTextureAtlasData(t.ZipManager.getDragonBoneJsonMap(e+"_tex"),i),this.DragonBoneFactoryMap[e]=n}else RES.getResAsync(e+"_tex_png",this.checkDragonBoneMap,this)},e.checkDragonBoneMap=function(t,e){e=e.substr(0,e.lastIndexOf("_")).substr(0,e.lastIndexOf("_")),this.dragonBoneLoading(e)},e.getGenerateDragonBoneData=function(t){for(var e in this.DragonBoneFactoryMap){var i=this.DragonBoneFactoryMap[e].buildArmatureDisplay(t);if(i)return this.DragonBoneObjectManager(i),i}return null},e.DragonBoneObjectManager=function(t){t.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this)},e.onRemoved=function(t){var e=t.currentTarget;e.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this),e.animation.isPlaying&&e.animation.stop()},e.DragonBoneFactoryMap={},e}();t.DragonBoneManager=e,__reflect(e.prototype,"uiCore.DragonBoneManager")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(){function t(){this.dispatcher=new egret.EventDispatcher}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.dispatch=function(t){return this.dispatcher.dispatchEvent(t)},t.prototype.dispatchEvent=function(t,e){return void 0===e&&(e=null),this.dispatcher.dispatchEventWith(t,!1,e)},t.prototype.addEventListener=function(t,e,i){this.dispatcher.addEventListener(t,e,i)},t.prototype.on=function(t,e,i){this.addEventListener(t,e,i)},t.prototype.once=function(t,e,i){this.dispatcher.once(t,e,i)},t.prototype.off=function(t,e,i){this.removeEventListener(t,e,i)},t.prototype.removeEventListener=function(t,e,i){this.dispatcher.removeEventListener(t,e,i)},t}();t.EventManager=e,__reflect(e.prototype,"uiCore.EventManager")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(){function e(){}return e.init=function(){egret.Capabilities.runtimeType==egret.RuntimeType.WEB?document.addEventListener("visibilitychange",function(){document.hidden?e.onPause():e.onResume()}):egret.Capabilities.isMobile&&(egret.lifecycle.onPause=function(){e.onPause()},egret.lifecycle.onResume=function(){e.onResume()})},e.onResume=function(){this.inGame=!0,t.EventManager.getInstance().dispatchEvent(t.Application.APPEVENT_RESUME)},e.onPause=function(){this.inGame=!1,t.EventManager.getInstance().dispatchEvent(t.Application.APPEVENT_PAUSE)},e.inGame=!0,e}();t.ExternalInterfaceUtils=e,__reflect(e.prototype,"uiCore.ExternalInterfaceUtils")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(){function e(){this.loadList={}}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.send=function(t,e,i,n,s,o,r){void 0===r&&(r=!0),e=e||{},i=i||egret.URLRequestMethod.GET;var a=this.dataToString(e),h=t+"?"+this.dataToString(e);if(!this.loadList[h]){var l=new egret.URLLoader;l.dataFormat=egret.URLLoaderDataFormat.TEXT;var u=new egret.URLRequest(t);u.method=i;var c=new egret.URLVariables(a);c.variables=e,u.data=c,l.addEventListener(egret.Event.COMPLETE,this.onComplete,this),l.addEventListener(egret.HTTPStatusEvent.HTTP_STATUS,this.onHTTPStatus,this),l.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this);var p={urlLoader:l,sucessFunc:n,errorFunc:s,thisObject:o,isJson:r};this.loadList[h]=p,l.load(u)}},e.prototype.cancel=function(t,e){e=e||{};var i=t+this.dataToString(e);if(this.loadList[i]){this.loadList[i].urlLoader;delete this.loadList[i]}},e.prototype.cancelThis=function(e){for(var i in e){var n=this.getKeyByCallBack(e[i]);t.Utils.isFunction(e[i])&&n&&delete this.loadList[n]}},e.prototype.getKeyByCallBack=function(t){for(var e in this.loadList){var i=this.loadList[e];if(i.sucessFunc==t||i.errorFunc==t)return e}return null},e.prototype.cancelAll=function(){this.loadList={}},e.prototype.onComplete=function(t){var e=t.currentTarget;for(var i in this.loadList)if(this.loadList[i].urlLoader==e){var n=this.loadList[i].sucessFunc;n.call(this.loadList[i].thisObject,this.loadList[i].isJson?JSON.parse(e.data):e.data),delete this.loadList[i]}},e.prototype.onIOError=function(t){this.loadError(t.currentTarget,t)},e.prototype.onHTTPStatus=function(t){200!=t.status&&this.loadError(t.currentTarget,t.status)},e.prototype.loadError=function(t,e){for(var i in this.loadList)if(this.loadList[i].urlLoader==t){var n=this.loadList[i].errorFunc;n&&n.call(this.loadList[i].thisObject,e),delete this.loadList[i]}},e.prototype.dataToString=function(t){var e="";for(var i in t)e+=encodeURI(i)+"="+encodeURI(t[i])+"&";return e},e}();t.HttpManager=e,__reflect(e.prototype,"uiCore.HttpManager")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(){function e(){}return e.setMovieClipMap=function(t,e){this.MovieClipFactoryMap[t]=e},e.init=function(t){if(t)for(var e=0;e<t.length;e++)this.setMcFactory(t[e])},e.setMcFactory=function(e){t.ZipManager.getMovieClipJsonMap(e)&&(this.MovieClipFactoryMap[e]||this.movieClipLoading(e))},e.movieClipLoading=function(e){var i=RES.getRes(e+"_png");i?this.MovieClipFactoryMap[e]=new egret.MovieClipDataFactory(t.ZipManager.getMovieClipJsonMap(e),i):RES.getResAsync(e+"_png",this.checkMovieClipMap,this)},e.checkMovieClipMap=function(t,e){e=e.substr(0,e.lastIndexOf("_")),this.movieClipLoading(e)},e.getGenerateMovieClipData=function(t){for(var e in this.MovieClipFactoryMap){var i=this.MovieClipFactoryMap[e].generateMovieClipData(t);if(i&&i.mcData){var n=new egret.MovieClip(i);return this.MovieClipObjectManager(n),n}}return null},e.MovieClipObjectManager=function(t){t.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this)},e.onRemoved=function(t){var e=t.currentTarget;e.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this),e.isPlaying&&e.stop()},e.MovieClipFactoryMap={},e}();t.MovieClipManager=e,__reflect(e.prototype,"uiCore.MovieClipManager")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(){function e(){}return e.setParticleMap=function(t,e){this.ParticleImageMap[t]=e},e.init=function(t){if(t)for(var e in t)this.setParticleImageMap(t[e])},e.setParticleImageMap=function(e){t.ZipManager.getParticleJsonMap(e)&&(this.ParticleImageMap[e]||this.particleImageLoading(e))},e.particleImageLoading=function(t){if(RES.hasRes(t)){var e=RES.getRes(t);e?this.ParticleImageMap[t]=e:RES.getResAsync(t,this.checkParticleImageMap,this)}},e.checkParticleImageMap=function(t,e){this.particleImageLoading(e)},e.getParticleSystem=function(e){var i=t.ZipManager.getParticleJsonMap(e),n=this.ParticleImageMap[e];if(n||(n=t.ZipManager.getSubkeyImageMap(e)),i&&n){var s=new particle.GravityParticleSystem(n,i);return this.ParticleSystemObjectManager(s),s}return null},e.ParticleSystemObjectManager=function(t){t.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this)},e.onRemoved=function(t){var e=t.currentTarget;e.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this),e.stop(!0)},e.ParticleImageMap={},e}();t.ParticleManager=e,__reflect(e.prototype,"uiCore.ParticleManager")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(){function e(){}return e.init=function(t){this.sprotoCreateNew(t)},e.sprotoCreateNew=function(t){var i=this,n=RES.getRes(t);n?JSZip.loadAsync(n).then(function(t){t.file("protocol.spb").async("array").then(function(t){e.spObject=sproto.createNew(t),i.initReturnCallFunMap()})}):RES.getResAsync(t,this.checkSprotoCreateNew,this)},e.checkSprotoCreateNew=function(t,e){this.sprotoCreateNew(e)},e.initReturnCallFunMap=function(){this.returnCallFunMap={},this.addReturnCallFunMap(HallSocketType.LOGIN,this.callLogin),this.addReturnCallFunMap(HallSocketType.KICK_OUT,this.callKickOut),this.addReturnCallFunMap(HallSocketType.OutForServer,this.callOutForServer),this.addReturnCallFunMap(HallSocketType.LoginHall,this.callLoginHall),this.addReturnCallFunMap(HallSocketType.UserInfo,this.callUserInfo),this.addReturnCallFunMap(HallSocketType.LoginGame,this.callLoginGame),this.addReturnCallFunMap(HallSocketType.ExitGame,this.callExitGame),this.addReturnCallFunMap(HallSocketType.UpdateSystemMsg,this.callUpdateSystemMsg),this.addReturnCallFunMap(HallSocketType.UpdateDataCMD,this.callUpdateDataCMD),this.addReturnCallFunMap(HallSocketType.UpDownGoldState,this.callUpDownGoldState),this.addReturnCallFunMap(HallSocketType.UpDownGold,this.callUpDownGold),this.addReturnCallFunMap(HallSocketType.GameBank,this.callGameBank),this.addReturnCallFunMap(HallSocketType.UpDownGoldCancel,this.callUpDownGoldCancel),this.addReturnCallFunMap(HallSocketType.InMailMessage,this.callInMailMessage),this.addReturnCallFunMap(HallSocketType.InFormMessage,this.callInFormMessage),this.addReturnCallFunMap(HallSocketType.InMailTrueMessage,this.callInMailTrueMessage),this.addReturnCallFunMap(HallSocketType.MissionMessage,this.callMissionMessage),this.addReturnCallFunMap(HallSocketType.LimitMessage,this.callLimitMessage),this.addReturnCallFunMap(HallSocketType.TipsMessage,this.callTipsMessage),this.addReturnCallFunMap(HallSocketType.FishActivityMessage,this.callFishActivityMessage),this.addReturnCallFunMap(HallSocketType.HEARDBEAT,this.callHeardbeat),this.addReturnCallFunMap(FishGameContractType.DESK_LIST,this.callDeskList),this.addReturnCallFunMap(FishGameContractType.LOGIJOIN_DESKN,this.callLogijoinDeskn),this.addReturnCallFunMap(FishGameContractType.QUIT_DESK,this.callQuitDesk),this.addReturnCallFunMap(FishGameContractType.ROBOT_AGENT,this.callRobotAgent),this.addReturnCallFunMap(FishGameContractType.CREATE_BULLET,this.callCreateBullet),this.addReturnCallFunMap(FishGameContractType.FISH_GAME_SETTING,this.callFishGameSetting),this.addReturnCallFunMap(FishGameContractType.CANNON,this.callCannon),this.addReturnCallFunMap(FishGameContractType.LOCK_FISH,this.callLockFish),this.addReturnCallFunMap(FishGameContractType.BOMB_FISH,this.callBombFish),this.addReturnCallFunMap(FishGameContractType.CREATE_FISH,this.callCreateFish),this.addReturnCallFunMap(FishGameContractType.BOSS_EAT_FISH,this.callBossEatFish),this.addReturnCallFunMap(FishGameContractType.CATCH_FISH,this.callCatchFish),this.addReturnCallFunMap(FishGameContractType.CATCH_FISH_RECORD,this.callCatchFishRecord),this.addReturnCallFunMap(FishGameContractType.CREATE_FISH_ARRAY,this.callCreateFishArray)},e.addReturnCallFunMap=function(t,e){this.returnCallFunMap[t]||(this.returnCallFunMap[t]=e)},e.getReturnCallFunMap=function(t){return this.returnCallFunMap[t]?this.returnCallFunMap[t]:null},e.callLogin=function(t){},e.callKickOut=function(e){Net.GameService.instance.socketSvc.disconnect(),t.Alert.show(t.LangUtils.getMsgById(17),function(){t.Utils.reloadPage()})},e.callOutForServer=function(t){t&&FishGameController.onOutForServer(t)},e.callLoginHall=function(e){if(Heardbeat.getInstance().begin(),1==e.LoginResultType){(null==SceneManager.gameOpenControl||t.Utils.checkNullObj(SceneManager.gameOpenControl)||null==SceneManager.OpenControl||0==SceneManager.OpenControl.length)&&SceneManager.OpenControl();var i=GameData.getInstance().userData("position");i||(i=1),1!=i&&((new RoomSceneView).JoinRoom(DeskController.RoomInfo,DeskController.RoomIdx),t.Application.addGameSetTime()),SceneManager.isNeetReconnect()}else if(9==e.LoginResultType)t.Alert.show(t.LangUtils.getMsgById(26));else{var n=GameData.getInstance().userData("UserType");null!=n&&3==n?t.Utils.reloadPage():net.RestConnect.RestConnectHttp()}},e.callHeardbeat=function(t){Heardbeat.ws_onHeartbeat()},e.callUserInfo=function(t){t.UserID&&GameData.getInstance().setUserData("userId",t.UserID),t.NickName&&GameData.getInstance().setUserData("nickname",t.NickName),t.MoneyA>=0&&GameData.getInstance().setUserData("moneya",t.MoneyA),t.MoneyB>=0&&GameData.getInstance().setUserData("moneyb",t.MoneyB),t.BankMoneyA>=0&&GameData.getInstance().setUserData("bankmoneya",t.BankMoneyA),t.BankMoneyB>=0&&GameData.getInstance().setUserData("bankmoneyb",t.BankMoneyB),t.UserType>=0&&GameData.getInstance().setUserData("UserType",t.UserType),(t.BankMoneyA>=0||t.BankMoneyB>=0)&&GameData.getInstance().setUserData("bankgoldnum",t.BankMoneyA+t.BankMoneyB),(t.MoneyA>=0||t.MoneyB>=0)&&(GameData.getInstance().setUserData("gold_num",t.MoneyA+t.MoneyB),SceneManager.UserDataChange(),FishGameController.isLoadFishGameRoot&&FishGameController.gameView&&FishGameController.gameView.thisFishGen&&FishGameController.gameView.thisFishGen.setGoldNum(Number(t.MoneyA+t.MoneyB)))},e.callLoginGame=function(e){e?FishGameController.onLogin(e):t.Application.closeLoaddingTip()},e.callExitGame=function(t){},e.callUpdateSystemMsg=function(t){t&&SystemMsg.ws_onSystemMsg(t.Msgs)},e.callUpdateDataCMD=function(t){},e.callUpDownGoldState=function(t){},e.callUpDownGold=function(t){},e.callGameBank=function(t){},e.callUpDownGoldCancel=function(t){},e.callInMailMessage=function(t){},e.callInFormMessage=function(t){},e.callInMailTrueMessage=function(t){},e.callMissionMessage=function(t){},e.callLimitMessage=function(t){},e.callFishActivityMessage=function(t){},e.callDeskList=function(e){e&&e.ListDeskContract.length>0?(t.Application.hideGameOut(),DeskController.ws_onDeskList(e)):null!=t.Application.gameOutIndex?t.Application.showGameOut():t.Application.closeLoaddingTip()},e.callLogijoinDeskn=function(e){e?DeskController.ws_onSomeoneJoinDesk(e):FishGameController.isOnGame?t.Application.openGameTips():t.Application.closeLoaddingTip()},e.callQuitDesk=function(t){t&&(DeskController.ws_onSomeoneLeaveDesk(t),FishGameController.onQuitDesk(t))},e.callRobotAgent=function(t){t&&FishGameController.onRobotAgent(t)},e.callCreateBullet=function(e){e&&t.ExternalInterfaceUtils.inGame&&FishGameController.onCreateBullet(e)},e.callFishGameSetting=function(e){e?FishGameController.onFishGameSetting(e):t.Application.openGameTips()},e.callCannon=function(t){t&&FishGameController.onCannon(t)},e.callLockFish=function(e){e&&t.ExternalInterfaceUtils.inGame&&FishGameController.onLockFish(e)},e.callBombFish=function(e){e&&t.ExternalInterfaceUtils.inGame&&FishGameController.onBombFish(e)},e.callTipsMessage=function(t){},e.callCreateFish=function(e){e&&t.ExternalInterfaceUtils.inGame&&FishGameController.onCreateFish(e)},e.callBossEatFish=function(t){},e.callCatchFish=function(t){t&&FishGameController.onCatchFish(t)},e.callCatchFishRecord=function(t){t&&FishGameController.getGameView()&&FishGameController.getGameView().jiesuanView.getCathFishNum(t)},e.callCreateFishArray=function(e){e&&t.ExternalInterfaceUtils.inGame&&FishGameController.onCreateFishArray(e)},e}();t.ProtobufManager=e,__reflect(e.prototype,"uiCore.ProtobufManager")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.totalNumber=1,t.currentNumber=0,t.groupNumber=1,t.currentGroup=0,t.currentGroupName="",t}return __extends(i,e),i.prototype.loadGroups=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];this.groups=t,this.onComplete=e,this.thisObject=i,this.args=n,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.currentGroup=0,this.groupNumber=0==t.length?1:t.length,this.loadGroup()},i.prototype.loadGroup=function(){if(this.groups&&this.groups.length>0){var t=this.groups.shift();RES.isGroupLoaded(t)?this.loadGroup():RES.loadGroup(t,100)
}else RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.onAllGroupComplete()},i.prototype.onResourceLoadError=function(t){this.onResourceLoadComplete(t),this.dispatchEvent(t)},i.prototype.onResourceProgress=function(e){e.resItem.name.lastIndexOf("_zip")>=0&&t.ZipManager.zipResourceProgress(e.resItem.name),this.currentGroupName!=e.groupName&&(this.currentNumber=this.totalNumber,this.totalNumber+=e.itemsTotal,this.currentGroupName=e.groupName,this.currentGroup++,this.currentGroup=this.currentGroup>this.groupNumber?this.groupNumber:this.currentGroup);var i=(e.itemsLoaded+this.currentNumber)*this.currentGroup*100/(this.totalNumber*this.groupNumber);t.Application.loadUI&&t.Application.loadUI.onLoaddingProgress&&t.Application.loadUI.onLoaddingProgress(Math.ceil(i))},i.prototype.onResourceLoadComplete=function(t){trace("资源["+t.groupName+"]:加载完成"),this.dispatchEvent(t),this.loadGroup()},i.prototype.onAllGroupComplete=function(){this.onComplete&&this.onComplete.apply(this.thisObject,this.args),this.dispatchEventWith(egret.Event.COMPLETE),this.onComplete=null,this.thisObject=null,this.args=null,this.groups=null},i.prototype.destroy=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this)},i}(egret.EventDispatcher);t.ResourceLoader=e,__reflect(e.prototype,"uiCore.ResourceLoader")}(uiCore||(uiCore={}));var Data;!function(t){t.ThMsgData=[{id:1,msgId:"1",msg:"การดำเนินการล้มเหลว โปรดลองใหม่ภายหลัง!"},{id:2,msgId:"2",msg:"กำลังเข้าสู่ระบบเกม โปรดรอสักครู่......\nใช้กูเกิลโครมเล่นเกม จะได้รับประสบการณ์การเล่นเกมที่ดียิ่งขึ้นนะ!"},{id:3,msgId:"3",msg:"กำลังโหลดทรัพยากรเกม,"},{id:4,msgId:"4",msg:"คัดลอกสำเร็จ"},{id:5,msgId:"5",msg:"รหัส"},{id:6,msgId:"6",msg:"เพื่อรักษาความยุติธรรมในการเล่นเกมของผู้เล่นทุกคน เหรียญทองที่เติมในกิจกรรมจะไม่สามารถใช้เดิมพันในเกมนี้ได้ ขอให้ท่านโปรดเข้าใจ"},{id:7,msgId:"7",msg:"เหรียญทองไม่พอ!"},{id:8,msgId:"8",msg:"ระดับต้น"},{id:9,msgId:"9",msg:"ระดับกลาง"},{id:10,msgId:"10",msg:"ระดับสูง"},{id:11,msgId:"11",msg:"การเข้าสู่ระบบล้มเหลว!"},{id:12,msgId:"12",msg:"จะออกจากเกมในอีก {0} วินาที เนื่องจากไม่มีการเคลื่อนไหวเป็นเวลานาน "},{id:13,msgId:"13",msg:"การเชื่อมต่อเซิร์ฟเวอร์ผิดพลาด"},{id:14,msgId:"14",msg:"รหัสผ่านผิดพลาด"},{id:15,msgId:"15",msg:"การโหลดเกมล้มเหลว โปรดเข้าสู่เกมอีกครั้ง!"},{id:16,msgId:"16",msg:"กำลังกู้ข้อมูลเกม โปรดรอสักครู่"},{id:17,msgId:"17",msg:"บัญชีนี้ได้เข้าสู่ระบบที่อื่นแล้ว กรุณาเปลี่ยนบัญชีและเข้าสู่ระบบใหม่อีกครั้ง!"},{id:18,msgId:"18",msg:"การออกจากเกมล้มเหลว โปรดออกจากระบบอีกครั้ง!"},{id:19,msgId:"19",msg:"ไม่มีอินเทอร์เน็ต"},{id:20,msgId:"20",msg:"ล่าช้า"},{id:21,msgId:"21",msg:"ตกลง"},{id:22,msgId:"22",msg:"ยกเลิก"},{id:23,msgId:"23",msg:"เข้าสู่ระบบด่วน"},{id:24,msgId:"24",msg:"อินเทอร์เน็ตผิดปกติ กำลังเชื่อมต่อใหม่อีกครั้ง"},{id:25,msgId:"25",msg:"การเชื่อมต่อเครือข่ายล้มเหลว!"},{id:26,msgId:"26",msg:"登录失败，请重新登陆！"}]}(Data||(Data={}));var uiCore;!function(t){var e=function(){function e(){}return e.setVolumes=function(e,i){void 0===e&&(e=2);for(var n in this.SoundArray)(2==e||this.SoundArray[n].getSoundType==e)&&this.SoundArray[n].music.volume(null==i?t.Utils.getLocalStorageItem(0==this.SoundArray[n].getSoundType?this.FISH_MUSIC_VALUE:this.FISH_SOUND_VALUE,"Number"):i)},e.onAppPause=function(){this.setVolumes(2,0)},e.onAppResume=function(){this.setVolumes()},e.stopMusic=function(){this.currMusic&&this.currMusic.music.pause()},e.stopEffectAll=function(){for(var t in this.SoundArray)1==this.SoundArray[t].getSoundType&&this.SoundArray[t].music.pause()},e.stopEffect=function(){this.currSound&&this.currSound.music.pause()},e.getSoundByName=function(t){for(var e in this.SoundArray)if(this.SoundArray[e].getSoundName==t)return this.SoundArray[e];return null},e.getSoundByPaused=function(t){for(var e in this.SoundArray)if(this.SoundArray[e].getSoundName==t&&!this.SoundArray[e].music.playing())return this.SoundArray[e];return null},e.playMusic=function(e){if(null!=e){if(this.currMusic&&this.currMusic.getSoundName==e)return void(this.currMusic.music.playing()||(this.currMusic.music.volume(this.musicValue),this.currMusic.music.loop(!0),this.currMusic.music.play()));var i=this.getSoundByName(e);if(i)this.currMusic&&this.currMusic.music.pause(),this.currMusic=i;else{var n=t.ZipManager.getSoundsMap(e);if(!n)return;this.currMusic&&this.currMusic.music.pause(),this.currMusic=new Sound(new Howl({src:[n]}),0,e),this.SoundArray.push(this.currMusic)}this.currMusic.music.volume(this.musicValue),this.currMusic.music.loop(!0),this.currMusic.music.play()}},e.playEffectLoop=function(e){if(null!=e){if(this.currSound&&this.currSound.getSoundName==e)return void(this.currSound.music.playing()||(this.currSound.music.volume(this.soundValue),this.currSound.music.loop(!0),this.currSound.music.play()));var i=this.getSoundByPaused(e);if(i)this.currSound&&this.currSound.music.pause(),this.currSound=i;else{var n=t.ZipManager.getSoundsMap(e);if(!n)return;this.currSound&&this.currSound.music.pause(),this.currSound=new Sound(new Howl({src:[n]}),1,e),this.SoundArray.push(this.currSound)}this.currSound.music.volume(this.soundValue),this.currSound.music.loop(!0),this.currSound.music.play()}},e.playEffect=function(e){if(null!=e){var i=this.getSoundByPaused(e);if(!i){var n=t.ZipManager.getSoundsMap(e);if(!n)return;i=new Sound(new Howl({src:[n]}),1,e),this.SoundArray.push(i)}i.music.volume(this.soundValue),i.music.loop(!1),i.music.play()}},e.SoundArray=[],e.musicValue=.5,e.soundValue=.8,e.FISH_MUSIC_VALUE="fishMusicValue",e.FISH_SOUND_VALUE="fishSoundValue",e}();t.SoundByteManager=e,__reflect(e.prototype,"uiCore.SoundByteManager")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(){function e(){}return Object.defineProperty(e,"musicVolume",{get:function(){return this._musicVolume},set:function(t){this._musicVolume=t,this.musicChannel&&(this.musicChannel.volume=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"effectVolume",{get:function(){return this._effectVolume},set:function(t){this._effectVolume=t;for(var e=0;e<this.effectList.length;e++)this.effectList[e].volume=t},enumerable:!0,configurable:!0}),e.getHallMusicMute=function(){return this.init(),this._hallMusicMute},e.init=function(){var e=this;this.isInited||(this.isInited=!0,t.EventManager.getInstance().addEventListener(t.Application.APPEVENT_PAUSE,this.onAppPause,this),t.EventManager.getInstance().addEventListener(t.Application.APPEVENT_RESUME,this.onAppResume,this),this._hallMusicMute=t.Utils.getLocalStorageItem(this.kGameHallMusicStatus,"Boolean"),this.musicVolume=this._hallMusicMute?0:1,this._gameMusicMute={},this._controlGames=t.Utils.getLocalStorageItem(this.kGamesControlMute,"Array"),this._controlGames.forEach(function(i){e._gameMusicMute[i]=t.Utils.getLocalStorageItem(e.kGamesControlMute+"_"+i,"Array")}))},e.onAppPause=function(){this._lastmusicVolume=this.musicVolume,0!=this.musicVolume&&(this.musicVolume=0),this._lasteffectVolume=this.effectVolume,0!=this.effectVolume&&(this.effectVolume=0),this.stopAllEffects()},e.onAppResume=function(){void 0!=this._lastmusicVolume&&(this.musicVolume=this._lastmusicVolume,this._lastmusicVolume=0),void 0!=this._lasteffectVolume&&(this.effectVolume=this._lasteffectVolume,this._lasteffectVolume=0)},e.playMusic=function(t,e,i,n,s){var o=this;if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=null),void 0===s&&(s=null),this.init(),this.music){if(this.musicSource==t)return;this.musicChannel.stop(),this.music=null,this.musicChannel=null}this.musicSource=t,this.musicLoop=e;var r=RES.getRes(t);r?(this.music=r,this.musicChannel=this.music.play(i,e),this.musicChannel.volume=this._musicVolume):RES.getResAsync(t,function(t,e){e==o.musicSource&&o.playMusic(o.musicSource,o.musicLoop)},this)},e.stopMusic=function(){this.musicSource=null,this.music&&(this.musicChannel.stop(),this.music=null,this.musicChannel=null)},e.playEffect=function(e,i,n){void 0===i&&(i=1),void 0===n&&(n=-1),this.init();var s=-1==n?this._effectVolume:n,o=RES.getRes(e);if(o){var r=o.play(0,i);r.volume=s;for(var a=0;a<t.SoundManager.effectList.length;a++)t.SoundManager.effectList[a]==r&&t.SoundManager.effectList.splice(a,1);t.SoundManager.effectList.push(r)}else RES.getResAsync(e,function(t,e){},this)},e.stopAllEffects=function(){for(;this.effectList.length;)this.effectList.shift().stop()},e.muteHallMusic=function(t){this.init(),this._hallMusicMute=t,egret.localStorage.setItem(this.kGameHallMusicStatus,String(t)),this.musicVolume=t?0:1},e.setGameMusicVolume=function(t,e,i){this.init(),-1==this._controlGames.indexOf(i)&&(this._controlGames.push(i),this._gameMusicMute[i]=[.8,.8]),this._gameMusicMute[i][e?0:1]!=t&&(this._gameMusicMute[i][e?0:1]=t,egret.localStorage.setItem(this.kGamesControlMute,"["+this._controlGames.toString()+"]"),egret.localStorage.setItem(this.kGamesControlMute+"_"+i,"["+this._gameMusicMute[i].toString()+"]")),e?this.effectVolume=t:this.musicVolume=t},e.getGameMusicVolume=function(t){return this.init(),-1==this._controlGames.indexOf(t)&&(this._controlGames.push(t),this._gameMusicMute[t]=[.8,.8],egret.localStorage.setItem(this.kGamesControlMute,"["+this._controlGames.toString()+"]"),egret.localStorage.setItem(this.kGamesControlMute+"_"+t,"["+this._gameMusicMute[t].toString()+"]")),this._gameMusicMute[t]},e._musicStartTime=0,e._musicVolume=1,e.effectList=[],e._effectVolume=1,e.kGameHallMusicStatus="kGameHallMusicStatus",e.kGameMusicStatus="kGameMusicStatus",e.kGamesControlMute="kGamesControlMute",e._hallMusicMute=!1,e}();t.SoundManager=e,__reflect(e.prototype,"uiCore.SoundManager")}(uiCore||(uiCore={}));var Data;!function(t){t.ViMsgData=[{id:1,msgId:"1",msg:"Thao tác thất bại, hãy thử lại sau!"},{id:2,msgId:"2",msg:"Đang đăng nhập trò chơi, vui lòng chờ......\nSử dụng Google Explorer để có thể trải nghiệm trò chơi tốt hơn! "},{id:3,msgId:"3",msg:"Đang tải tài nguyên trò chơi,"},{id:4,msgId:"4",msg:"Sao chép thành công"},{id:5,msgId:"5",msg:"Quầy số"},{id:6,msgId:"6",msg:"Để đảm bảo công bằng cho tất cả người chơi trên nền tảng trò chơi này, xu nạp vào để tham gia hoạt động không được dùng để đặt cược trong trò chơi, mong bạn thông cảm."},{id:7,msgId:"7",msg:"Xu không đủ!"},{id:8,msgId:"8",msg:"Khu Sơ cấp"},{id:9,msgId:"9",msg:"Khu Trung cấp"},{id:10,msgId:"10",msg:"Khu Cao cấp"},{id:11,msgId:"11",msg:"Đăng nhập thất bại! "},{id:12,msgId:"12",msg:"Do bạn đã lâu không thao tác, sẽ thoát game trong {0}s"},{id:13,msgId:"13",msg:"Lỗi kết nối Server"},{id:14,msgId:"14",msg:"Mật khẩu không đúng"},{id:15,msgId:"15",msg:"Tải về thất bại,vui lòng vào lại trò chơi! "},{id:16,msgId:"16",msg:"Đang tải thông tin trò chơi, vui lòng chờ"},{id:17,msgId:"17",msg:"Tài khoản này đã đăng nhập ở thiết bị khác, vui lòng đổi tài khoản và đăng nhập lại! "},{id:18,msgId:"18",msg:"Thoát game thất bại, vui lòng thoát lại!"},{id:19,msgId:"19",msg:"Không có kết nối mạng"},{id:20,msgId:"20",msg:"Gia hạn "},{id:21,msgId:"21",msg:"OK"},{id:22,msgId:"22",msg:"Hủy"},{id:23,msgId:"23",msg:"Đăng nhập nhanh"},{id:24,msgId:"24",msg:"Mạng không ổn định, đang kết nối lại"},{id:25,msgId:"25",msg:"Kết nối mạng không thành công"},{id:26,msgId:"26",msg:"登录失败，请重新登陆！"}]}(Data||(Data={}));var Data;!function(t){t.ZhMsgData=[{id:1,msgId:"1",msg:"此次操作失败，请稍后再试！"},{id:2,msgId:"2",msg:"正在登录游戏，请稍候......\n使用谷歌浏览器进行游戏,可以获得更好的体验哦!"},{id:3,msgId:"3",msg:"游戏资源加载中，"},{id:4,msgId:"4",msg:"复制成功"},{id:5,msgId:"5",msg:"号台"},{id:6,msgId:"6",msg:"为了维护所有玩家在本平台游戏公平公正,参与活动充值的金币不能对该游戏进行押注,请您谅解"},{id:7,msgId:"7",msg:"金币不足！"},{id:8,msgId:"8",msg:"初级场"},{id:9,msgId:"9",msg:"中级场"},{id:10,msgId:"10",msg:"高级场"},{id:11,msgId:"11",msg:"登陆失败！"},{id:12,msgId:"12",msg:"由于长时间不开炮，还有{0}秒退出游戏"},{id:13,msgId:"13",msg:"连接服务器错误"},{id:14,msgId:"14",msg:"密码错误"},{id:15,msgId:"15",msg:"游戏加载失败，请重新进入游戏！"},{id:16,msgId:"16",msg:"正在拉取游戏信息, 请稍后"},{id:17,msgId:"17",msg:"此账号在其他地点登录，请更换账号重新登录！"},{id:18,msgId:"18",msg:"退出游戏失败,请重新退出！"},{id:19,msgId:"19",msg:"无网络"},{id:20,msgId:"20",msg:"延迟"},{id:21,msgId:"21",msg:"确 定"},{id:22,msgId:"22",msg:"取 消"},{id:23,msgId:"23",msg:"快速登录"},{id:24,msgId:"24",msg:"网络异常，正在尝试重连"},{id:25,msgId:"25",msg:"网络连接失败！"},{id:26,msgId:"26",msg:"登录失败，请重新登陆！"}]}(Data||(Data={}));var uiCore;!function(t){var e=function(){function e(){this.windowList=[],this.modalList=[],this.autoCloseList=[]}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},Object.defineProperty(e.prototype,"windowCount",{get:function(){return this.windowList.length},enumerable:!0,configurable:!0}),e.prototype.closeWindowByType=function(t){for(var e=0;e<this.windowList.length;e++){var i=this.windowList[e];egret.is(i,t)&&i.forceClose()}},e.prototype.init=function(t,e,i){void 0===e&&(e=.5),void 0===i&&(i=0),this.container=t,this.bg=new eui.Rect(this.container.width,this.container.height,i),this.bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBg,this),this.bg.left=this.bg.right=this.bg.top=this.bg.bottom=0,this.bg.alpha=e,this.bg.touchEnabled=!0},e.prototype.onBg=function(e){var i=this.windowList[this.windowList.length-1];this.autoCloseList[this.windowList.length-1]&&(i instanceof t.Window?i.close():this.closeWindow(i))},e.prototype.updateBg=function(){this.bg.scaleX=this.container.width/this.bg.width,this.bg.scaleY=this.container.height/this.bg.height},e.prototype.addWindow=function(e,i,n,s,o){if(void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===s&&(s=!1),void 0===o&&(o=!0),e.parent!=this.container){if(egret.is(e,"uiCore.Window")&&t.Application.loadClass){var r=e;if(r.resourceList.length&&!r.isLoaded){var a=new t.Application.loadClass;this.addWindow(a,!1,!0,!1,!1),r.isLoaded=!1;var h=new t.ResourceLoader;return-1==r.resourceList.indexOf("preload")&&r.resourceList.push("preload"),void h.loadGroups(r.resourceList,this.onResourceComplete,this,a,r,i,n,s)}}n&&(e.horizontalCenter=e.verticalCenter=0),this.container.addChild(e),o&&(this.windowList.push(e),this.modalList.push(i),this.autoCloseList.push(s),this.updateModal())}},e.prototype.onResourceComplete=function(t,e,i,n,s){void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===s&&(s=!1),this.closeWindow(t),e.isLoaded=!0,this.addWindow(e,i,n,s)},e.prototype.closeWindow=function(t){if(t&&t.parent==this.container&&t.parent){var e=this.windowList.indexOf(t);-1!=e&&(this.windowList.splice(e,1),this.modalList.splice(e,1),this.autoCloseList.splice(e,1),this.updateModal()),t.parent.removeChild(t)}},e.prototype.closeAll=function(){for(var t=[],e=0;e<this.windowList.length;e++){var i=this.windowList[e];egret.is(i,"uiCore.Alert")||egret.is(i,"uiCore.Dialog")||t.push(i)}for(;t.length;)this.closeWindow(t.shift())},e.prototype.closeLast=function(){if(this.windowList.length>0){if(this.windowList[this.windowList.length-1]instanceof t.Alert||this.windowList[this.windowList.length-1]instanceof t.Dialog)return;this.closeWindow(this.windowList[this.windowList.length-1])}},e.prototype.updateModal=function(){if(this.windowList.length)for(var t=this.windowList.length-1;t>=0;t--){var e=this.windowList[t],i=this.modalList[t];if(e&&i){this.bg.parent?this.container.removeChild(this.bg):this.container.addChildAt(this.bg,this.container.numChildren-1),this.container.addChildAt(this.bg,this.container.numChildren-2);break}this.bg.parent&&this.container.removeChild(this.bg)}else this.bg.parent&&this.container.removeChild(this.bg)},e}();t.WindowManager=e,__reflect(e.prototype,"uiCore.WindowManager")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(){function e(){}return e.zipResourceProgress=function(e){this.ZIP_CONFIG.projectConfig==e?(t.ProtobufManager.init(e),FishGameManager.initFishManager(e)):this.ZIP_CONFIG.particleEffect.indexOf(e)>=0?this.zipParticleLoading(e):this.ZIP_CONFIG.movieClipEffect.indexOf(e)>=0?this.zipMovieClipLoading(e):this.ZIP_CONFIG.sounds.indexOf(e)>=0?this.zipSoundsLoading(e):this.ZIP_CONFIG.dragonBoneEffect.indexOf(e)>=0?this.dragonBoneLoading(e):this.ZIP_CONFIG.sheetImage.indexOf(e)>=0?this.sheetImageLoading(e):this.ZIP_CONFIG.fontImage.indexOf(e)>=0&&this.fontImageLoading(e)},e.fontImageLoading=function(e){var i=RES.getRes(e);i?JSZip.loadAsync(i).then(function(e){e.forEach(function(e,i){var n=e.substr(0,e.lastIndexOf("."));i.async("text").then(function(e){t.ZipManager.FontImageJsonMap[n]=JSON.parse(e)})})}):RES.getResAsync(e,this.checkFontImage,this)},e.checkFontImage=function(t,e){this.fontImageLoading(e)},e.initFont=function(t){if(t.length>0)for(var e in t)this.fontLoading(t[e])},e.fontLoading=function(t){if(!this.FontImageMap[t+"_fnt"])if(RES.hasRes(t)){var e=RES.getRes(t);e?this.FontImageJsonMap[t]&&(this.FontImageMap[t+"_fnt"]=new egret.BitmapFont(e,this.FontImageJsonMap[t])):RES.getResAsync(t,this.checkFont,this)}else this.SubkeyImageMap[t]&&this.FontImageJsonMap[t]&&(this.FontImageMap[t+"_fnt"]=new egret.BitmapFont(this.SubkeyImageMap[t],this.FontImageJsonMap[t]))},e.getFontImageMap=function(t){return this.FontImageMap[t]?this.FontImageMap[t]:null},e.checkFont=function(t,e){this.fontLoading(e)},e.sheetImageLoading=function(e){var i=RES.getRes(e);i?JSZip.loadAsync(i).then(function(e){e.forEach(function(e,i){i.async("string").then(function(e){var i=JSON.parse(e);t.ZipManager.saveTexture(i)})})}):RES.getResAsync(e,this.checkSheetImage,this)},e.checkSheetImage=function(t,e){this.sheetImageLoading(e)},e.saveTexture=function(t){var e=t.file;e=e.replace(".","_"),this.SheetImageMap[e]=t,this.textureLoading(e)},e.textureLoading=function(t){var e=RES.getRes(t);if(e){if(this.SheetImageMap[t]){var i=this.SheetImageMap[t].frames,n=new egret.SpriteSheet(e);for(var s in i){var o=i[s],r=n.createTexture(s,o.x,o.y,o.w,o.h,o.offX,o.offY,o.sourceW,o.sourceH);if(o.scale9grid){var a=o.scale9grid,h=a.split(",");r.scale9Grid=new egret.Rectangle(parseInt(h[0]),parseInt(h[1]),parseInt(h[2]),parseInt(h[3]))}this.SubkeyImageMap[s]=r}delete this.SheetImageMap[t]}}else RES.getResAsync(t,this.checkTexture,this)},e.checkTexture=function(t,e){this.textureLoading(e)},e.getSubkeyImageMap=function(t){return this.SubkeyImageMap[t]?this.SubkeyImageMap[t]:null},e.setSubkeyImageMap=function(t,e){t&&e&&(this.SubkeyImageMap[t]=e)},e.dragonBoneLoading=function(t){var i=RES.getRes(t);i?JSZip.loadAsync(i).then(function(t){t.forEach(function(t,i){var n=t.substr(0,t.lastIndexOf("."));e.DragonBoneJsonMap[n]||i.async("text").then(function(t){e.DragonBoneJsonMap[n]=JSON.parse(t)})})}):RES.getResAsync(t,this.checkDragonBoneJsonMap,this)},e.checkDragonBoneJsonMap=function(t,e){this.dragonBoneLoading(e)},e.zipSoundsLoading=function(t){var i=RES.getRes(t);i?JSZip.loadAsync(i).then(function(t){t.forEach(function(t,i){var n=t.substr(0,t.lastIndexOf("."));e.SoundsMap[n]||i.async("base64").then(function(t){e.SoundsMap[n]="data:audio/mp3;base64,"+t})})}):RES.getResAsync(t,this.checkSoundsMap,this)},e.checkSoundsMap=function(t,e){this.zipSoundsLoading(e)},e.zipMovieClipLoading=function(t){var i=RES.getRes(t);i?JSZip.loadAsync(i).then(function(t){t.forEach(function(t,i){if(!i.dir){var n=t.substr(0,t.lastIndexOf("."));e.MovieClipJsonMap[n]||i.async("text").then(function(t){e.MovieClipJsonMap[n]=JSON.parse(t)})}})}):RES.getResAsync(t,this.checkMovieClipJsonMap,this)},e.checkMovieClipJsonMap=function(t,e){this.zipMovieClipLoading(e)},e.zipParticleLoading=function(t){var i=RES.getRes(t);i?JSZip.loadAsync(i).then(function(t){t.forEach(function(t,i){var n=t.substr(0,t.lastIndexOf("."));e.ParticleJsonMap[n]||i.async("text").then(function(t){e.ParticleJsonMap[n]=JSON.parse(t)})})}):RES.getResAsync(t,this.checkParticleJsonMap,this)},e.checkParticleJsonMap=function(t,e){this.zipParticleLoading(e)},e.getParticleJsonMap=function(t){return this.ParticleJsonMap[t]?this.ParticleJsonMap[t]:null},e.getMovieClipJsonMap=function(t){return this.MovieClipJsonMap[t]?this.MovieClipJsonMap[t]:null},e.getSoundsMap=function(t){if(this.SoundsMap[t])return this.SoundsMap[t];var e=RES.getRes(t);return e?"data:audio/mp3;base64,"+egret.Base64Util.encode(e):(RES.getResAsync(t),null)},e.getDragonBoneJsonMap=function(t){return this.DragonBoneJsonMap[t]?this.DragonBoneJsonMap[t]:null},e.ZIP_CONFIG={projectConfig:"config_zip",particleEffect:"publicParticle_zip",movieClipEffect:"publicMovieClip_zip",dragonBoneEffect:"publicDragonBone_zip",sounds:"FishAudio_zip",sheetImage:"publicSheet_zip,fishGameSheet_zip",fontImage:"fishGameFnt_zip"},e.ParticleJsonMap={},e.MovieClipJsonMap={},e.DragonBoneJsonMap={},e.SoundsMap={},e.SheetImageMap={},e.SubkeyImageMap={},e.FontImageJsonMap={},e.FontImageMap={},e}();t.ZipManager=e,__reflect(e.prototype,"uiCore.ZipManager")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(){function t(){}return t.getCirclePoint=function(t,e,i){return this.resultPoint.x=t.x+e*Math.cos(i*Math.PI/180),this.resultPoint.y=t.y+e*Math.sin(i*Math.PI/180),this.resultPoint},t.resultPoint=new egret.Point,t}();t.CircleUtils=e,__reflect(e.prototype,"uiCore.CircleUtils")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(){function t(){}return t.getSector=function(t,e,i,n){void 0===t&&(t=100),void 0===e&&(e=0),void 0===i&&(i=360),void 0===n&&(n=16711680);var s=new egret.Shape,o=0,r=0;s.graphics.beginFill(n),e=e*Math.PI/180;var a=!0;return 0>i&&(a=!1),s.graphics.drawArc(o,r,t,e,e+i*Math.PI/180,!a),s.graphics.lineTo(o,r),s.graphics.lineTo(o+t*Math.cos(e),r+t*Math.sin(e)),s.graphics.endFill(),s},t.getRect=function(t,e,i,n){void 0===i&&(i=1),void 0===n&&(n=16711680);var s=new egret.Shape;return s.graphics.beginFill(n,i),s.graphics.drawRect(0,0,t,e),s.graphics.endFill(),s},t.getPoolDisplayObject=function(t){var e=null,i=[],n=egret.getQualifiedClassName(t);return this._poolDisplay[n]&&(i=this._poolDisplay[n]),e=i.length>0?i.pop():new t},t.recyclePoolDisplayObject=function(t){t.parent&&t.parent.removeChild(t),t.alpha=1,t.visible=!0,t.scaleX=t.scaleY=1,t.mask=null,t.x=t.y=0;var e=[],i=egret.getQualifiedClassName(t);this._poolDisplay[i]?e=this._poolDisplay[i]:this._poolDisplay[i]=e,e.push(t)},t.clearAllPoolDisplayObject=function(){for(var t in this._poolDisplay)for(var e=this._poolDisplay[t];e.length>0;){var i=e.pop();i=null}this._poolDisplay={}},t.restoreEuiImage=function(t){this._darkGroup&&this._darkGroup[t.hashCode]&&this.clearDarkImage(this._darkGroup[t.hashCode])},t.darkEuiImage=function(t){this._darkGroup||(this._darkGroup={});var e,i;if(this._darkGroup[t.hashCode])e=this._darkGroup[t.hashCode],i=e.getChildAt(0),i.source=t.source;else{e=new eui.Group,this._darkGroup[t.hashCode]=e,i=new eui.Image,i.source=t.source;var n=new eui.Rect;n.top=0,n.bottom=0,n.right=0,n.left=0,n.fillColor=0,n.fillAlpha=.3,e.addChild(i),e.addChild(n),e.mask=i,t.parent.contains(e)||(t.parent.addChild(e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveGroup,this))}},t.onRemoveGroup=function(t){var e=t.currentTarget;this.clearDarkImage(e)},t.clearDarkImage=function(t){for(var e in this._darkGroup)if(this._darkGroup[e]==t){this._darkGroup[e]=null,delete this._darkGroup[e];break}t.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveGroup,this),t.parent&&(t.parent.removeChild(t),t.mask=null)},t._poolDisplay={},t}();t.DisplayUtils=e,__reflect(e.prototype,"uiCore.DisplayUtils")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(){function t(){}return t.New=function(t,e,i){var n={x:t||0,y:e||0,z:i||0};return n},t.Clone=function(){return this.New(this.x,this.y,this.z)},t.MulQuat=function(t){var e=2*t.x,i=2*t.y,n=2*t.z,s=t.x*e,o=t.y*i,r=t.z*n,a=t.x*i,h=t.x*n,l=t.y*n,u=t.w*e,c=t.w*i,p=t.w*n;(1-(o+r))*this.x+(a-p)*this.y+(h+c)*this.z,(a+p)*this.x+(1-(s+r))*this.y+(l-u)*this.z,(h-c)*this.x+(l+u)*this.y+(1-(s+o))*this.z;return this},t.SqrMagnitude=function(){return this.x*this.x+this.y*this.y+this.z*this.z},t.div=function(t,e){return this.New(t.x/e,t.y/e,t.z/e)},t.mul=function(t,e){if("number"==typeof e)return this.New(t.x*e,t.y*e,t.z*e);var i=t.Clone();return i.MulQuat(e),i},t.add=function(t,e){return this.New(t.x+e.x,t.y+e.y,t.z+e.z)},t.sub=function(t,e){return this.New(t.x-e.x,t.y-e.y,t.z-e.z)},t.unm=function(t){return this.New(-t.x,-t.y,-t.z)},t.eq=function(t,e){var i=t-e,n=i.SqrMagnitude();return 1e-10>n},t}();t.H5Vector3=e,__reflect(e.prototype,"uiCore.H5Vector3")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(){function e(){}return e.impactCheck=function(e,i,n){if(!e)return!1;this.setFishSize(e.FishId),this.cententPoint.x=e.x,this.cententPoint.y=e.y;for(var s=0;s<this.fishCheckInfo.amount;s++)if(0!=s&&(this.cententPoint=t.CircleUtils.getCirclePoint(this.cententPoint,this.fishCheckInfo.radius*(2*s),e.rotation+180)),this.realCheck(this.cententPoint.x,this.cententPoint.y,i,n))return!0;return!1},e.realCheck=function(t,e,i,n){return i>=t-this.fishCheckInfo.radius&&i<=t+this.fishCheckInfo.radius&&n>=e-this.fishCheckInfo.radius&&n<=e+this.fishCheckInfo.radius?!0:!1},e.setFishSize=function(t){1==t?(this.fishCheckInfo.amount=1,this.fishCheckInfo.radius=20):2==t||3==t?(this.fishCheckInfo.amount=1,this.fishCheckInfo.radius=25):4==t?(this.fishCheckInfo.amount=1,this.fishCheckInfo.radius=30):5==t||8==t?(this.fishCheckInfo.amount=1,this.fishCheckInfo.radius=40):6==t||7==t?(this.fishCheckInfo.amount=2,this.fishCheckInfo.radius=25):9==t?(this.fishCheckInfo.amount=2,this.fishCheckInfo.radius=30):10==t?(this.fishCheckInfo.amount=1,this.fishCheckInfo.radius=55):11==t?(this.fishCheckInfo.amount=1,this.fishCheckInfo.radius=50):12==t?(this.fishCheckInfo.amount=1,this.fishCheckInfo.radius=60):13==t?(this.fishCheckInfo.amount=2,this.fishCheckInfo.radius=50):14==t?(this.fishCheckInfo.amount=1,this.fishCheckInfo.radius=70):15==t||16==t?(this.fishCheckInfo.amount=2,this.fishCheckInfo.radius=80):17==t?(this.fishCheckInfo.amount=2,this.fishCheckInfo.radius=80):18==t?(this.fishCheckInfo.amount=2,this.fishCheckInfo.radius=80):19==t?(this.fishCheckInfo.amount=1,this.fishCheckInfo.radius=85):20==t?(this.fishCheckInfo.amount=4,this.fishCheckInfo.radius=50):21==t?(this.fishCheckInfo.amount=1,this.fishCheckInfo.radius=80):22==t?(this.fishCheckInfo.amount=1,this.fishCheckInfo.radius=80):23==t?(this.fishCheckInfo.amount=1,this.fishCheckInfo.radius=80):24==t?(this.fishCheckInfo.amount=1,this.fishCheckInfo.radius=85):25==t&&(this.fishCheckInfo.amount=1,this.fishCheckInfo.radius=85)},e.fishCheckInfo={amount:1,radius:0},e.cententPoint=new egret.Point,e}();t.ImpactCheckUtils=e,__reflect(e.prototype,"uiCore.ImpactCheckUtils")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(){function e(){}return e.setLangType=function(e){if(e)egret.localStorage.setItem(this.LANG_KEY,e);else{var i=egret.localStorage.getItem(this.LANG_KEY);if(i)this.LangType=i;else{var n=t.Utils.getQueryString("Lang");if(n)this.LangType=n;else{var s=egret.Capabilities.language;s&&(s=s.substr(0,2),this.TH_TH==s?this.LangType=this.TH_TH:this.EN_US==s?this.LangType=this.EN_US:this.VI_VI==s?this.LangType=this.VI_VI:this.ID_ID==s?this.LangType=this.ID_ID:this.LangType=this.ZH_CN)}}}},e.getLangType=function(){return this.LangType||(this.LangType=this.ZH_CN),this.LangType},e.getMsgById=function(e,i){i||(i=Data.MsgData);var n=t.Utils.getItem(i,"id",e);return n?n.msg:""},e.LANG_KEY="langKey",e.ZH_CN="zh",e.EN_US="en",e.TH_TH="th",e.VI_VI="vi",e.ID_ID="id",e}();t.LangUtils=e,__reflect(e.prototype,"uiCore.LangUtils")}(uiCore||(uiCore={}));var md5=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,i){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),i)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var i=this.rstr2binl(t);i.length>16&&(i=this.binl_md5(i,8*t.length));for(var n=Array(16),s=Array(16),o=0;16>o;o++)n[o]=909522486^i[o],s[o]=1549556828^i[o];var r=this.binl_md5(n.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(s.concat(r),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var i,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",s="",o=0;o<t.length;o++)i=t.charCodeAt(o),s+=n.charAt(i>>>4&15)+n.charAt(15&i);return s},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",s=t.length,o=0;s>o;o+=3)for(var r=t.charCodeAt(o)<<16|(s>o+1?t.charCodeAt(o+1)<<8:0)|(s>o+2?t.charCodeAt(o+2):0),a=0;4>a;a++)n+=8*o+6*a>8*t.length?this.b64pad:i.charAt(r>>>6*(3-a)&63);return n},t.prototype.rstr2any=function(t,e){var i,n,s,o,r,a=e.length,h=Array(Math.ceil(t.length/2));for(i=0;i<h.length;i++)h[i]=t.charCodeAt(2*i)<<8|t.charCodeAt(2*i+1);var l=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),u=Array(l);for(n=0;l>n;n++){for(r=Array(),o=0,i=0;i<h.length;i++)o=(o<<16)+h[i],s=Math.floor(o/a),o-=s*a,(r.length>0||s>0)&&(r[r.length]=s);u[n]=o,h=r}var c="";for(i=u.length-1;i>=0;i--)c+=e.charAt(u[i]);return c},t.prototype.str2rstr_utf8=function(t){for(var e,i,n="",s=-1;++s<t.length;)e=t.charCodeAt(s),i=s+1<t.length?t.charCodeAt(s+1):0,e>=55296&&56319>=e&&i>=56320&&57343>=i&&(e=65536+((1023&e)<<10)+(1023&i),s++),127>=e?n+=String.fromCharCode(e):2047>=e?n+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?n+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(n+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return n},t.prototype.str2rstr_utf16le=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(255&t.charCodeAt(i),t.charCodeAt(i)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t.charCodeAt(i)>>>8&255,255&t.charCodeAt(i));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(var i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e},t.prototype.binl2rstr=function(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var i=1732584193,n=-271733879,s=-1732584194,o=271733878,r=0;r<t.length;r+=16){var a=i,h=n,l=s,u=o;i=this.md5_ff(i,n,s,o,t[r+0],7,-680876936),o=this.md5_ff(o,i,n,s,t[r+1],12,-389564586),s=this.md5_ff(s,o,i,n,t[r+2],17,606105819),n=this.md5_ff(n,s,o,i,t[r+3],22,-1044525330),i=this.md5_ff(i,n,s,o,t[r+4],7,-176418897),o=this.md5_ff(o,i,n,s,t[r+5],12,1200080426),s=this.md5_ff(s,o,i,n,t[r+6],17,-1473231341),n=this.md5_ff(n,s,o,i,t[r+7],22,-45705983),i=this.md5_ff(i,n,s,o,t[r+8],7,1770035416),o=this.md5_ff(o,i,n,s,t[r+9],12,-1958414417),s=this.md5_ff(s,o,i,n,t[r+10],17,-42063),n=this.md5_ff(n,s,o,i,t[r+11],22,-1990404162),i=this.md5_ff(i,n,s,o,t[r+12],7,1804603682),o=this.md5_ff(o,i,n,s,t[r+13],12,-40341101),s=this.md5_ff(s,o,i,n,t[r+14],17,-1502002290),n=this.md5_ff(n,s,o,i,t[r+15],22,1236535329),i=this.md5_gg(i,n,s,o,t[r+1],5,-165796510),o=this.md5_gg(o,i,n,s,t[r+6],9,-1069501632),s=this.md5_gg(s,o,i,n,t[r+11],14,643717713),n=this.md5_gg(n,s,o,i,t[r+0],20,-373897302),i=this.md5_gg(i,n,s,o,t[r+5],5,-701558691),o=this.md5_gg(o,i,n,s,t[r+10],9,38016083),s=this.md5_gg(s,o,i,n,t[r+15],14,-660478335),n=this.md5_gg(n,s,o,i,t[r+4],20,-405537848),i=this.md5_gg(i,n,s,o,t[r+9],5,568446438),o=this.md5_gg(o,i,n,s,t[r+14],9,-1019803690),s=this.md5_gg(s,o,i,n,t[r+3],14,-187363961),n=this.md5_gg(n,s,o,i,t[r+8],20,1163531501),i=this.md5_gg(i,n,s,o,t[r+13],5,-1444681467),o=this.md5_gg(o,i,n,s,t[r+2],9,-51403784),s=this.md5_gg(s,o,i,n,t[r+7],14,1735328473),n=this.md5_gg(n,s,o,i,t[r+12],20,-1926607734),i=this.md5_hh(i,n,s,o,t[r+5],4,-378558),o=this.md5_hh(o,i,n,s,t[r+8],11,-2022574463),s=this.md5_hh(s,o,i,n,t[r+11],16,1839030562),n=this.md5_hh(n,s,o,i,t[r+14],23,-35309556),i=this.md5_hh(i,n,s,o,t[r+1],4,-1530992060),o=this.md5_hh(o,i,n,s,t[r+4],11,1272893353),s=this.md5_hh(s,o,i,n,t[r+7],16,-155497632),n=this.md5_hh(n,s,o,i,t[r+10],23,-1094730640),i=this.md5_hh(i,n,s,o,t[r+13],4,681279174),o=this.md5_hh(o,i,n,s,t[r+0],11,-358537222),s=this.md5_hh(s,o,i,n,t[r+3],16,-722521979),n=this.md5_hh(n,s,o,i,t[r+6],23,76029189),i=this.md5_hh(i,n,s,o,t[r+9],4,-640364487),o=this.md5_hh(o,i,n,s,t[r+12],11,-421815835),s=this.md5_hh(s,o,i,n,t[r+15],16,530742520),n=this.md5_hh(n,s,o,i,t[r+2],23,-995338651),i=this.md5_ii(i,n,s,o,t[r+0],6,-198630844),o=this.md5_ii(o,i,n,s,t[r+7],10,1126891415),s=this.md5_ii(s,o,i,n,t[r+14],15,-1416354905),n=this.md5_ii(n,s,o,i,t[r+5],21,-57434055),i=this.md5_ii(i,n,s,o,t[r+12],6,1700485571),o=this.md5_ii(o,i,n,s,t[r+3],10,-1894986606),s=this.md5_ii(s,o,i,n,t[r+10],15,-1051523),n=this.md5_ii(n,s,o,i,t[r+1],21,-2054922799),i=this.md5_ii(i,n,s,o,t[r+8],6,1873313359),o=this.md5_ii(o,i,n,s,t[r+15],10,-30611744),s=this.md5_ii(s,o,i,n,t[r+6],15,-1560198380),n=this.md5_ii(n,s,o,i,t[r+13],21,1309151649),i=this.md5_ii(i,n,s,o,t[r+4],6,-145523070),o=this.md5_ii(o,i,n,s,t[r+11],10,-1120210379),s=this.md5_ii(s,o,i,n,t[r+2],15,718787259),n=this.md5_ii(n,s,o,i,t[r+9],21,-343485551),i=this.safe_add(i,a),n=this.safe_add(n,h),s=this.safe_add(s,l),o=this.safe_add(o,u)
}return[i,n,s,o]},t.prototype.md5_cmn=function(t,e,i,n,s,o){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(n,o)),s),i)},t.prototype.md5_ff=function(t,e,i,n,s,o,r){return this.md5_cmn(e&i|~e&n,t,e,s,o,r)},t.prototype.md5_gg=function(t,e,i,n,s,o,r){return this.md5_cmn(e&n|i&~n,t,e,s,o,r)},t.prototype.md5_hh=function(t,e,i,n,s,o,r){return this.md5_cmn(e^i^n,t,e,s,o,r)},t.prototype.md5_ii=function(t,e,i,n,s,o,r){return this.md5_cmn(i^(e|~n),t,e,s,o,r)},t.prototype.safe_add=function(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();__reflect(md5.prototype,"md5");var uiCore;!function(t){var e=function(){function t(){}return t.format=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=t,s=0;s<e.length;s++)n=n.replace("{"+s+"}",e[s].toString());return n},t.isEmpty=function(t){return null==t||void 0==t||0==t.length},t.trim=function(t){return t.replace(/(^\s*)|(\s*$)/g,"")},t.textToRichText=function(t){if(null!=t)return(new egret.HtmlTextParser).parser(t)},t.textIndexOf=function(t,e){return-1!=t.indexOf(e)?!0:!1},t}();t.StringUtils=e,__reflect(e.prototype,"uiCore.StringUtils")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(){function t(){}return t.Linear=function(t,e,i,n,s){var o=0;switch(t){case"easeNone":o=n*e/s+i;break;case"in":o=n*e/s+i;break;case"out":o=n*e/s+i;break;case"easeInOut":o=n*e/s+i}return o},t.Expo=function(t,e,i,n,s){var o=0;switch(t){case"in":o=0==e?i:n*Math.pow(2,10*(e/s-1))+i-.001*n;break;case"out":o=e==s?i+n:n*(-Math.pow(2,-10*e/s)+1)+i;break;case"easeInOut":0==e&&(o=i),e==s&&(o=i+n),(e/=.5*s)<1&&(o=.5*n*Math.pow(2,10*(e-1))+i),o=.5*n*(-Math.pow(2,-10*--e)+2)+i}return o},t.Sine=function(t,e,i,n,s){var o=0,r=.5*Math.PI;switch(t){case"in":o=-n*Math.cos(e/s*r)+n+i;break;case"out":o=n*Math.sin(e/s*r)+i;break;case"easeInOut":o=.5*-n*(Math.cos(Math.PI*e/s)-1)+i}return o},t.Call=function(t,e,i,n,s,o){switch(t){case"linear":return this.Linear(e,i,n,s,o);case"sine":return this.Sine(e,i,n,s,o);case"expo":return this.Expo(e,i,n,s,o);default:return 0}},t}();t.TweenManager=e,__reflect(e.prototype,"uiCore.TweenManager")}(uiCore||(uiCore={}));var uiCore;!function(t){var e=function(){function e(){}return e.isInteger=function(t){return t%1===0},e.isFunction=function(t){return"function"==typeof t},e.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},e.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},e.isEmptyObject=function(t){for(var e in t)return!1;return!0},e.clearObject=function(t){for(var e in t)delete t[e]},e.getItem=function(t,e,i){for(var n=0;n<t.length;n++)if(t[n][e]==i)return t[n];return null},e.remove=function(t,e){var i=t.indexOf(e);i>-1&&t.splice(i,1)},e.formatDate=function(t,e){var i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in i)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return e},e.getObjKeysNum=function(e){if(!t.Utils.isObject(e))return null;var i=0;for(var n in e)e.hasOwnProperty(n)&&i++;return i},e.indexOf=function(t,e){for(var i=0;i<t.length;i++)if(t[i]==e)return i;return-1},e.copy=function(t,e,i){if(void 0===i&&(i=!1),t&&e)for(var n in t)e.hasOwnProperty(n)&&i&&(e[n]=t[n])},e.checkRealVisible=function(t){for(var e=t;e&&!egret.is(e,"egret.Stage");){if(!e.visible)return!1;e=e.parent}return!0},e.removeChildrenNotByType=function(t,e,i){for(var n=[],s=0;s<t.numChildren;s++){for(var o=t.getChildAt(s),r=!0,s=0;s<e.length;s++)r=r&&egret.is(o,e[s])!=i;r&&n.push(o)}for(;n.length;)t.removeChild(n.shift())},e.isIOSNative=function(){return window.navigator&&"ios_miq"==navigator.userAgent},e.getLocalStorageItem=function(t,e){var i=egret.localStorage.getItem(t);switch(e){case"Array":return i?JSON.parse(i):[];case"Object":return i?JSON.parse(i):{};case"String":return i?i:"";case"Number":return i?parseFloat(i):0/0;case"Boolean":return i?"true"==i:!1}},e.formatCurrency=function(t,e){if(void 0===e&&(e=!1),t=Math.floor(t),t=parseFloat(t)/100,1>t&&t>-1)return t.toString();if(t=(t.toFixed(2)+"").replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,"),e)return t;var i=t.substring(t.length-2,t.length);i=0==parseInt(i)?"":0==parseInt(i.substring(1,i.length))?"."+i.substring(0,1):"."+i;var n=t.substring(0,t.length-3);return n+i},e.formatNickName=function(t,e){return t.length<=e?t:t.substring(0,e)+"..."},e.formatNickName1=function(t,e){for(var i,n=0,s=0,o="",r=0;r<t.length;r++)i=4===t.charCodeAt(r).toString(16).length,i?n++:s++,e>=2*n+s&&(o+=t[r]);return 2*n+s>e&&(o+="..."),o},e.md5=function(t){return this.md5Object=this.md5Object||new md5,this.md5Object.hex_md5(t)},e.getIMEI=function(){var e=egret.localStorage.getItem("fish_imei_windows");return e||(e=t.Utils.md5(t.Utils.formatDate(new Date,"qqddMMhhmmS")+Math.random()),egret.localStorage.setItem("fish_imei_windows",e)),e},e.getQueryString=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return null!=i?decodeURI(i[2]):null},e.getQueryUrl=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return null!=i?decodeURIComponent(i[2]):null},e.getUrlCodeString=function(t){if(t.indexOf("?")>-1){var e=t.substring(t.indexOf("?")+1,t.length);if(""!=e&&e.indexOf("&")>-1){var i={};return e.split("&").forEach(function(t){if(t.indexOf("=")>-1){var e=t.split("=");i[e[0]]=e[1]}}),i}}return null},e.isExistKey=function(t,e){var i=!1;return t[e]&&(i=!0),i},e.getNewObject=function(t){var e={};for(var i in t)"_id_"!=i&&(e[i]=t[i]);return e},e.getBrowserInfo=function(){var t=navigator.userAgent.toLowerCase(),e=/msie [\d.]+;/gi,i=/firefox\/[\d.]+/gi,n=/chrome\/[\d.]+/gi,s=/safari\/[\d.]+/gi;return t.indexOf("msie")>0?t.match(e).toString():t.indexOf("firefox")>0?t.match(i).toString():t.indexOf("chrome")>0?t.match(n).toString():t.indexOf("safari")>0&&t.indexOf("chrome")<0?t.match(s).toString():"other"},e.getOSInfo=function(){var t=navigator.userAgent,e="Win32"==navigator.platform||"Windows"==navigator.platform,i="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;if(-1!=t.toString().indexOf("iPhone OS")||-1!=t.toString().indexOf("iPad"))return"IOS";var n="X11"==navigator.platform&&!e&&!i;if(n)return"Unix";var s=String(navigator.platform).indexOf("Linux")>-1,o=String(t).indexOf("Android")>-1;if(s)return o?"Android":"Linux";if(e){var r=t.indexOf("Windows NT 5.0")>-1||t.indexOf("Windows 2000")>-1;if(r)return"Win2000";var a=t.indexOf("Windows NT 5.1")>-1||t.indexOf("Windows XP")>-1;if(t.indexOf("Windows XP")>-1,a)return"WinXP";var h=t.indexOf("Windows NT 5.2")>-1||t.indexOf("Windows 2003")>-1;if(h)return"Win2003";var l=t.indexOf("Windows NT 6.0")>-1||t.indexOf("Windows Vista")>-1;if(l)return"WinVista";var u=t.indexOf("Windows NT 6.1")>-1||t.indexOf("Windows 7")>-1;if(u)return"Win7";var c=t.indexOf("windows nt6.2")>-1||t.indexOf("Windows 8")>-1;if(c)return"Win8";var p=t.indexOf("Windows NT 10")>-1;if(p)return"Win10"}return"other"},e.getLocalTime=function(t){if("number"==typeof t){var e=new Date,i=e.getTime(),n=6e4*e.getTimezoneOffset(),s=i+n;return new Date(s+36e5*t)}},e.getLocalTimeByCST=function(t,e){if(e=isNaN(e)?8:e,"number"==typeof e){t=t.replace(/\-/g,"/");var i=new Date(t),n=i.getTime(),s=6e4*i.getTimezoneOffset(),o=n+s;return new Date(o+36e5*e)}},e.S2H=function(t,e,i){if(void 0===e&&(e=":"),void 0===i&&(i=!0),!(0>t)){var n=Math.floor(t/1e3/60/60).toString(),s=Math.floor(t%36e5/6e4).toString(),o=Math.floor(t%6e4/1e3).toString();if(Number(n)<10&&(n="0"+n),Number(s)<10&&(s="0"+s),Number(o)<10&&(o="0"+o),i)var r=n+e+s+e+o;else var r=s+e+o;return r}},e.conversionTime=function(t){if(0>=t)return"";if(t>=86400){var i=Math.floor(t/86400);return i+"天"}if(t>=3600){var n=Math.floor(t/3600);return n+"小时"}return e.S2H(1e3*t)},e.getHours=function(t){return 0>t?void 0:Math.floor(t/1e3/60/60)},e.isWbeP=function(){var t=!![].map&&0==document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp");return t&&LibCore.GameConfig.iswebp},e.checkNullObj=function(t){return 0===Object.keys(t).length},e.checkAttributesObj=function(t,e){return t?t.hasOwnProperty(e):!1},e.getOnlySign=function(){var e=(new Date).getTime()+"";return"0"==t.Utils.nextSign?(t.Utils.nextSign=e,e):t.Utils.nextSign===e?t.Utils.getOnlySign():(t.Utils.nextSign=e,e)},e.reloadPage=function(){top.location!=location?top.location.href=t.Utils.getQueryString("returnUrl"):location.reload()},e.token="",e.needConnect=!0,e.getUtf8Length=function(t){for(var e=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);e+=128>n?1:2048>n?2:3}return e},e.getRandom=function(t,e){var i=e-t+1;return Math.floor(Math.random()*i+t)},e.nextSign="0",e}();t.Utils=e,__reflect(e.prototype,"uiCore.Utils")}(uiCore||(uiCore={}));var CircleGroup=function(t){function e(){var e=t.call(this)||this;return e.centerPoint=new egret.Point,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.startX=this.x,this.startY=this.y},Object.defineProperty(e.prototype,"factor",{get:function(){return 0},set:function(t){this.centerPoint.x=this.startX-30,this.centerPoint.y=this.startY;var e=uiCore.CircleUtils.getCirclePoint(this.centerPoint,30,t);this.x=e.x,this.y=e.y},enumerable:!0,configurable:!0}),e}(eui.Group);__reflect(CircleGroup.prototype,"CircleGroup");var CircleImage=function(t){function e(){var e=t.call(this)||this;return e.centerPoint=new egret.Point,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.startX=this.x,this.startY=this.y},Object.defineProperty(e.prototype,"factor",{get:function(){return 0},set:function(t){this.centerPoint.x=this.startX-30,this.centerPoint.y=this.startY;var e=uiCore.CircleUtils.getCirclePoint(this.centerPoint,30,t);this.x=e.x,this.y=e.y},enumerable:!0,configurable:!0}),e}(eui.Image);__reflect(CircleImage.prototype,"CircleImage");var DragonBoneGroup=function(t){function e(){var e=t.call(this)||this;return e.source="",e.sourceName="",e.dragonBonesEgretScaleX=1,e.dragonBonesEgretScaleY=1,e}return __extends(e,t),Object.defineProperty(e.prototype,"getDragonBonesEgret",{get:function(){return this.dragonBonesEgret},enumerable:!0,configurable:!0}),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.setDragonBonesEgret()},e.prototype.setDragonBonesEgret=function(){this.dragonBonesEgret=uiCore.DragonBoneManager.getGenerateDragonBoneData(this.sourceName),this.dragonBonesEgret?this.addDragonBonesEgret():uiCore.ZipManager.getDragonBoneJsonMap(this.source+"_ske")&&uiCore.ZipManager.getDragonBoneJsonMap(this.source+"_tex")&&this.dragonBonesImageLoading()},e.prototype.dragonBonesImageLoading=function(){var t=RES.getRes(this.source+"_tex_png");if(t){var e=dragonBones.EgretFactory.factory;e.parseDragonBonesData(uiCore.ZipManager.getDragonBoneJsonMap(this.source+"_ske")),e.parseTextureAtlasData(uiCore.ZipManager.getDragonBoneJsonMap(this.source+"_tex"),t),uiCore.DragonBoneManager.setDragonBoneMap(this.source,e),this.setDragonBonesEgret()}else RES.getResAsync(this.source+"_tex_png",this.dragonBonesImageLoading,this)},e.prototype.addDragonBonesEgret=function(){this.addChild(this.dragonBonesEgret),this.dragonBonesEgret.scaleX=uiCore.Application.app.stage.stageWidth/(this.dragonBonesEgret.width-600),this.dragonBonesEgret.scaleY=uiCore.Application.app.stage.stageHeight/this.dragonBonesEgret.height},e}(eui.Group);__reflect(DragonBoneGroup.prototype,"DragonBoneGroup");var GamePiPeiView=function(t){function e(){var e=t.call(this)||this;return e.pipeiTimeId=-1,e.closeTimeId=-1,e.tipIndex=0,e}return __extends(e,t),e.prototype.initExmlOk=function(){this.addEvt(this.closeBtn,egret.TouchEvent.TOUCH_TAP,this.onHidePiPei,this),this.msgLabel.text="",this.visible=!1},e.prototype.onHidePiPei=function(t){this.cancelFn&&(this.cancelFn.call(this.cancelThis),this.cancelFn=this.cancelThis=null),this.hidePiPei()},e.prototype.hidePiPei=function(){var t=this;egret.clearInterval(this.pipeiTimeId),this.cancelFn=this.cancelThis=null,this.touchChildren=!1,egret.Tween.removeTweens(this.pipeiGroup),egret.Tween.get(this.pipeiGroup).to({scaleY:.9,scaleX:.9,alpha:.8},100).call(function(){t.touchChildren=!0,t.pipeiGroup.scaleX=t.pipeiGroup.scaleY=1,t.visible=!1},this)},e.prototype.showPiPei=function(t,e){this.cancelFn=t,this.cancelThis=e,this.visible=!0,this.pipeiGroup.scaleX=this.pipeiGroup.scaleY=this.pipeiGroup.alpha=1,this.tipIndex=0,this.pipeiTimeId&&(egret.clearInterval(this.pipeiTimeId),this.pipeiTimeId=-1),this.updatePiPeiTxt(),this.pipeiTimeId=egret.setInterval(this.updatePiPeiTxt,this,300)},e.prototype.updatePiPeiTxt=function(){4==this.tipIndex&&(this.tipIndex=0);for(var t="正在为您匹配牌桌\n游戏即将开始，请耐心等待",e=0;e<this.tipIndex;e++)t+=".";this.msgLabel.text=t,this.tipIndex++},e.prototype.onDestroy=function(){egret.Tween.removeTweens(this.pipeiGroup),egret.clearTimeout(this.closeTimeId),egret.clearInterval(this.pipeiTimeId),this.pipeiTimeId=-1,t.prototype.onDestroy.call(this)},e}(core.BaseView);__reflect(GamePiPeiView.prototype,"GamePiPeiView");var MovieClipGroup=function(t){function e(){var e=t.call(this)||this;return e.source="",e.rameLabel="",e.sourceName="",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.loadingConfig()},e.prototype.loadingConfig=function(){var t=uiCore.MovieClipManager.getGenerateMovieClipData(this.sourceName);t?(t.gotoAndPlay(this.rameLabel,-1),this.addChild(t)):uiCore.ZipManager.getMovieClipJsonMap(this.source)&&this.mcLoading()},e.prototype.mcLoading=function(){var t=RES.getRes(this.source+"_png");t?(uiCore.MovieClipManager.setMovieClipMap(this.source,new egret.MovieClipDataFactory(uiCore.ZipManager.getMovieClipJsonMap(this.source),t)),this.loadingConfig()):RES.getResAsync(this.source+"_png",this.mcLoading,this)},e}(eui.Group);__reflect(MovieClipGroup.prototype,"MovieClipGroup");var ParticleGroup=function(t){function e(){var e=t.call(this)||this;return e.source="",e.particleScaleX=1,e.particleScaleY=1,e}return __extends(e,t),Object.defineProperty(e.prototype,"getParticleSystem",{get:function(){return this.particleSystem},enumerable:!0,configurable:!0}),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.setParticleSystem()},e.prototype.setParticleSystem=function(){this.particleSystem=uiCore.ParticleManager.getParticleSystem(this.source),this.particleSystem?this.addParticleSystem():uiCore.ZipManager.getParticleJsonMap(this.source)&&this.particleImageLoading()},e.prototype.particleImageLoading=function(){if(RES.hasRes(this.source)){var t=RES.getRes(this.source);t?(uiCore.ParticleManager.setParticleMap(this.source,t),this.setParticleSystem()):RES.getResAsync(this.source,this.particleImageLoading,this)}},e.prototype.addParticleSystem=function(){this.addChild(this.particleSystem),this.particleSystem.scaleX=this.particleScaleX,this.particleSystem.scaleY=this.particleScaleY},e}(eui.Group);__reflect(ParticleGroup.prototype,"ParticleGroup");var MainSceneView=function(t){function e(){var e=t.call(this)||this;return e.skinName="MainSceneSkin",e}return __extends(e,t),e.prototype.start=function(){this.initEvent(),this.UserDataChange()},e.prototype.UserDataChange=function(){this.sharedHeader.UserDataChange()},e.prototype.initEvent=function(){this.goRoom.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGoRoomClick,this),this.goDSRoom.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGoDSRoomClick,this),this.btnLanguage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLanguageClick,this)},e.prototype.onGoRoomClick=function(){return null==SceneManager.getGameInfo(uiCore.Application.currGameId)?void uiCore.Alert.show(uiCore.LangUtils.getMsgById(16)):(SceneManager.changeSceneView(RoomSceneView),void GameData.getInstance().setUserData("GameID",uiCore.Application.currGameId))},e.prototype.onGoDSRoomClick=function(){return uiCore.Application.currGameId=30300101,null==SceneManager.getGameInfo(uiCore.Application.currGameId)?void uiCore.Alert.show(uiCore.LangUtils.getMsgById(16)):(SceneManager.changeSceneView(RoomSceneView),void GameData.getInstance().setUserData("GameID",uiCore.Application.currGameId))},e.prototype.onLanguageClick=function(){uiCore.LangUtils.getLangType()==uiCore.LangUtils.EN_US?uiCore.Dialog.show("Make sure to switch to Chinese version ?",function(){uiCore.LangUtils.setLangType(uiCore.LangUtils.ZH_CN),location.reload()},null,this):uiCore.Dialog.show("确定切换到英文版本 ?",function(){uiCore.LangUtils.setLangType(uiCore.LangUtils.EN_US),location.reload()},null,this)},e.prototype.removeEvent=function(){this.goRoom.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGoRoomClick,this),this.btnLanguage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLanguageClick,this)},e.prototype.onDestroy=function(){this.removeEvent(),t.prototype.onDestroy.call(this)},e}(uiCore.Scene);__reflect(MainSceneView.prototype,"MainSceneView");var SceneManager=function(){function t(){this.loadDownImageIndex=0}return t.init=function(){this.tryTimer=new egret.Timer(5e3,0),this.tryTimer.addEventListener(egret.TimerEvent.TIMER,this.restConnect,this)},t.restConnect=function(){return this.reconnectIndex++,this.tryTimer.running||(uiCore.Application.addLoadding(!0),this.tryTimer.start()),this.reconnectIndex>5?(uiCore.Dialog.show(uiCore.LangUtils.getMsgById(25),function(){location.reload()},null,this),void this.isNeetReconnect()):void Net.GameService.connect()},t.isNeetReconnect=function(){this.reconnectIndex=0,this.tryTimer.running&&(this.tryTimer.stop(),this.tryTimer.delay=5e3,uiCore.Application.removeLoadding())},t.changeSceneView=function(t,e){void 0===e&&(e=!0),t&&(e?this.sceneView=new t:this.sceneView=t,uiCore.Application.changeScene(this.sceneView))},t.UserDataChange=function(){this.sceneView&&this.sceneView.UserDataChange()},t.OpenControl=function(){this.gameOpenControl={};var e=GameData.getInstance().userData("agentId"),i={AgentID:e},n=(new Date).getTime()+"",s=uiCore.Utils.md5(HttpContractType.OpenControl.toString()+JSON.stringify(i)+LibCore.GameConfig.http_sign_key+n).toUpperCase(),o={Protocol:HttpContractType.OpenControl,Data:JSON.stringify(i),Sign:s,Timestamp:n};uiCore.HttpManager.getInstance().send(LibCore.GameConfig.http_base_url+LibCore.GameConfig.http_port+LibCore.GameConfig.http_login_url,o,egret.URLRequestMethod.POST,function(e){var i=JSON.parse(e.Data);if(null!=i){for(var n=0;n<i.length;n++)this.gameOpenControl[i[n].GID]=i[n];this.sceneView instanceof RoomSceneView&&(this.sceneView.initRoom(),uiCore.Application.removeLoadding())}else t.OpenControl()},function(){egret.setTimeout(function(){t.OpenControl()},this,1e3)},this)},t.getExchange=function(){var e=GameData.getInstance().userData("useragentid"),i={AgentID:e,PayType:0},n=(new Date).getTime()+"",s=uiCore.Utils.md5(HttpContractType.RequireGoodsList.toString()+JSON.stringify(i)+LibCore.GameConfig.http_pay_key+n).toUpperCase(),o={Protocol:HttpContractType.RequireGoodsList,Data:JSON.stringify(i),Sign:s,Timestamp:n};uiCore.HttpManager.getInstance().send(LibCore.GameConfig.http_base_url+LibCore.GameConfig.http_pay_port+LibCore.GameConfig.http_login_url,o,egret.URLRequestMethod.POST,function(e){if(1==e.Code){var i=JSON.parse(e.Data);this.exchangeValue=i.Exchange,t.UserDataChange()}else t.getExchange()},function(){egret.setTimeout(function(){t.getExchange()},this,1e3)},this)},t.loadDownImage=function(e){egret.ImageLoader.crossOrigin="anonymouse";var i=new egret.ImageLoader;i.load(e),i.once(egret.Event.COMPLETE,function(i){if(i.currentTarget.data){this.loadDownImageIndex=0;var n=new egret.Texture;n.bitmapData=i.currentTarget.data,uiCore.ZipManager.setSubkeyImageMap("playerHeadImage",n)}else this.loadDownImageIndex++,this.loadDownImageIndex<4?t.loadDownImage(e):this.loadDownImageIndex=0},this)},t.getGameInfo=function(t){if(this.gameOpenControl[t]){var e=this.gameOpenControl[t].Services;if(e&&e.length>0)return e}return null},t.gameOpenControl={},t.reconnectIndex=0,t}();__reflect(SceneManager.prototype,"SceneManager");var BaseComponent=function(t){function e(){var e=t.call(this)||this;return e.anonymousFnc=[],e.effectList=[],e.timeList=[],e.intervalList=[],e.animationList=[],e}return __extends(e,t),e.prototype.removeAnonymousLis=function(){for(var t=this.anonymousFnc,e=t.length,i={obj:null,event:null,fnc:null,thisObj:null},n=0;e>n;n++)i=t[n],i.obj.removeEventListener(i.event,i.fnc,i.thisObj);this.anonymousFnc=[]},e.prototype.pushAnimation=function(t){this.deleteAnimation(t),this.animationList.indexOf(t)<0&&this.animationList.push(t)},e.prototype.pushAnimationNotStop=function(t){var e=this.animationList.indexOf(t);e>-1||this.animationList.push(t)},e.prototype.deleteAnimation=function(t){var e=this.animationList.indexOf(t);e>-1&&(this[t].stop(),this[t].visible=!1,this[t].source="",this.animationList.splice(e,1))},e.prototype.removeAllAnimation=function(){for(var t=0,e=this.animationList,i=e.length;i>t;t++)this[e[t]].stop(),this[e[t]].visible=!1;this.animationList=[]},e.prototype.pushTimeList=function(t){this.deleteTimeList(t),this.timeList.indexOf(t)<0&&this.timeList.push(t)},e.prototype.deleteTimeList=function(t){var e=this.timeList.indexOf(t);e>-1&&(-1!=this[t]&&(egret.clearTimeout(this[t]),this[t]=-1),this.timeList.splice(e,1))},e.prototype.removeAllTimeList=function(){for(var t=0,e=this.timeList,i=e.length;i>t;t++)-1!=this[e[t]]&&(egret.clearTimeout(this[e[t]]),this[e[t]]=-1);this.timeList=[]},e.prototype.pushIntervalList=function(t){this.deleteIntervalList(t),this.intervalList.indexOf(t)<0&&this.intervalList.push(t)},e.prototype.deleteIntervalList=function(t){var e=this.intervalList.indexOf(t);e>-1&&(-1!=this[t]&&(egret.clearInterval(this[t]),this[t]=-1),this.intervalList.splice(e,1))},e.prototype.removeAllIntervalList=function(){for(var t=0,e=this.intervalList,i=e.length;i>t;t++)-1!=this[e[t]]&&(egret.clearInterval(this[e[t]]),this[e[t]]=-1);this.intervalList=[]},e.prototype.pushEffectList=function(t){this.deleteEffectList(t),this.effectList.indexOf(t)<0&&this.effectList.push(t)},e.prototype.deleteEffectList=function(t){var e=this.effectList.indexOf(t);e>-1&&(-1!=this[t]&&egret.Tween.removeTweens(this[t]),this.effectList.splice(e,1))},e.prototype.removeAllEffectList=function(){for(var t=0,e=this.effectList,i=e.length;i>t;t++)-1!=this[e[t]]&&egret.Tween.removeTweens(this[e[t]]);this.effectList=[]},e.prototype.onApplicationFocus=function(){this.removeAllAnimation(),this.removeAllTimeList(),this.removeAllIntervalList(),this.removeAnonymousLis()},e}(eui.Component);__reflect(BaseComponent.prototype,"BaseComponent");var BaseGroup=function(t){function e(){var e=t.call(this)||this;return e.effectList=[],e.timeList=[],e.intervalList=[],e.animationList=[],e}return __extends(e,t),e.prototype.pushAnimation=function(t){this.deleteAnimation(t),this.animationList.indexOf(t)<0&&this.animationList.push(t)},e.prototype.deleteAnimation=function(t){var e=this.animationList.indexOf(t);e>-1&&(this[t].stop(),this[t].visible=!1,this[t].source="",this.animationList.splice(e,1))},e.prototype.removeAllAnimation=function(){for(var t=0,e=this.animationList,i=e.length;i>t;t++)this[e[t]].stop(),this[e[t]].visible=!1;this.animationList=[]},e.prototype.pushTimeList=function(t){this.deleteTimeList(t),this.timeList.indexOf(t)<0&&this.timeList.push(t)},e.prototype.deleteTimeList=function(t){var e=this.timeList.indexOf(t);e>-1&&(-1!=this[t]&&(egret.clearTimeout(this[t]),this[t]=-1),this.timeList.splice(e,1))},e.prototype.removeAllTimeList=function(){for(var t=0,e=this.timeList,i=e.length;i>t;t++)-1!=this[e[t]]&&(egret.clearTimeout(this[e[t]]),this[e[t]]=-1);this.timeList=[]},e.prototype.pushIntervalList=function(t){this.deleteIntervalList(t),this.intervalList.indexOf(t)<0&&this.intervalList.push(t)},e.prototype.deleteIntervalList=function(t){var e=this.intervalList.indexOf(t);e>-1&&(-1!=this[t]&&(egret.clearInterval(this[t]),this[t]=-1),this.intervalList.splice(e,1))},e.prototype.removeAllIntervalList=function(){for(var t=0,e=this.intervalList,i=e.length;i>t;t++)-1!=this[e[t]]&&(egret.clearInterval(this[e[t]]),this[e[t]]=-1);this.intervalList=[]},e.prototype.pushEffectList=function(t){this.deleteEffectList(t),this.effectList.indexOf(t)<0&&this.effectList.push(t)},e.prototype.deleteEffectList=function(t){var e=this.effectList.indexOf(t);e>-1&&(-1!=this[t]&&egret.Tween.removeTweens(this[t]),this.effectList.splice(e,1))},e.prototype.onApplicationFocus=function(){this.removeAllAnimation(),this.removeAllTimeList(),this.removeAllIntervalList()},e}(eui.Group);__reflect(BaseGroup.prototype,"BaseGroup");var BaseItem=function(t){function e(){var e=t.call(this)||this;return e.effectList=[],e.timeList=[],e.intervalList=[],e.animationList=[],e}return __extends(e,t),e.prototype.pushAnimation=function(t){this.deleteAnimation(t),this.animationList.indexOf(t)<0&&this.animationList.push(t)},e.prototype.deleteAnimation=function(t){var e=this.animationList.indexOf(t);e>-1&&(this[t].stop(),this[t].visible=!1,this[t].source="",this.animationList.splice(e,1))},e.prototype.removeAllAnimation=function(){for(var t=0,e=this.animationList,i=e.length;i>t;t++)this[e[t]].stop(),this[e[t]].visible=!1;this.animationList=[]},e.prototype.pushTimeList=function(t){this.deleteTimeList(t),this.timeList.indexOf(t)<0&&this.timeList.push(t)},e.prototype.deleteTimeList=function(t){var e=this.timeList.indexOf(t);e>-1&&(-1!=this[t]&&(egret.clearTimeout(this[t]),this[t]=-1),this.timeList.splice(e,1))},e.prototype.removeAllTimeList=function(){for(var t=0,e=this.timeList,i=e.length;i>t;t++)-1!=this[e[t]]&&(egret.clearTimeout(this[e[t]]),this[e[t]]=-1);this.timeList=[]},e.prototype.pushIntervalList=function(t){this.deleteIntervalList(t),this.intervalList.indexOf(t)<0&&this.intervalList.push(t)},e.prototype.deleteIntervalList=function(t){var e=this.intervalList.indexOf(t);e>-1&&(-1!=this[t]&&(egret.clearInterval(this[t]),this[t]=-1),this.intervalList.splice(e,1))},e.prototype.removeAllIntervalList=function(){for(var t=0,e=this.intervalList,i=e.length;i>t;t++)-1!=this[e[t]]&&(egret.clearInterval(this[e[t]]),this[e[t]]=-1);this.intervalList=[]},e.prototype.pushEffectList=function(t){this.deleteEffectList(t),this.effectList.indexOf(t)<0&&this.effectList.push(t)},e.prototype.deleteEffectList=function(t){var e=this.effectList.indexOf(t);e>-1&&(-1!=this[t]&&egret.Tween.removeTweens(this[t]),this.effectList.splice(e,1))},e.prototype.removeAllEffectList=function(){for(var t=0,e=this.effectList,i=e.length;i>t;t++)-1!=this[e[t]]&&egret.Tween.removeTweens(this[e[t]]);this.effectList=[]},e.prototype.onApplicationFocus=function(){this.removeAllAnimation(),this.removeAllEffectList(),this.removeAllTimeList(),this.removeAllIntervalList()},e}(uiCore.ItemView);__reflect(BaseItem.prototype,"BaseItem");var BaseWindow=function(t){function e(){var e=t.call(this)||this;return e.stretch(),e}return __extends(e,t),e.prototype.start=function(){this.closeBTN&&this.closeBTN.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.bgRect&&this.bgRect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},e.prototype.onDestroy=function(){this.closeBTN&&this.closeBTN.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.bgRect&&this.bgRect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},e}(uiCore.Window);__reflect(BaseWindow.prototype,"BaseWindow");var KVDicKEnum;!function(t){t[t.kIcon=0]="kIcon",t[t.kName=1]="kName",t[t.kRechServi=2]="kRechServi",t[t.kExchServi=3]="kExchServi",t[t.kCusServi=4]="kCusServi",t[t.kLinkCusServi=5]="kLinkCusServi",t[t.kCantShopMsg=6]="kCantShopMsg",t[t.kFristRech=7]="kFristRech",t[t.kQQCusServiQR=8]="kQQCusServiQR",t[t.kWxCusServiQr=9]="kWxCusServiQr",t[t.kVitalNotif=10]="kVitalNotif",t[t.kBankCardInfoMsg=11]="kBankCardInfoMsg"}(KVDicKEnum||(KVDicKEnum={}));var GameData=function(){function t(){this._userData={},this._KVDic=[]}return t.getInstance=function(){return t.instance||(t.instance=new t,t.instance.requestKVDicData()),t.instance},t.prototype.userData=function(t){return"undefined"!=this._userData[t]?this._userData[t]:null},t.prototype.setUserData=function(t,e){this._userData[t]=e},t.prototype.clearUserData=function(){this._userData={}},t.prototype.requestLoggedInData=function(){this.requestServiceCustomerData()},t.prototype.requestKVDicData=function(){var e={},i=(new Date).getTime()+"",n=uiCore.Utils.md5(HttpContractType.GetKeyConfig.toString()+JSON.stringify(e)+LibCore.GameConfig.http_sign_key+i).toUpperCase(),s={Protocol:HttpContractType.GetKeyConfig,Data:JSON.stringify(e),Sign:n,Timestamp:i};uiCore.HttpManager.getInstance().send(LibCore.GameConfig.http_base_url+LibCore.GameConfig.http_port+LibCore.GameConfig.http_login_url,s,egret.URLRequestMethod.POST,function(e){var i=JSON.parse(e.Data);1==i.Code?this._KVDic=i.List:t.instance.requestKVDicData()},function(){egret.setTimeout(function(){t.instance.requestKVDicData()},this,1e3)},this)},t.prototype.requestExchange=function(){},t.prototype.requestServiceCustomerData=function(){var e=t.getInstance().userData("username"),i=t.getInstance().userData("passward"),n={AccountName:e,Password:i},s=(new Date).getTime()+"",o=uiCore.Utils.md5(HttpContractType.GetServiceCustomer.toString()+JSON.stringify(n)+LibCore.GameConfig.http_sign_key+s).toUpperCase(),r={Protocol:HttpContractType.GetServiceCustomer,Data:JSON.stringify(n),Sign:o,Timestamp:s};uiCore.HttpManager.getInstance().send(LibCore.GameConfig.http_base_url+LibCore.GameConfig.http_port+LibCore.GameConfig.http_login_url,r,egret.URLRequestMethod.POST,function(e){var i=JSON.parse(e.Data);1==i.Code?this._ServiceCustomer=i.ServiceWay.split(",",2):t.instance.requestServiceCustomerData()},function(){egret.setTimeout(function(){t.instance.requestServiceCustomerData()},this,1e3)},this)},t.prototype.GetGameConfig=function(t){var e="";return this._KVDic.forEach(function(i){i.ConfigKey==KVDicKEnum[t]&&(e=i.ConfigValue)}),e},t.prototype.GetServiceCustomer=function(){return this._ServiceCustomer},t}();__reflect(GameData.prototype,"GameData");var SystemMsg=function(){function t(){this._TIMER_INTERVAL=1e3,this.gamelist=[],this.speed=.2,this.isRunning=!1,this._isFirstTime=!1,this.systemList=[]}return t.getInstance=function(){return t.instance||(t.instance=new t,t.instance._timer=new egret.Timer(t.instance._TIMER_INTERVAL),t.instance._timer.addEventListener(egret.TimerEvent.TIMER,t.instance.on_timer_run,t.instance)),t.instance},t.ws_onSystemMsg=function(e){var i=this;e.forEach(function(e){t.instance?t.instance.push(e):i.preloadList.push(e)})},t.prototype.skin=function(t,e,i){t&&e&&i&&(this.group&&this.group.visible?(this._curX=this.label.x,this._isFirstTime=!0):this._isFirstTime=!1,this.group=t,this.label=e,this.scroller=i,this.isRunning=!1,this.check())},t.prototype.check=function(){if(t.preloadList.length>0)for(var e=0;e<t.preloadList.length;e++)this.push(t.preloadList.shift());this._timer.running||this._timer.start()},t.prototype.push=function(t){if(t.ID>0){for(var e=!0,i=0;i<this.systemList.length;i++)if(t.ID==this.systemList[i].ID){e=!1;break}e&&this.systemList.push(t)}else this.group&&this.label&&this.scroller&&this.gamelist.push(t)},t.prototype.checkRemoveSystemMsg=function(){for(var t=0;t<this.systemList.length;t++)if(this.checkRemoveList(this.systemList[t])){this.systemList.splice(t,1);break}},t.prototype.checkRemoveList=function(t){var e=!1;return Date.parse((new Date).toString())>t.EndTime?e=!0:0==t.PlayCount&&(e=!0),e},t.prototype.getMsgContent=function(){for(var t=null,e=Date.parse((new Date).toString()),i=0;i<this.systemList.length;i++)e>=this.systemList[i].BeginTime&&e<=this.systemList[i].EndTime&&0!=this.systemList[i].PlayCount&&(t?t.Level<this.systemList[i].Level&&(t=this.systemList[i]):t=this.systemList[i]);
return t||this.gamelist.length>0&&(t=this.gamelist.shift()),t},t.prototype.on_timer_run=function(){if(this.checkRemoveSystemMsg(),!this.isRunning){var t=this.getMsgContent(),e=null;if(t){if(this.group.visible=!0,0!=t.ID){-1!=t.PlayCount&&(t.PlayCount-=1);var i=Date.parse((new Date).toString())+60*t.TimeInterval*1e3;i>=t.EndTime&&(i=t.EndTime),t.BeginTime=i,e=t.Content}else e="<font size='20' fontFamily='微软雅黑'>恭喜！<font color='0x0dff00'>"+t.UserName+"</font>在<font color='0xead372'>"+t.ServerName+"</font>打死了一条<font color='0xead372'>"+t.FishName+"</font>！获得<font color='0xfee60a'>"+t.WinGold+"</font>金币！！！</font>";console.log("ID:"+t.ID+"  BeginTime:"+t.BeginTime/60/1e3+"   PlayCount:"+t.PlayCount+"    "+t.Content),this.label.textFlow=uiCore.StringUtils.textToRichText(e);var n;this._isFirstTime?(this.label.x=this._curX,this._isFirstTime=!1,n=(this.label.x+this.label.width)/this.speed):(this.label.x=this.label.width,n=(this.label.width+this.label.width)/this.speed),egret.Tween.get(this.label).to({x:-this.label.width},n).call(this.over,this,[this.label]),this.isRunning=!0}else this.group.visible=!1}},t.prototype.over=function(t){t==this.label&&(this.isRunning=!1,egret.Tween.removeTweens(this.label))},t.preloadList=[],t}();__reflect(SystemMsg.prototype,"SystemMsg");var CommonProgressTimer=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shapeX=0,e.shapeY=0,e._value=0,e.widthNum=.6,e}return __extends(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){var e=this._value!=t;this._value=t,e&&this.updateNow()},enumerable:!0,configurable:!0}),e.prototype.childrenCreated=function(){this.shapeX=this.x+this.width/2,this.shapeY=this.y+this.height/2},e.prototype.updateNow=function(){this.visible=0!=this.value,this.shape&&this.parent.removeChild(this.shape);var t=this.value/100*360;this.shape=uiCore.DisplayUtils.getSector(this.width*this.widthNum,0,t),this.shape.rotation=-90,this.shape.x=this.shapeX,this.shape.y=this.shapeY,this.parent.addChild(this.shape),this.mask=this.shape},e}(eui.Image);__reflect(CommonProgressTimer.prototype,"CommonProgressTimer");var CreateBullet_request=function(){function t(){this.ListBulletContract=[]}return t}();__reflect(CreateBullet_request.prototype,"CreateBullet_request");var CatchFish_request=function(){function t(){this.ListHitFishContract=[]}return t}();__reflect(CatchFish_request.prototype,"CatchFish_request");var bombFish_request=function(){function t(){this.CatchFishList=[]}return t}();__reflect(bombFish_request.prototype,"bombFish_request");var FishGameController=function(){function t(){}return t.timerSendMesasge=function(){if(this.creatBullets.length>0){var t=new CreateBullet_request;t.ListBulletContract=this.creatBullets,Net.GameService.send(FishGameContractType.CREATE_BULLET,t,GameData.getInstance().userData("serverid")),this.creatBullets=[]}if(this.bulletHitFishs.length>0){var e=new CatchFish_request;e.ListHitFishContract=this.bulletHitFishs,Net.GameService.send(FishGameContractType.CATCH_FISH,e,GameData.getInstance().userData("serverid")),this.bulletHitFishs=[]}},t.sendLogin=function(t,e){GameData.getInstance().setUserData("serverid",e);var i=GameData.getInstance().userData("username"),n=GameData.getInstance().userData("signText"),s=GameData.getInstance().userData("agentId"),o={AccountName:i,Sign:n,AgentID:s,LoginDeviceID:uiCore.Utils.getIMEI(),GameID:t,ServerID:e};Net.GameService.send(HallSocketType.LoginGame,o,e),uiCore.Application.addSetTimeCloseLoaddingTip()},t.onLogin=function(t){if(0==t.LoginResultType)null!=this.currentDesk&&1==this.currentDesk.succeed?(this.currentDeskisOnGame=!0,this.currentDesk.JoinMode=3,this.sendJoinDesk(this.currentDesk,this.maxPlay)):(this.currentDeskisOnGame=!1,DeskController.init());else{var e=uiCore.LangUtils.getMsgById(13);4==t.LoginResultType?e=uiCore.LangUtils.getMsgById(7):5==t.LoginResultType&&(e=uiCore.LangUtils.getMsgById(14)),uiCore.Application.closeLoaddingTip(e)}},t.sendLoadComplete=function(t){Net.GameService.send(FishGameContractType.LOAD_COMPLETE,{isReconnect:t},GameData.getInstance().userData("serverid"))},t.sendGetCreatedFish=function(){Net.GameService.send(FishGameContractType.CREATED_FISH,{},GameData.getInstance().userData("serverid"))},t.onDesk=function(t){},t.sendJoinDesk=function(t,e){this.ServerCurStateTwo=0,this.ServerCurState=0,this.currentDesk=t,this.currentDesk.succeed=!1,this.maxPlay=e,Net.GameService.send(FishGameContractType.LOGIJOIN_DESKN,t,GameData.getInstance().userData("serverid")),uiCore.Application.addSetTimeCloseLoaddingTip()},t.onJoinDesk=function(t){t.gamePlayerContract.userId==GameData.getInstance().userData("userId")&&(this.selfplayerInfo=t.gamePlayerContract),this.isLoadFishGameRoot?t.gamePlayerContract.userId==this.selfplayerInfo.userId?(null!=this.currentDesk&&(this.currentDesk.succeed=!0),this.ServerCurStateTwo=1,1==this.currentDeskisOnGame?(this.sendLoadComplete(!0),this.sendGetCreatedFish()):this.isOnGame&&1==this.ServerCurState?this.gameView.initSelfPlayerInfo(this.selfplayerInfo):uiCore.Application.openGameTips()):this.isOnGame&&this.gameView.initPlayer(t.gamePlayerContract):t.gamePlayerContract.userId==GameData.getInstance().userData("userId")&&(null!=this.currentDesk&&(this.currentDesk.succeed=!0),this.createFishGame())},t.ChangeBgAudio=function(t){uiCore.ExternalInterfaceUtils.inGame&&uiCore.SoundByteManager.playMusic(this.Audios[t+15])},t.PlayFishAudio=function(t){13==t||14==t?uiCore.SoundByteManager.playEffect(this.Audios[t]):uiCore.SoundByteManager.playEffect(this.Audios[t])},t.playGenAudio=function(t){var e=21;t&&(e=22),uiCore.SoundByteManager.playEffect(this.Audios[e])},t.createFishGame=function(){return this.gameView||FishGameManager.checkFishConfig()?void uiCore.Alert.show(uiCore.LangUtils.getMsgById(15),function(){uiCore.Utils.reloadPage()}):(uiCore.ZipManager.initFont(["fishAndPillarFont","gunFont","gunGoldFont","powerFont","silverFont"]),this.gameView=new FishGameSceneView,uiCore.Application.changeScene(this.gameView),this.isLoadFishGameRoot=!0,this.gameView.initMaxPlay(this.currentDesk.maxPlay),this.gameView.reset(),DeskController.destroy(),this.noOperateTime=0,this.showExitTipTimer=new egret.Timer(1e3,0),this.showExitTipTimer.addEventListener(egret.TimerEvent.TIMER,this.ExitTipTimer,this),void this.showExitTipTimer.start())},t.ExitTipTimer=function(){this.noOperateTime++,null!=this.gameSetting&&(this.noOperateTime>=this.gameSetting.TimeToTip/2&&null!=this.gameView&&(this.tipslabel--,this.gameView.FishtipsLable(!0,this.tipslabel)),this.noOperateTime>this.gameSetting.TimeToTip-1&&t.sendQuitDesk()),this.gameView&&this.gameView.allFishes&&this.gameView.allFishes.checkPoolNum()},t.onFishGameSetting=function(t){return this.gameSetting=t,this.tipslabel=this.gameSetting.TimeToTip/2,this.ServerCurState=this.gameSetting.ServerStateCode||0,1!=this.ServerCurState?void uiCore.Application.openGameTips():(this.isOnGame=!0,this.gameView.isInFishArray=this.gameSetting.OnFishArry,this.gameView.fishArrayType=this.gameSetting.FishArrayType,this.gameView.setFireDuration(this.gameSetting.FireRate),void(1==this.currentDeskisOnGame&&this.gameView.initSelfPlayerInfo(this.selfplayerInfo)))},t.onOutForServer=function(t){this.ServerCurState=t.code,1!=t.code&&this.isOnGame&&uiCore.Application.openGameTips()},t.isOnLine=function(){return 1==this.ServerCurState&&1==this.ServerCurStateTwo},t.onCreateFish=function(t){this.isOnGame&&this.gameView.createFishInfo(t)},t.onCreateFishArray=function(t){this.isOnGame&&this.gameView.createFishArray(t)},t.sendBombFish=function(t){var e=new bombFish_request;e.CatchFishList=t,Net.GameService.send(FishGameContractType.BOMB_FISH,e,GameData.getInstance().userData("serverid"))},t.onBombFish=function(t){this.isOnGame&&t&&this.gameView.bombFish(t)},t.getFishGameSetting=function(){return this.gameSetting},t.getGameView=function(){return this.gameView},t.getSelfPlayerInfo=function(){return this.selfplayerInfo},t.onCatchFish=function(t){this.isOnGame&&this.gameView.catchFish(t.CatchFish)},t.sendCreateBullet=function(t,e){t.DelayTime=0,e&&(this.noOperateTime=0,null!=this.gameView&&(this.tipslabel=this.gameSetting.TimeToTip/2,this.gameView.FishtipsLable(!1,50),this.gameView.fastbg.visible||(t.DelayTime=1))),Net.SocketService.instance.connected&&uiCore.ExternalInterfaceUtils.inGame&&this.creatBullets.push(t)},t.sendQuitDesk=function(){uiCore.Application.addGameOutTime(),DeskController.init(),Net.GameService.send(FishGameContractType.QUIT_DESK,{PlayerID:GameData.getInstance().userData("userId")},GameData.getInstance().userData("serverid")),this.clearGame()},t.onQuitDesk=function(t){this.isOnGame&&this.gameView.quitPlayer(t.gamePlayerContract)},t.sendCatchFish=function(t){this.bulletHitFishs.push(t)},t.onLockFish=function(t){this.isOnGame&&this.gameView.setLockFish(t)},t.GetRobotHitFishOdds=function(t,e){this.isOnGame&&this.gameView.RootGetHitFish(t,e)},t.onCreateBullet=function(t){this.isOnGame&&this.gameView.createBullet(t)},t.onCannon=function(t){this.isOnGame&&this.gameView.setCannonGen(t)},t.onRobotAgent=function(t){this.isOnGame&&this.gameView.setRobot(t)},t.sendCatchFishBalance=function(){Net.GameService.send(FishGameContractType.CATCH_FISH_RECORD,{},GameData.getInstance().userData("serverid"))},t.sendLockFish=function(t){this.isOnGame&&Net.GameService.send(FishGameContractType.LOCK_FISH,t,GameData.getInstance().userData("serverid"))},t.clearGame=function(){this.gameView&&(this.showExitTipTimer&&(this.showExitTipTimer.stop(),this.showExitTipTimer.removeEventListener(egret.TimerEvent.TIMER,this.ExitTipTimer,this)),this.gameView.isInFishArray=!1,FishnetPool.Dispose(),this.currentDesk=null,this.currentDeskisOnGame=!1,this.isOnGame=!1,this.isLoadFishGameRoot=!1,this.gameView.Destroy(),this.gameView=null)},t.currentDeskisOnGame=!1,t.isLoadFishGameRoot=!1,t.ServerCurState=0,t.ServerCurStateTwo=0,t.noOperateTime=0,t.tipslabel=0,t.creatBullets=[],t.bulletHitFishs=[],t.Audios={1:"voice1",2:"voice2",3:"voice3",4:"voice4",5:"voice5",6:"voice6",7:"voice7",8:"voice8",9:"voice9",10:"voice10",11:"voice11",12:"voice13",13:"Wave",14:"HitCoin",15:"BG0_1",16:"BG0_2",17:"BG0_3",19:"net1",20:"net2",21:"pao1",22:"pao2"},t}();__reflect(FishGameController.prototype,"FishGameController");var FishGamegetNumView=function(t){function e(e){var i=t.call(this)||this;return i.count=30,i.skinName="FishGameNumfish",i.gameid=e,i}return __extends(e,t),e.prototype.start=function(){this.initEvent()},e.prototype.initEvent=function(){this.downtime.text="30";var t=GameData.getInstance().userData("gold_num");t>=0&&(LibCore.GameConfig.IsPayExchange&&SceneManager.exchangeValue&&(t=(t/SceneManager.exchangeValue).toFixed(2)),this.goldnum.text=t),this.tipstim=new egret.Timer(1e3,30),this.tipstim.addEventListener(egret.TimerEvent.TIMER,this.FishtipsLable,this),this.tipstim.start(),this.closebtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClosebtn,this),this.Continuebtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onContinuebtn,this),this.Exitbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitgamebtn,this)},e.prototype.getCathFishNum=function(t){for(var e=1;e<t.FishCatchRecord.length;e++){var i=10>e?"0"+e:e+"";this["killfish"+i+"Label"].text=t.FishCatchRecord[e-1],"0"!=this["killfish"+i+"Label"].text&&(this["killfish"+i].source="killfish_"+i)}LibCore.GameConfig.IsPayExchange&&SceneManager.exchangeValue&&(t.TotalCatchMoney=(t.TotalCatchMoney/SceneManager.exchangeValue).toFixed(2)),this.totalgold.text=t.TotalCatchMoney},e.prototype.FishtipsLable=function(){this.downtime.text=""+this.count--,0==this.count&&uiCore.Application.closeWindow(this)},e.prototype.onClosebtn=function(){uiCore.Application.closeWindow(this)},e.prototype.onExitgamebtn=function(){uiCore.Application.closeWindow(this),uiCore.Application.closeGameSetTime(),FishGameController.sendQuitDesk(),uiCore.SoundByteManager.playMusic("BgMusic")},e.prototype.onContinuebtn=function(){uiCore.Application.closeWindow(this),this.count=30},e.prototype.removeEvent=function(){this.tipstim&&(this.tipstim.stop(),this.tipstim.removeEventListener(egret.TimerEvent.TIMER,this.FishtipsLable,this)),this.closebtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClosebtn,this),this.Continuebtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onContinuebtn,this),this.Exitbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitgamebtn,this)},e.prototype.onDestroy=function(){this.removeEvent(),t.prototype.onDestroy.call(this)},e}(uiCore.Window);__reflect(FishGamegetNumView.prototype,"FishGamegetNumView");var FishGameManager=function(){function t(){}return t.initFishManager=function(e){var i=RES.getRes(e);i?(this.fishObjects=[],this.fishGameDic={},this.groupPathDic={},this.pathDic={},this.fishDic={},this.fishPathNames=[],JSZip.loadAsync(i).then(function(e){e.forEach(function(e,i){t.initConfig(e,i)})})):RES.getResAsync(e,this.checkFishManager,this)},t.checkFishManager=function(t,e){this.initFishManager(e)},t.initConfig=function(t,e){var i=this;e.dir||(t.indexOf("fishs.json")>=0?e.async("string").then(function(t){i.fishObjects=JSON.parse(t)}):t.indexOf("fishgames.json")>=0?e.async("string").then(function(t){i.loadFishGame(JSON.parse(t))}):t.indexOf("fishPaths")>=0&&(t=t.substr(10,t.length-15),this.fishPathNames.push(t),e.async("string").then(function(e){i.initFishPath(t,JSON.parse(e))})))},t.loadFishGame=function(t){for(var e=0;e<t.length;e++)this.fishGameDic[t[e].gameId]=t[e]},t.initFishPath=function(t,e){uiCore.StringUtils.textIndexOf(t,"group_")?this.groupPathDic[t]=e:uiCore.StringUtils.textIndexOf(t,"groupfont_")?this.fishDic[t]=e:uiCore.StringUtils.textIndexOf(t,"grouproat_")?this.groupPathDic[t]=e:uiCore.StringUtils.textIndexOf(t,"large_")?this.pathDic[t]=e:uiCore.StringUtils.textIndexOf(t,"small_")&&(this.pathDic[t]=e)},t.checkFishConfig=function(){if(null==this.fishPathNames||0==this.fishPathNames.length)return!0;if(null==this.fishObjects||0==this.fishObjects.length)return!0;if(null==this.groupPathDic||uiCore.Utils.checkNullObj(this.groupPathDic))return!0;if(null==this.pathDic||uiCore.Utils.checkNullObj(this.pathDic))return!0;if(null==this.fishDic||uiCore.Utils.checkNullObj(this.fishDic))return!0;if(null==this.fishGameDic||uiCore.Utils.checkNullObj(this.fishGameDic))return!0;for(var t=!1,e=0;e<this.fishPathNames.length;e++)if(!this.groupPathDic[this.fishPathNames[e]]&&!this.pathDic[this.fishPathNames[e]]&&!this.fishDic[this.fishPathNames[e]]){t=!0;break}return t},t.deltaTime=0,t}();__reflect(FishGameManager.prototype,"FishGameManager");var FishGameRateView=function(t){function e(e){var i=t.call(this)||this;return i.skinName="FishGameRateSkin",i.gameid=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){var t=new eui.Image;t.source=this.gameid+"rate_png",this.addChild(t),t.width=900,t.height=500,t.horizontalCenter=.5,t.verticalCenter=-16,this.closebtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClosebtn,this)},e.prototype.onClosebtn=function(){uiCore.Application.closeWindow(this)},e.prototype.removeEvent=function(){this.closebtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClosebtn,this)},e.prototype.onDestroy=function(){this.removeEvent(),t.prototype.onDestroy.call(this)},e}(uiCore.Window);__reflect(FishGameRateView.prototype,"FishGameRateView");var FishGameSceneView=function(t){function e(){var e=t.call(this)||this;return e.clearIndx=10,e.isUpSideDown=!1,e.isInFishArray=!1,e.isPlayingWave=!1,e.IsAutoFire=!1,e.ExitTips=new eui.Label,e.PosToViewPort=new egret.Point,e.fishPoint=new egret.Point,e.currTime=0,e.skinName="FishGameSceneSkin",e.preloadFishs=new Array,e.bulletMap={},e.fishGens=[],e.bulletPool=[],e.isInFishArray=!1,e.fireRate=200,e.fireTimer=new egret.Timer(200,0),e.fireTimer.addEventListener(egret.TimerEvent.TIMER,e.thisGenFire,e),e.isShowSelfPlayerGenPosion=!1,e}return __extends(e,t),e.prototype.start=function(){uiCore.Application.addGameSetTime(),this.waterLightResize(),this.robotTimer=new egret.Timer(100,0),this.robotTimer.addEventListener(egret.TimerEvent.TIMER,this.robotFire,this),this.robotTimer.start(),uiCore.MovieClipManager.init(["fish","goldone","goldten","lockRotation","waterupdate","GoldSilverCoin"]),uiCore.MovieClipManager.init(["fish1","fish2","fish3","fish4","fish5","fish6"]),uiCore.MovieClipManager.init(["fish7"]),uiCore.ParticleManager.init(["bowen"]),FishGameController.sendLoadComplete(!1),FishGameController.sendGetCreatedFish(),this.initEvent(),this.showExitTips(),mouse.enable(this.stage),mouse.setMouseMoveEnabled(!0),this.touchEnabled=!0,egret.Capabilities.isMobile?this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.getMouseMove,this):this.addEventListener(mouse.MouseEvent.MOUSE_MOVE,this.getMouseMove,this),this.bulletGroup.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.fireEventBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.fireEventEnd,this),GameData.getInstance().setUserData("position",3);var t=!0;uiCore.LangUtils.getLangType()==uiCore.LangUtils.ZH_CN||LibCore.GameConfig.IsMessageOpen||(t=!1),this.noticeItemGroup.visible=t,t&&SystemMsg.getInstance().skin(this.noticeItemGroup,this.noticeLabel,this.noticeScroller)},e.prototype.waterLightResize=function(){this.waterLightGroup.scaleX=this.stage.stageWidth/1280,this.waterLightGroup.scaleY=this.stage.stageHeight/720},e.prototype.robotFire=function(){for(var t in this.bulletMap){var e=this.getFishGenBySeatNo(Number(t)),i=this.bulletMap[t];if(e&&i&&i.length>0){var n=i.shift();0==n.DelayTime?e.createBullet(n):(n.DelayTime=0,i.unshift(n))}}},e.prototype.DoubleFalse=function(){var t=0,e=30;0==this.arrowbtn.rotation&&(t=180,e=-110),egret.Tween.get(this.featuresGroupLeft).to({left:e},500).call(function(){egret.Tween.removeTweens(this.featuresGroupLeft)},this),egret.Tween.get(this.featuresGroupRight).to({right:e},500).call(function(){egret.Tween.removeTweens(this.featuresGroupRight),this.arrowbtn.rotation=t},this)},e.prototype.getMouseMove=function(t){this.PosToViewPort.x=t.stageX,this.PosToViewPort.y=t.stageY},e.prototype.fireEventEnd=function(t){!this.autobg.visible&&this.fireTimer.running&&(this.fireEventOutTimeId=egret.setTimeout(function(){this.fireTimer.stop()},this,this.fireTimerdelay))},e.prototype.fireEventBegin=function(t){if(this.PosToViewPort.x=t.stageX,this.PosToViewPort.y=t.stageY,this.lockbg.visible){var e=this.getAllFishes();if(e.length>0)for(var i in e)if(e[i].isRunning&&this.fishGens&&e[i].FishId>uiCore.Application.lockminfish&&e[i].hitTestPoint(t.stageX,t.stageY,!1)){e[i].OnPress();break}}this.autobg.visible||this.fireTimer.running||(this.fireEventOutTimeId&&egret.clearTimeout(this.fireEventOutTimeId),this.fireTimer.start(),this.fireTimer.delay=this.fireTimerdelay)},e.prototype.reset=function(){this.bulletPool=["xbullet1_01","xbullet2_01","xbullet3_01","xbullet4_01","xbullet5_01","xbullet6_01"];for(var t=0;t<this.maxPlay;t++){this.fishGens[t]=new FishGen;var e=uiCore.Application.app.stage.stageWidth/100;t<this.maxPlay/2?(this.fishGens[t].bottom=0,this.fishGens[t].left=25*e+33*t*e-80*(t+1)):(this.fishGens[t].top=0,this.fishGens[t].right=25*e+33*(t-3)*e-80*(t-2),this.fishGens[t].rotation=180),this.fishGens[t].name=t+"",this.fishGens[t].SetId(t),this.upGroup.addChild(this.fishGens[t])}this.allFishes=new FishPool(this.fishBorn)},e.prototype.fishGenResize=function(){for(var t=0;t<this.maxPlay;t++){var e=uiCore.Application.app.stage.stageWidth/100;t<this.maxPlay/2?this.fishGens[t].left=25*e+33*t*e-80*(t+1):this.fishGens[t].right=25*e+33*(t-3)*e-80*(t-2)}},e.prototype.fishBorn=function(t,e){void 0===e&&(e=!0);var i=uiCore.Application.currGameId,n=uiCore.MovieClipManager.getGenerateMovieClipData(t+"");if(null!=n){for(var s=void 0,o=0;o<FishGameManager.fishObjects.length;o++)if(FishGameManager.fishObjects[o].gameId==i&&FishGameManager.fishObjects[o].id==t){s=FishGameManager.fishObjects[o];break}if(s){var r=new Fish(s,e);return r.addChild(n),r}}return null},e.prototype.createFishInfo=function(t){if(this.isInFishArray)if("groupfont"==this.fishArrayType);else for(var e=0;e<t.FishList.length;e++)t.FishList[e].isFishArray=!0,t.FishList[e].isFishFont=!1,this.preloadFishs.push(t.FishList[e]);else for(var e=0;e<t.FishList.length;e++)t.FishList[e].isFishArray=!1,t.FishList[e].isFishFont=!1,this.preloadFishs.push(t.FishList[e])},e.prototype.createOneFish=function(t){var e=this.allFishes.getObject(t.FishId);if(e){if(3==e.fishSet.type||8==e.fishSet.type)for(var i=0;i<t.GroupFishId&&!(e.numChildren>1)&&!(t.GroupFishId[i]<1);i++){var n=uiCore.MovieClipManager.getGenerateMovieClipData(t.GroupFishId[i]+"");n&&e.addChild(n)}else if(4==e.fishSet.type){if(e.numChildren>1)for(var i=1;i<e.numChildren;i++)e.removeChildAt(i);var n=uiCore.MovieClipManager.getGenerateMovieClipData(t.GroupFishId[0]+"");n&&(e.addChild(n),this.setMcAnchorOff(n,t.GroupFishId[0]),e.globalToLocal(e.x,e.y,this.fishPoint),n.x=this.fishPoint.x,n.y=this.fishPoint.y)}e.initInfo(t)}},e.prototype.setMcAnchorOff=function(t,e){1==e?(t.anchorOffsetX=60,t.anchorOffsetY=11):2==e?(t.anchorOffsetX=50,t.anchorOffsetY=20):3==e?(t.anchorOffsetX=50,t.anchorOffsetY=20):4==e?(t.anchorOffsetX=60,t.anchorOffsetY=30):5==e?(t.anchorOffsetX=90,t.anchorOffsetY=25):6==e?(t.anchorOffsetX=80,t.anchorOffsetY=30):7==e?(t.anchorOffsetX=80,t.anchorOffsetY=23):8==e?(t.anchorOffsetX=90,t.anchorOffsetY=30):9==e?(t.anchorOffsetX=80,t.anchorOffsetY=30):10==e?(t.anchorOffsetX=60.5,t.anchorOffsetY=70):11==e?(t.anchorOffsetX=118,t.anchorOffsetY=45):12==e?(t.anchorOffsetX=100,t.anchorOffsetY=80):13==e?(t.anchorOffsetX=125,t.anchorOffsetY=40):14==e?(t.anchorOffsetX=150,t.anchorOffsetY=50):15==e?(t.anchorOffsetX=130,t.anchorOffsetY=125):16==e?(t.anchorOffsetX=200,t.anchorOffsetY=60):17==e?(t.anchorOffsetX=200,t.anchorOffsetY=60):18==e?(t.anchorOffsetX=200,t.anchorOffsetY=80):19==e?(t.anchorOffsetX=100,t.anchorOffsetY=150):20==e?(t.anchorOffsetX=98,t.anchorOffsetY=98):21==e?(t.anchorOffsetX=200,t.anchorOffsetY=230):22==e?(t.anchorOffsetX=30,t.anchorOffsetY=180):23==e?(t.anchorOffsetX=230,t.anchorOffsetY=100):24==e?(t.anchorOffsetX=220,t.anchorOffsetY=180):25==e?(t.anchorOffsetX=70,t.anchorOffsetY=70):26==e?(t.anchorOffsetX=80,t.anchorOffsetY=80):27==e?(t.anchorOffsetX=120,t.anchorOffsetY=80):(t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2)},e.prototype.getFishPathByname=function(t){return FishGameManager.fishDic[t]},e.prototype.removeAllFishs=function(){for(var t in this.fishGens)this.fishGens[t].setLockFish(null);this.allFishes.recoveryAllFish()},e.prototype.resetPlayerInfo=function(){for(var t=0;t<this.maxPlay;t++)this.fishGens[t].ResetInfo()},e.prototype.initSelfPlayerInfo=function(t){this.playerInfo=t,GameData.getInstance().setUserData("gold_num",t.userMoney),this.playerInfo.SeatNo>=this.maxPlay/2?this.isUpSideDown=!0:this.isUpSideDown=!1,1==this.isUpSideDown?(this.fishGens[this.playerInfo.SeatNo-this.maxPlay/2].initInfo(t),this.thisFishGen=this.fishGens[this.playerInfo.SeatNo-this.maxPlay/2]):(this.fishGens[this.playerInfo.SeatNo].initInfo(t),this.thisFishGen=this.fishGens[this.playerInfo.SeatNo])},e.prototype.initPlayer=function(t){var e=this.getFishGenBySeatNo(t.SeatNo);e&&e.initInfo(t)},e.prototype.setRobot=function(t){var e=this.getFishGenBySeatNo(t.SeatNo);e&&e.setRobot(!0)},e.prototype.quitPlayer=function(t){if(t.userId!=FishGameController.getSelfPlayerInfo().userId){var e=this.getFishGenBySeatNo(t.SeatNo);e&&e.ResetInfo()}},e.prototype.setLockFish=function(t){var e=this.getFishByTag(t.FishTag),i=this.getFishGenBySeatNo(t.SeatNo);i&&e&&!i.isSelfGen&&i.checkLockFishInScreen(e)&&i.setLockFish(e)},e.prototype.RootGetHitFish=function(t,e){var i=this.getFishGenBySeatNo(e);i&&i.SetGenHitFish(t)},e.prototype.createBullet=function(t){if(t&&t.ListBulletContract)for(var e=t.ListBulletContract,i=0;i<e.length;i++){var n=void 0;this.bulletMap[e[i].SeatNo]?n=this.bulletMap[e[i].SeatNo]:(n=[],this.bulletMap[e[i].SeatNo]=n),n.length>200||(0==n.length&&(e[i].DelayTime=0),n.push(e[i]))}},e.prototype.initMaxPlay=function(t){this.maxPlay=t||6},e.prototype.createFishArray=function(t){this.isInFishArray=t.IsOpen,this.fishArrayType=t.ArrayType,1==this.isInFishArray&&this.PlayWave()},e.prototype.PlayWave=function(){if(this.fishGens)for(var t=0;t<this.fishGens.length;t++)this.fishGens[t].setAware(!0);this.isPlayingWave=!0,this.markAllFishs();var e=0,i=(new Date).getTime();i%30>20?e=2:i%30>10&&(e=1),FishGameController.ChangeBgAudio(this.changeFishBGinterface(e))},e.prototype.WaveTimer=function(){if(this.removeAllMarkFishs(),this.fishGens)for(var t=0;t<this.fishGens.length;t++)this.fishGens[t].setAware(!1);this.isPlayingWave=!1},e.prototype.isPlayWave=function(){return this.isPlayingWave},e.prototype.markAllFishs=function(){this.allFishes.markFish()},e.prototype.removeAllMarkFishs=function(){this.allFishes.recoveryAllMark()},e.prototype.ContainFishTypeInScreen=function(t){return this.allFishes.getFishByType(t)},e.prototype.getAllFishes=function(){return this.allFishes.getAllActiveFish()},e.prototype.thisGenFire=function(){this.thisFishGen&&(this.thisFishGen.fire(),this.fireTimer.delay=this.fireTimerdelay)},e.prototype.setFireDuration=function(t){if(null==this.fireTimerdelay){this.fireRate=t,this.fireTimerdelay=this.fireRate;for(var e=0;e<this.fishGens.length;e++)this.fishGens[e].setFireRate(t)}},e.prototype.onPress=function(){this.thisFishGen&&this.thisFishGen.UpdateGenRotation()},e.prototype.setAutoFile=function(t){this.thisFishGen.GetAutoFile(t),t?(null!=this.fireEventOutTimeId&&egret.clearTimeout(this.fireEventOutTimeId),this.fireTimer.start()):this.fireTimer.stop()},e.prototype.bombFish=function(t){for(var e=0;e<t.CatchFishList.length;e++)t.CatchFishList[e].isBomCatch=!0,this.killFish(t.CatchFishList[e]);t.CatchFishList[0]&&t.CatchFishList[0].SeatNo==this.playerInfo.SeatNo&&egret.setTimeout(function(){for(var t=0;8>t;t++)egret.setTimeout(function(){FishGameController.PlayFishAudio(14)},this,100*t)},this,800)},e.prototype.createMoneyLabel=function(t,e,i){MoneyLabelPool.getMoneyLabelObject().Init(t,e,i)},e.prototype.CreateFlyCoin=function(t,e,i){var n=1;i>=30?n=10:i>=5&&(n=5);var s=Math.floor(i/n);1>s&&(s=1),s>10&&(s=10);for(var o=0;s>o;o++){var r=new egret.Point;t.localToGlobal(t.fishSeat.x,t.fishSeat.y,r),t.SeatNo>2&&(r.x-=49,r.y-=40),FlyCoinPool.getFlyCoinObject(n,t.isSelfGen).Init(new egret.Point(e.x,e.y),r,o,s)}},e.prototype.LockFishDead=function(t){if(this.fishGens)for(var e=0;e<this.fishGens.length;e++)this.fishGens[e].LockFishDead(t)},e.prototype.GetCoinCount=function(t){return t.fishSet.coinCount},e.prototype.GetFishOdds=function(t){return t.fishInfo.Odds},e.prototype.removeFish=function(t){this.allFishes.fishDie(t),this.LockFishDead(t)},e.prototype.DestroyFish=function(t){this.allFishes.recovery(t),this.LockFishDead(t)},e.prototype.IsInBombRange=function(t,e,i){var n=Math.floor(t.x-e.x),s=Math.floor(t.y-e.y),o=Math.sqrt(n*n+s*s);return o},e.prototype.getAllFishInBombRange=function(t,e){return this.allFishes.getAllFishInBombRange(t.x,t.y,t.fishSet.bombRange,e)},e.prototype.PlayBombFishEffect=function(t){uiCore.Application.vibrationScreen(),0>t&&this.ShowActivePaticel()},e.prototype.getFishById=function(t){return this.allFishes.getAllTheTypeFish(t)},e.prototype.KillSimilarFish=function(t,e,i){this.ShowActivePaticel();var n=new Array;if(4==e.fishSet.type)n=this.getFishById(e.fishInfo.GroupFishId[0]),n.push(e);else if(8==e.fishSet.type){n=this.getFishById(e.fishInfo.GroupFishId[0]);var s=new Array;s=this.getFishById(e.fishInfo.GroupFishId[1]);for(var o=0;o>s.length;o++)n.push(s[o]);n.push(e)}uiCore.Application.vibrationScreen();var r=function(){a.createMoneyLabel(t.isSelfGen,n[h],n[h].fishInfo.Odds*i);var e=new egret.Point(n[h].x,n[h].y),s=a.GetFishOdds(n[h]),o=t;egret.setTimeout(function(){this.CreateFlyCoin(o,e,s)},a,800),a.removeFish(n[h].FishTag)},a=this;for(var h in n)r();t.isSelfGen&&egret.setTimeout(function(){for(var t=0;8>t;t++)egret.setTimeout(function(){FishGameController.PlayFishAudio(14)},this,100*t)},this,800)},e.prototype.CreateSeaUrchinSubstitute=function(t,e,i,n,s,o){var r=this.allFishes.getObject(t);r&&(r.isRunning=!0,r.isFishFont=!1,r.FishTag=i,r.fishInfo=o,r.x=e.x,r.y=e.y,this.createMoneyLabel(n,r,s),this.removeFish(r.FishTag))},e.prototype.killSeaUrchin=function(t,e,i){if(t.fishInfo.GroupFishId&&t.fishInfo.GroupFishId[0]&&t.fishInfo.GroupFishId[0]>0){this.CreateSeaUrchinSubstitute(t.fishInfo.GroupFishId[0],new egret.Point(t.x,t.y),t.FishTag,e.isSelfGen,i,t.fishInfo);var n=new egret.Point(t.x,t.y),s=this.GetFishOdds(t),o=e;egret.setTimeout(function(){this.CreateFlyCoin(o,n,s),o.isSelfGen&&FishGameController.PlayFishAudio(14)},this,800)}else this.createMoneyLabel(e.isSelfGen,t,i),this.CreateFlyCoin(e,new egret.Point(t.x,t.y),this.GetFishOdds(t)),e.isSelfGen&&FishGameController.PlayFishAudio(14);this.DestroyFish(t.FishTag)},e.prototype.killFixedScreenBomb=function(t){this.FixedScreen=t,this.PlayFxiedEffect(),this.allFishes.FixedScreen(t)},e.prototype.PlayFxiedEffect=function(){},e.prototype.palyLunZiEffect=function(t,e){var i=this.getFishGenBySeatNo(t);if(i&&(this.lunziParticle(i,e),t==this.playerInfo.SeatNo)){var n=12;uiCore.LangUtils.getLangType()==uiCore.LangUtils.ZH_CN&&(n=uiCore.Utils.getRandom(1,12)),FishGameController.PlayFishAudio(n)}},e.prototype.getFishByTag=function(t){return this.allFishes.getFish(t)},e.prototype.getBulletPrefab=function(t,e){var i=1;return i=1==e&&7||t,this.bulletPool[i]},e.prototype.killFish=function(t){if(null!=t.SeatNo){var e=this.getFishByTag(t.FishTag);if(null!=e){var i=this.getFishGenBySeatNo(t.SeatNo);if(i)if(e.fishSet.type>0&&this.PlayLunzi(e.fishSet.id,t),4==e.fishSet.type||8==e.fishSet.type){var n=t.BulletOdds||10;this.KillSimilarFish(i,e,n)}else 5==e.fishSet.type?this.killSeaUrchin(e,i,t.WinMoney):this.fishDieProcess(e,i,t)}}},e.prototype.PlayLunzi=function(t,e){t>17&&(e.isBomCatch||this.palyLunZiEffect(e.SeatNo,e.WinMoney))},e.prototype.catchFish=function(t){var e=this.getFishGenBySeatNo(t.SeatNo);if(e){e.setGoldNum(t.AllMoney),e==this.thisFishGen&&GameData.getInstance().setUserData("gold_num",t.AllMoney);var i=this.getFishByTag(t.FishTag);i&&t.IsCatch&&(1==e.isInited&&e.CreateCoinColumn(t.WinMoney,i.fishInfo.Odds),2==i.fishSet.type?(FishGameController.sendBombFish(this.getAllFishInBombRange(i,t)),this.PlayBombFishEffect(i.fishSet.bombRange),this.palyLunZiEffect(t.SeatNo,t.WinMoney),this.fishDieProcess(i,e,t)):7==i.fishSet.type?(this.killFixedScreenBomb(FishGameController.getFishGameSetting().StopBombTime),this.removeFish(i.FishTag)):this.killFish(t))}},e.prototype.fishDieProcess=function(t,e,i){var n=new egret.Point(t.x,t.y),s=this.GetFishOdds(t),o=e,r=i.isBomCatch;egret.setTimeout(function(){this.CreateFlyCoin(o,n,s),r||o.isSelfGen&&FishGameController.PlayFishAudio(14)},this,800),this.createMoneyLabel(e.isSelfGen,t,i.WinMoney),this.removeFish(t.FishTag)},e.prototype.setCannonGen=function(t){var e=this.getFishGenBySeatNo(t.SeatNo);e&&e.setCannon(t.isOn)},e.prototype.changeFishBGinterface=function(t){var e,i,n,s=0,o=this.getChildIndex(this.fishBG0),r=this.getChildIndex(this.fishBG1),a=this.getChildIndex(this.fishBG2);return 2==o?(n=o,1==t?(i=this.fishBG1,e=r,this.fishBG2.visible=!1,s=1):(i=this.fishBG2,e=a,this.fishBG1.visible=!1,s=2)):2==r?(n=r,2==t?(i=this.fishBG2,e=a,this.fishBG0.visible=!1,s=2):(i=this.fishBG0,e=o,this.fishBG2.visible=!1)):(n=a,0==t?(i=this.fishBG0,e=o,this.fishBG1.visible=!1):(i=this.fishBG1,e=r,this.fishBG0.visible=!1,s=1)),this.changeFishBG(n,e,i),s},e.prototype.changeFishBG=function(t,e,i){i.visible=!1,this.swapChildrenAt(t,e);var n=new eui.Image;n.source="bg2_png",n.right=0,n.height=this.stage.stageHeight,n.width=0,n.visible=!1,this.addChild(n),i.mask=n,i.visible=!0;var s=uiCore.MovieClipManager.getGenerateMovieClipData("waterleft");egret.Tween.get(n,{onChange:this.onChange,onChangeObj:n}).to({width:this.stage.stageWidth},4e3,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(n),FishGameController.getGameView()&&(FishGameController.getGameView().removeChild(n),FishGameController.getGameView().WaveTimer())}),null!=s&&(this.addChild(s),s.scaleY=Math.ceil(this.stage.stageHeight/s.height),s.x=this.stage.stageWidth-s.width/3,s.gotoAndPlay("left",-1),egret.Tween.get(s).to({x:-s.width/3},4e3,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(s),FishGameController.getGameView()&&FishGameController.getGameView().removeChild(s)
}))},e.prototype.onChange=function(){if(FishGameController.getGameView()){var t=FishGameController.getGameView().allFishes.getAllSiwimming();if(t.length>0){var e=function(){if(1==t[n].alpha&&i.hitTestPoint(t[n].x,t[n].y,!1)){var e=t[n];egret.Tween.get(e).to({alpha:0},1e3).call(function(){egret.Tween.removeTweens(e)})}},i=this;for(var n in t)e()}}},e.prototype.mousePositionToViewPort=function(){return this.PosToViewPort},e.prototype.initEvent=function(){this.addEventListener(egret.Event.ENTER_FRAME,this.update,this),this.FishRateBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OpenFishRateView,this),this.fishlockbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnfishlockState,this),this.fishautobtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnFishautoState,this),this.fishfastbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnFishfastState,this),this.fishgetnumbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OpenFishnumView,this),this.fishsetbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OpenSettingView,this),this.arrowbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.DoubleFalse,this),this.shuangciGroup&&this.shuangciGroup.getDragonBonesEgret&&this.shuangciGroup.getDragonBonesEgret.addEventListener(dragonBones.EventObject.COMPLETE,this.dragonBoneCOMPLETE,this)},e.prototype.OpenFishRateView=function(){this.IsAutoFire||this.fireTimer.stop(),uiCore.Application.addWindow(new FishGameRateView(uiCore.Application.currGameId))},e.prototype.OpenFishnumView=function(){this.IsAutoFire||this.fireTimer.stop(),FishGameController.sendCatchFishBalance(),this.jiesuanView=new FishGamegetNumView(uiCore.Application.currGameId),uiCore.Application.addWindow(this.jiesuanView)},e.prototype.OpenSettingView=function(){uiCore.Application.addWindow(new GameSettingWindow),this.IsAutoFire||this.fireTimer.stop()},e.prototype.OnfishlockState=function(){this.IsAutoFire||this.fireTimer.stop(),this.featuresManager(this.lockbg,this.lockmc),this.thisFishGen.setWantToLockFish(this.lockbg.visible)},e.prototype.featuresManager=function(t,e){var i=e.getChildAt(0);t.visible?(egret.Tween.removeTweens(t),i.stop(),t.visible=!1,e.visible=!1):(egret.Tween.get(t,{loop:!0}).to({rotation:360},5e3),i.gotoAndPlay("play",-1),t.visible=!0,e.visible=!0)},e.prototype.OnFishfastState=function(){this.IsAutoFire||this.fireTimer.stop(),this.featuresManager(this.fastbg,this.fastmc),this.fastbg.visible?this.fireTimerdelay=this.fireRate/2:this.fireTimerdelay=this.fireRate},e.prototype.OnFishautoState=function(){this.IsAutoFire=!this.IsAutoFire,this.featuresManager(this.autobg,this.automc),this.setAutoFile(this.autobg.visible)},e.prototype.lunziParticle=function(t,e){LunziPool.getLunziObject().Init(t.x,t.y,e)},e.prototype.ShowActivePaticel=function(){if(this.shuangciGroup){this.shuangciGroup.visible=!0;var t=this.shuangciGroup.getDragonBonesEgret;t&&t.animation.play("newAnimation",5)}},e.prototype.dragonBoneCOMPLETE=function(t){this.shuangciGroup&&(this.shuangciGroup.visible=!1)},Object.defineProperty(e.prototype,"resourceList",{get:function(){return["fishGameGroup"]},enumerable:!0,configurable:!0}),e.prototype.update=function(){if(0==this.currTime)this.currTime=egret.getTimer();else{var t=egret.getTimer();FishGameManager.deltaTime=t-this.currTime,this.currTime=t}if(uiCore.Application.setbulletSuDu(),this.clearIndx--,this.clearIndx<=0&&(this.clearIndx=10,FishGameController.timerSendMesasge()),this.preloadFishs.length>0)for(var e=0;e<this.preloadFishs.length;e++){var i=this.preloadFishs.shift();i.FixedScreen=this.FixedScreen||0,this.createOneFish(i)}},e.prototype.getFishGenBySeatNo=function(t){var e;return t>=0&&(e=this.isUpSideDown?t>=this.maxPlay/2?this.fishGens[t-this.maxPlay/2]:this.fishGens[t+this.maxPlay/2]:this.fishGens[t]),e},e.prototype.showExitTips=function(){this.ExitTips.fontFamily="Microsoft YaHei",this.ExitTips.size=40,this.ExitTips.horizontalCenter="0",this.ExitTips.verticalCenter="0",this.FishtipsLable(!1,50),this.addChild(this.ExitTips)},e.prototype.showSelfPlayerGenPosion=function(t,e){this.isShowSelfPlayerGenPosion=!0;var i=new eui.Image;i.source="otherBlack",i.top=i.bottom=i.left=i.right=0,i.alpha=.8,this.addChild(i);var n=new eui.Image;n.source="otherGlow",this.addChild(n),n.x=t+40-109,n.bottom=0;var s=new eui.Image;s.source="otherYourPositionText",this.addChild(s),s.x=t+40-67,s.y=e-100;var o=new eui.Image;o.source="otherArrow",this.addChild(o),o.x=t+40-22,o.y=e-60,egret.setTimeout(function(){this.removeChild(i),this.removeChild(n),this.removeChild(s),this.removeChild(o)},this,3e3)},e.prototype.FishtipsLable=function(t,e){this.ExitTips.visible!=t&&(this.ExitTips.visible=t),this.ExitTips.visible&&(this.ExitTips.text=uiCore.StringUtils.format(uiCore.LangUtils.getMsgById(12),e))},e.prototype.ReconnectAllFish=function(){this.removeAllFishs(),this.allFishes.reconnectAllFish(),this.preloadFishs=[]},e.prototype.removeEvent=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.update,this),this.FishRateBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OpenFishRateView,this),this.fishlockbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnfishlockState,this),this.fishautobtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnFishautoState,this),this.fishfastbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnFishfastState,this),this.fishgetnumbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OpenFishnumView,this),this.fishsetbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OpenSettingView,this),this.arrowbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.DoubleFalse,this),egret.Capabilities.isMobile?this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.getMouseMove,this):this.removeEventListener(mouse.MouseEvent.MOUSE_MOVE,this.getMouseMove,this),this.bulletGroup.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.fireEventBegin,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.fireEventEnd,this),this.fireTimer&&(this.fireTimer.stop(),this.fireTimer.removeEventListener(egret.TimerEvent.TIMER,this.thisGenFire,this),this.fireTimer=null),this.robotTimer&&(this.robotTimer.stop(),this.robotTimer.removeEventListener(egret.TimerEvent.TIMER,this.robotFire,this),this.robotTimer=null),this.shuangciGroup&&this.shuangciGroup.getDragonBonesEgret&&this.shuangciGroup.getDragonBonesEgret.removeEventListener(dragonBones.EventObject.COMPLETE,this.dragonBoneCOMPLETE,this)},e.prototype.clearGen=function(){if(this.fishGens){for(var t in this.fishGens)this.fishGens[t].Dispose();this.fishGens=[]}},e.prototype.Destroy=function(){this.clearGen(),this.allFishes&&this.allFishes.reconnectAllFish(),LunziPool.Dispose(),FlyCoinPool.Dispose(),MoneyLabelPool.Dispose()},e.prototype.onDestroy=function(){this.removeEvent(),this.thisFishGen=null,this.allFishes=null,this.bulletMap=null,t.prototype.onDestroy.call(this)},e}(uiCore.Scene);__reflect(FishGameSceneView.prototype,"FishGameSceneView");var player_info=function(){function t(){}return t}();__reflect(player_info.prototype,"player_info");var CardLogic=function(){function t(){t.instance=this}return t.prototype.getCardPoit=function(t,e){return void 0===e&&(e=!1),0==t?0:(t=t%13+1,t>10&&!e&&(t=10),t)},t.prototype.getCardValue=function(t){return 0==t?0:t%13+1},t.prototype.getCardColor=function(t){return 53==t?4:54==t?5:1>=t/13?3:2>=t/13?2:3>=t/13?1:0},t.prototype.getCardByValue=function(t,e){for(var i=0;i<t.length;i++)if(this.getCardValue(t[i])==e)return t[i];return 0},t.prototype.SortByValue=function(t){var e=this;t.sort(function(t,i){return e.getCardValue(t)>e.getCardValue(i)?-1:e.getCardValue(t)<e.getCardValue(i)?1:0})},t.prototype.sortCardByValue=function(t,e){var i=this.getCardValue(t),n=this.getCardValue(e);return 1==i?1:1==n&&1!=i?-1:i>n?1:n>i?-1:0},t.prototype.sortCardByColor=function(t,e){var i=this.getCardColor(t),n=this.getCardColor(e);return i>n?-1:n>i?1:0},t.prototype.SortByCards=function(t){var e=!1,i=[];if(t)for(var n=0;n<t.length;n++)i.push(t[n]);for(var n=0;n<i.length&&!e;n++)for(var s=0;s<i.length&&!e;s++)for(var o=0;o<i.length;o++)if(n!=s&&n!=o&&o!=s){var r=this.getCardPoit(i[n]),a=this.getCardPoit(i[s]),h=this.getCardPoit(i[o]);if((r+a+h)%10==0){e=!0;var l=i[n],u=i[s],c=i[o];i.splice(i.indexOf(l),1),i.splice(i.indexOf(u),1),i.splice(i.indexOf(c),1);var p=[l,u,c];this.SortByValue(p),this.SortByValue(i),p.push(i[0]),p.push(i[1]),i=p;break}}return e||this.SortByValue(i),i},t.prototype.sortCardsByValue=function(t){for(var e=this,i=[],n=0;n<t.length;n++)i.push(t[n]);return i.sort(function(t,i){return e.sortCardByValue(t,i)}),i},t.prototype.sortCardsByColor=function(t){for(var e=this,i=[],n=0;n<t.length;n++)i.push(t[n]);return i.sort(function(t,i){return e.sortCardByColor(t,i)}),i},t.prototype.sortCardsByColorValue=function(t){var e,i=[],n=[[],[],[],[]];e=t.length;for(var s=0;e>s;s++){var o=t[s];n[3-this.getCardColor(o)].push(o)}for(var r=0,a=n.length;a>r;r++){var h=n[r];h.length>0&&(i=i.concat(this.sortCardsByValue(h)))}return i},t}();__reflect(CardLogic.prototype,"CardLogic");var LoginSceneView=function(t){function e(){var e=t.call(this)||this;return e.skinName="LoginSceneSkin",e.QuickLogin.skinName="public.Button12Skin",e}return __extends(e,t),e.prototype.start=function(){this.initEvent(),this.QuickLogin.label=uiCore.LangUtils.getMsgById(23),this.QuickLogin.visible=LibCore.GameConfig.IsLoginOpen},e.prototype.initEvent=function(){this.QuickLogin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.QuickLoginFunc,this)},e.prototype.removeEvent=function(){this.QuickLogin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.QuickLoginFunc,this)},e.prototype.onDestroy=function(){this.removeEvent(),t.prototype.onDestroy.call(this)},e.prototype.QuickLoginFunc=function(){uiCore.Application.addLoadding();var t={openIMEI:uiCore.Utils.getIMEI(),agent:LibCore.GameConfig.agentid};uiCore.HttpManager.getInstance().send(LibCore.GameConfig.http_visterlogin_url,t,egret.URLRequestMethod.POST,function(t){1==t.code?(GameData.getInstance().clearUserData(),GameData.getInstance().setUserData("signText",t.LoginSign),GameData.getInstance().setUserData("username",t.AccountName),GameData.getInstance().setUserData("userId",t.UserID),GameData.getInstance().setUserData("passward",t.Password),GameData.getInstance().setUserData("bankgoldnum",t.BankMoney),GameData.getInstance().setUserData("gold_num",t.Money),GameData.getInstance().setUserData("iconid",t.SystemIconID),GameData.getInstance().setUserData("viplevel",t.Viplevel),GameData.getInstance().setUserData("isnicknamechange",t.IsNickNameChange),GameData.getInstance().setUserData("agentId",LibCore.GameConfig.agentid),GameData.getInstance().setUserData("nickname",t.nickName),GameData.getInstance().setUserData("useragentid",t.UserAgentID),SceneManager.getExchange(),GameData.getInstance().requestLoggedInData(),this.chageScene(),Net.GameService.connect()):(uiCore.Application.removeLoadding(),uiCore.Alert.show(uiCore.LangUtils.getMsgById(11)))},function(){uiCore.Application.removeLoadding(),uiCore.Alert.show(uiCore.LangUtils.getMsgById(11))},this),uiCore.SoundByteManager.playMusic("BgMusic")},e.prototype.chageScene=function(){SceneManager.changeSceneView(MainSceneView)},e}(uiCore.Scene);__reflect(LoginSceneView.prototype,"LoginSceneView");var DeskController=function(){function t(){}return t.init=function(){null==this.DeskScene&&(this.DeskScene=new DeskSceneView,this.DeskPlayers={})},t.destroy=function(){this.DeskScene=null,this.DeskPlayers=null},t.ws_onDeskList=function(t){var e=this;uiCore.Application.closeSetTime(),null==FishGameController.getGameView()&&this.DeskScene&&(SceneManager.changeSceneView(this.DeskScene,!1),this.DeskScene.createDesk(t.ListDeskContract)),t.ListDeskContract.forEach(function(t){null!=t.ListGamePlayerContract&&t.ListGamePlayerContract.forEach(function(i){e.someoneJoinDesk(t.DeskID,i)})})},t.ws_onSomeoneJoinDesk=function(t){uiCore.Application.closeSetTime(),t.gamePlayerContract.userId!=GameData.getInstance().userData("userId")&&this.someoneJoinDesk(t.gamePlayerContract.deskId,t.gamePlayerContract),FishGameController.onJoinDesk(t)},t.ws_onSomeoneLeaveDesk=function(t){this.someoneLeaveDesk(t.gamePlayerContract.deskId,t.gamePlayerContract)},t.onJoinDesk=function(t){FishGameController.sendJoinDesk(t,6)},t.someoneJoinDesk=function(t,e){if(null!=this.DeskPlayers&&(null==this.DeskPlayers[t]||null==this.DeskPlayers[t][e.SeatNo])){var i;i=null==this.DeskPlayers[t]?{}:this.DeskPlayers[t],i[e.SeatNo]=e,this.DeskPlayers[t]=i,this.DeskScene.someoneJoinSeat(t,e)}},t.someoneLeaveDesk=function(t,e){if(null!=this.DeskPlayers&&null!=this.DeskPlayers[t]&&null!=this.DeskPlayers[t][e.SeatNo]){var i=this.DeskPlayers[t];i[e.SeatNo]=null,this.DeskPlayers[t]=i,this.DeskScene.someoneLeaveSeat(t,e)}},t}();__reflect(DeskController.prototype,"DeskController");var DeskSceneView=function(t){function e(){var e=t.call(this)||this;return e.isRolling=!1,e.kDesShowDeskMaxWidth=1280,e.skinName="DeskSceneSkin",e.kDesShowDeskMaxWidth=Math.floor(.85*uiCore.Application.app.stage.stageWidth),e.scroller=new eui.Scroller,e.scroller.width=e.kDesShowDeskMaxWidth,e.scroller.verticalCenter=65,e.scroller.horizontalCenter=0,e.scroller.bounces=!1,e.addChildAt(e.scroller,1),e.btnDeskNext.right=.05*uiCore.Application.app.stage.stageWidth,e.btnDeskLast.left=.05*uiCore.Application.app.stage.stageWidth,e.scroller.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.deskStartThouchEvent,e),e.scroller.addEventListener(egret.TouchEvent.TOUCH_END,e.deskEndThouchEvent,e),e}return __extends(e,t),e.prototype.deskStartThouchEvent=function(t){this.startX=t.stageX},e.prototype.deskEndThouchEvent=function(t){null!=this.startX&&(this.startX-t.stageX>50?(this.deskListCount/2-1)*this.kDesShowDeskMaxWidth-this.kDesShowDeskMaxWidth>=this.scroller.viewport.scrollH&&this.onBtnDeskNextClick():this.startX-t.stageX<-50&&this.scroller.viewport.scrollH>0&&this.onBtnDeskLastClick())},e.prototype.start=function(){this.initEvent(),this.sharedHeader.setBackScene(RoomSceneView,this.sendExitGame),this.deskListUI={},GameData.getInstance().setUserData("position",2),this.UserDataChange(),0==DeskController.RoomIdx?this.btnDeskRoomName.label=uiCore.LangUtils.getMsgById(8):1==DeskController.RoomIdx?this.btnDeskRoomName.label=uiCore.LangUtils.getMsgById(9):this.btnDeskRoomName.label=uiCore.LangUtils.getMsgById(10),egret.Tween.get(this.fingerImage,{loop:!0}).to({bottom:this.fingerImage.bottom+10},500).to({bottom:this.fingerImage.bottom},500)},e.prototype.sendExitGame=function(){Net.GameService.send(HallSocketType.ExitGame,{},0)},e.prototype.UserDataChange=function(){this.sharedHeader.UserDataChange()},e.prototype.onButtonGameStartClick=function(){uiCore.Application.addLoadding(),FishGameManager.checkFishConfig()&&FishGameManager.initFishManager(uiCore.ZipManager.ZIP_CONFIG.projectConfig);var t={DeskID:1,SeatNo:0,JoinMode:0};DeskController.onJoinDesk(t),uiCore.SoundByteManager.playMusic("BG0_3")},e.prototype.initEvent=function(){this.btnDeskNext.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnDeskNextClick,this),this.btnDeskLast.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnDeskLastClick,this),this.buttonGameStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonGameStartClick,this)},e.prototype.removeEvent=function(){this.btnDeskNext.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnDeskNextClick,this),this.btnDeskLast.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnDeskLastClick,this),this.scroller.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.deskStartThouchEvent,this),this.scroller.removeEventListener(egret.TouchEvent.TOUCH_END,this.deskEndThouchEvent,this),this.buttonGameStart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonGameStartClick,this),egret.Tween.removeTweens(this.scroller.viewport)},e.prototype.onDestroy=function(){egret.Tween.removeTweens(this.fingerImage),this.removeEvent(),t.prototype.onDestroy.call(this)},e.prototype.someoneJoinSeat=function(t,e){var i=this.deskListUI[t];return null==i?void console.log("The desk is null, DeskID: "+t):void i.onPlayerSeatStatus(e.SeatNo,!0,e)},e.prototype.someoneLeaveSeat=function(t,e){var i=this.deskListUI[t];i.onPlayerSeatStatus(e.SeatNo,!1,e)},e.prototype.createDesk=function(t){var e=this,i=new eui.Group;t.forEach(function(t){var n=new SingleDesk(t.DeskID);n.top=0,n.x=(t.DeskID-1)*n.width,i.addChild(n),e.deskListUI[t.DeskID]=n}),this.deskListCount=t.length,this.scroller.height=this.deskListUI[t[0].DeskID].height,this.scroller.viewport=i,this.scroller.scrollPolicyH="ScrollPolicy.OFF",t.length<=2&&(this.btnDeskLast.alpha=0,this.btnDeskLast.enabled=!1,this.btnDeskNext.alpha=0,this.btnDeskNext.enabled=!1)},e.prototype.onBtnDeskNextClick=function(){var t=this;if(!this.isRolling){this.isRolling=!0;var e=egret.Tween.get(this.scroller.viewport).to({scrollH:this.scroller.viewport.scrollH+this.kDesShowDeskMaxWidth,ease:egret.Ease.quadOut},500).call(function(){t.scroller.viewport.scrollH+t.kDesShowDeskMaxWidth>=t.scroller.viewport.contentWidth&&(t.btnDeskNext.alpha=0,t.btnDeskNext.enabled=!1),t.btnDeskLast.alpha=1,t.btnDeskLast.enabled=!0,t.isRolling=!1,egret.Tween.removeTweens(e)})}},e.prototype.onBtnDeskLastClick=function(){var t=this;if(!this.isRolling){this.isRolling=!0;var e=egret.Tween.get(this.scroller.viewport).to({scrollH:this.scroller.viewport.scrollH-this.kDesShowDeskMaxWidth,ease:egret.Ease.quadOut},500).call(function(){t.scroller.viewport.scrollH-t.kDesShowDeskMaxWidth<0&&(t.btnDeskLast.alpha=0,t.btnDeskLast.enabled=!1),t.btnDeskNext.alpha=1,t.btnDeskNext.enabled=!0,t.isRolling=!1,egret.Tween.removeTweens(e)})}},e}(uiCore.Scene);__reflect(DeskSceneView.prototype,"DeskSceneView");var RoomSceneView=function(t){function e(){var e=t.call(this)||this;return e.skinName="RoomSceneSkin",e}return __extends(e,t),e.prototype.start=function(){this.sharedHeader.setBtnGobackState(!1),this.initEvent(),uiCore.SoundByteManager.playMusic("BgMusic"),3!=GameData.getInstance().userData("UserType")&&this.sharedHeader.setBackScene(MainSceneView,this.sendExitGame),GameData.getInstance().setUserData("position",1),this.initRoom()},e.prototype.initRoom=function(){var t=SceneManager.getGameInfo(uiCore.Application.currGameId);if(t){var e=t[0].Min,i=t[1].Min,n=t[2].Min,s=String(t[0].Times).split(","),o=String(t[1].Times).split(","),r=String(t[2].Times).split(",");LibCore.GameConfig.IsPayExchange&&SceneManager.exchangeValue&&(e=(e/SceneManager.exchangeValue).toFixed(2),i=(i/SceneManager.exchangeValue).toFixed(2),n=(n/SceneManager.exchangeValue).toFixed(2),s[0]=(Number(s[0])/SceneManager.exchangeValue).toFixed(2),s[1]=(Number(s[1])/SceneManager.exchangeValue).toFixed(2),o[0]=(Number(o[0])/SceneManager.exchangeValue).toFixed(2),o[1]=(Number(o[1])/SceneManager.exchangeValue).toFixed(2),r[0]=(Number(r[0])/SceneManager.exchangeValue).toFixed(2),r[1]=(Number(r[1])/SceneManager.exchangeValue).toFixed(2)),this.roomLowAdmittance.text=e,this.roomMiddleAdmittance.text=i,this.roomHighAdmittance.text=n,this.roomLowGen.text=s[0]+"~"+s[1],this.roomMiddleGen.text=o[0]+"~"+o[1],this.roomHighGen.text=r[0]+"~"+r[1],this.UserDataChange()}},e.prototype.initEvent=function(){this.btnRoomLow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoinLowRoom,this),this.btnRoomMiddle.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoinMiddleRoom,this),this.btnRoomHigh.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoinHighRoom,this)},e.prototype.UserDataChange=function(){this.sharedHeader.UserDataChange()},e.prototype.JoinRoom=function(t,e){if(0==t.IsFreeJoin){var i=GameData.getInstance().userData("moneya"),n=GameData.getInstance().userData("moneyb"),s=GameData.getInstance().userData("gold_num");if(0==i)return uiCore.Application.removeLoadding(),void uiCore.Alert.show(uiCore.LangUtils.getMsgById(6));if(i<t.Min&&n>0)return uiCore.Application.removeLoadding(),void uiCore.Alert.show(uiCore.LangUtils.getMsgById(6));if(s<t.Min)return uiCore.Application.removeLoadding(),void uiCore.Alert.show(uiCore.LangUtils.getMsgById(7))}DeskController.destroy(),FishGameController.sendLogin(uiCore.Application.currGameId,t.SID),DeskController.RoomInfo=t,DeskController.RoomIdx=e},e.prototype.sendExitGame=function(){Net.GameService.send(HallSocketType.ExitGame,{},0)},e.prototype.readyJoin=function(t){return SceneManager.getGameInfo(t)},e.prototype.onJoinLowRoom=function(){this.onJoinRoom(0)},e.prototype.onJoinMiddleRoom=function(){this.onJoinRoom(1)},e.prototype.onJoinHighRoom=function(){this.onJoinRoom(2)},e.prototype.onJoinRoom=function(t){uiCore.Application.addLoadding();var e=this.readyJoin(uiCore.Application.currGameId);e?this.JoinRoom(e[t],t):uiCore.Application.closeLoaddingTip()},e.prototype.removeEvent=function(){this.btnRoomLow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoinLowRoom,this),this.btnRoomMiddle.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoinMiddleRoom,this),this.btnRoomHigh.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoinHighRoom,this)},e.prototype.onDestroy=function(){this.removeEvent(),t.prototype.onDestroy.call(this)},e}(uiCore.Scene);__reflect(RoomSceneView.prototype,"RoomSceneView");var SingleDesk=function(t){function e(e){var i=t.call(this)||this;return i.kFemaleImageName="desk_female_",i.kMaleImageName="desk_male_",i.kMaxSeatCount=6,i.singleDeskMaxWidth=1280,i.skinName="SingleDeskSkin",i.singleDeskMaxWidth=Math.floor(.85*uiCore.Application.app.stage.stageWidth/2),i.width=i.singleDeskMaxWidth,i.seatUIList={},i.ID=e,i.lblDeskName.text=i.ID+uiCore.LangUtils.getMsgById(5),i.lblDeskName.x=Math.floor(i.width/2.2093),i.seatImagePoints=new Array,i.seatImagePoints.push({f:{x:Math.floor(i.width/1.88787),y:140,w:Math.floor(130.9),h:Math.floor(311*.85)},m:{x:Math.floor(i.width/1.7851),y:125,w:Math.floor(119),h:Math.floor(279.65)}}),i.seatImagePoints.push({f:{x:Math.floor(i.width/1.46588),y:110,w:Math.floor(114.75),h:Math.floor(233.75)},m:{x:Math.floor(i.width/1.390625),y:95,w:Math.floor(106.25),h:Math.floor(252.45)}}),i.seatImagePoints.push({f:{x:Math.floor(i.width/1.5772),y:37,w:Math.floor(110.5),h:Math.floor(226.1)},m:{x:Math.floor(i.width/1.5974),y:25,w:Math.floor(108.8),h:Math.floor(242.25)}}),i.seatImagePoints.push({f:{x:Math.floor(i.width/2.9666),y:46,w:Math.floor(102),h:Math.floor(132.6)},m:{x:Math.floor(i.width/2.83181),y:40,w:Math.floor(96.05),h:Math.floor(136)}}),i.seatImagePoints.push({f:{x:Math.floor(i.width/5.8224),y:65,w:Math.floor(112.2),h:Math.floor(237.15)},m:{x:Math.floor(i.width/5.6636),y:75,w:Math.floor(96.05),h:Math.floor(136)}}),i.seatImagePoints.push({f:{x:Math.floor(i.width/7.7875),y:130,w:Math.floor(139.4),h:Math.floor(278.8)},m:{x:Math.floor(i.width/8.9),y:120,w:Math.floor(133.45),h:Math.floor(290.7)}}),i.btnJoinSeat3.left=Math.floor(i.width/3.115),i.btnJoinSeat0.left=Math.floor(i.width/1.5575),i.btnJoinSeat1.left=Math.floor(i.width/1.297),i.btnJoinSeat2.left=Math.floor(i.width/1.483),i.btnJoinSeat4.left=Math.floor(i.width/7.7875),i.btnJoinSeat5.left=Math.floor(i.width/8.9),i}return __extends(e,t),e.prototype.start=function(){var t=this;this.initEvent();for(var e=0;e<this.kMaxSeatCount;e++){var i=this.seatImagePoints[e].m,n=new eui.Image(this.kMaleImageName+String(e));n.x=i.x,n.y=i.y,n.width=i.w,n.height=i.h,n.alpha=0,this.seatUIList[e]=n}var s=[5,0,1,2,3,4];s.forEach(function(e){t.addChildAt(t.seatUIList[e],0)}),this.deskBackGround=new eui.Image("desk_allSit"),this.deskBackGround.width=.8*this.singleDeskMaxWidth,this.deskBackGround.height=353,this.deskBackGround.horizontalCenter=0,this.deskBackGround.verticalCenter=0,this.addChildAt(this.deskBackGround,0),this.deskBackGround.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDeskBackGround,this)},e.prototype.onDeskBackGround=function(t){var e=null;if(this.btnJoinSeat0.enabled?e=0:this.btnJoinSeat1.enabled?e=1:this.btnJoinSeat2.enabled?e=2:this.btnJoinSeat3.enabled?e=3:this.btnJoinSeat4.enabled?e=4:this.btnJoinSeat5.enabled&&(e=5),null!=e){uiCore.Application.addLoadding(),FishGameManager.checkFishConfig()&&FishGameManager.initFishManager(uiCore.ZipManager.ZIP_CONFIG.projectConfig);var i={DeskID:this.ID,SeatNo:e,JoinMode:1};DeskController.onJoinDesk(i),uiCore.SoundByteManager.playMusic("BG0_3")}},e.prototype.initEvent=function(){this.btnJoinSeat0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoinDeskAtSeatNo,this),this.btnJoinSeat1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoinDeskAtSeatNo,this),this.btnJoinSeat2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoinDeskAtSeatNo,this),this.btnJoinSeat3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoinDeskAtSeatNo,this),this.btnJoinSeat4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoinDeskAtSeatNo,this),this.btnJoinSeat5.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoinDeskAtSeatNo,this),egret.Tween.get(this.btnJoinSeat0,{loop:!0}).to({top:this.btnJoinSeat0.top-10},500).to({top:this.btnJoinSeat0.top},500),egret.Tween.get(this.btnJoinSeat1,{loop:!0}).to({top:this.btnJoinSeat1.top-10},500).to({top:this.btnJoinSeat1.top},500),egret.Tween.get(this.btnJoinSeat2,{loop:!0}).to({top:this.btnJoinSeat2.top-10},500).to({top:this.btnJoinSeat2.top},500),egret.Tween.get(this.btnJoinSeat3,{loop:!0}).to({top:this.btnJoinSeat3.top-10},500).to({top:this.btnJoinSeat3.top},500),egret.Tween.get(this.btnJoinSeat4,{loop:!0}).to({top:this.btnJoinSeat4.top-10},500).to({top:this.btnJoinSeat4.top},500),egret.Tween.get(this.btnJoinSeat5,{loop:!0}).to({top:this.btnJoinSeat5.top-10},500).to({top:this.btnJoinSeat5.top},500)},e.prototype.removeEvent=function(){this.btnJoinSeat0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoinDeskAtSeatNo,this),this.btnJoinSeat1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoinDeskAtSeatNo,this),this.btnJoinSeat2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoinDeskAtSeatNo,this),this.btnJoinSeat3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoinDeskAtSeatNo,this),this.btnJoinSeat4.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoinDeskAtSeatNo,this),this.btnJoinSeat5.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoinDeskAtSeatNo,this),egret.Tween.removeTweens(this.btnJoinSeat0),egret.Tween.removeTweens(this.btnJoinSeat1),egret.Tween.removeTweens(this.btnJoinSeat2),egret.Tween.removeTweens(this.btnJoinSeat3),egret.Tween.removeTweens(this.btnJoinSeat4),egret.Tween.removeTweens(this.btnJoinSeat5),this.deskBackGround&&this.deskBackGround.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDeskBackGround,this)},e.prototype.onDestroy=function(){this.removeEvent(),t.prototype.onDestroy.call(this)},e.prototype.onJoinDeskAtSeatNo=function(t){uiCore.Application.addLoadding(),FishGameManager.checkFishConfig()&&FishGameManager.initFishManager(uiCore.ZipManager.ZIP_CONFIG.projectConfig);var e={DeskID:this.ID,SeatNo:t.target.label,JoinMode:1};DeskController.onJoinDesk(e),uiCore.SoundByteManager.playMusic("BG0_3")},e.prototype.onPlayerSeatStatus=function(t,e,i){this.changeJoinButtonStatus(t,e),this.changePlayerSeatStatus(t,i.Sex,e)},e.prototype.changePlayerSeatStatus=function(t,e,i){var n=this.seatUIList[t];if(i){var s=e?this.seatImagePoints[t].m:this.seatImagePoints[t].f;n.alpha=1,n.x=s.x,n.y=s.y,n.width=s.w,n.height=s.h,n.source=e?this.kMaleImageName+t:this.kFemaleImageName+t}else n.alpha=0;5==t&&(this.btnJoinSeat4.left+=i?-10:10)},e.prototype.changeJoinButtonStatus=function(t,e){switch(t){case 1:this.btnJoinSeat1.alpha=e?0:1,this.btnJoinSeat1.enabled=!e;break;case 2:this.btnJoinSeat2.alpha=e?0:1,this.btnJoinSeat2.enabled=!e;break;case 3:this.btnJoinSeat3.alpha=e?0:1,this.btnJoinSeat3.enabled=!e;break;case 4:this.btnJoinSeat4.alpha=e?0:1,this.btnJoinSeat4.enabled=!e;break;case 5:this.btnJoinSeat5.alpha=e?0:1,this.btnJoinSeat5.enabled=!e;break;default:this.btnJoinSeat0.alpha=e?0:1,this.btnJoinSeat0.enabled=!e}},e}(uiCore.View);__reflect(SingleDesk.prototype,"SingleDesk");var CustomerChatView=function(t){function e(){var e=t.call(this)||this;return e.skinName="CustomerChatSkin",e}return __extends(e,t),e.prototype.start=function(){this.initEvent();var t=GameData.getInstance().GetGameConfig(KVDicKEnum.kCusServi),e=GameData.getInstance().GetServiceCustomer();this.lblCustomerDesc.text=t,this.lblCustomerQQ.text=null!=e&&e.length>0?e[0]:"",this.lblCustomerWeChat.text=null!=e&&e.length>1?e[1]:""},e.prototype.onDestroy=function(){this.removeEvent(),t.prototype.onDestroy.call(this)},e.prototype.initEvent=function(){this.copyWeChatGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCopyWeChat,this),this.copyQQGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCopyQQ,this),this.btnCloseWindow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseWindow,this)},e.prototype.removeEvent=function(){this.copyWeChatGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCopyWeChat,this),this.copyQQGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCopyQQ,this),this.btnCloseWindow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseWindow,this)},e.prototype.onBtnCloseWindow=function(){uiCore.Application.closeWindow(this)},e.prototype.onBtnCopyWeChat=function(){this.copy(this.lblCustomerWeChat.text)},e.prototype.onBtnCopyQQ=function(){this.copy(this.lblCustomerQQ.text)},e.prototype.copy=function(t){var e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select(),e.setSelectionRange(0,e.value.length),document.execCommand("Copy"),document.body.removeChild(e),uiCore.Alert.show(uiCore.LangUtils.getMsgById(4))},e}(uiCore.Window);__reflect(CustomerChatView.prototype,"CustomerChatView");var GameSettingWindow=function(t){function e(){var e=t.call(this)||this;return e.skinName="GameSettingSkin",e.musicSlider.value=uiCore.SoundByteManager.soundValue,e.bgmSlider.value=uiCore.SoundByteManager.musicValue,e}return __extends(e,t),e.prototype.start=function(){this.initEvent()},e.prototype.onDestroy=function(){this.removeEvent(),t.prototype.onDestroy.call(this)},e.prototype.initEvent=function(){this.bgmSlider.addEventListener(egret.Event.CHANGE,this.bgmChangeHandler,this),this.musicSlider.addEventListener(egret.Event.CHANGE,this.musicChangeHandler,this),this.btnCloseWindow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseWindow,this)},e.prototype.removeEvent=function(){this.bgmSlider.removeEventListener(egret.Event.CHANGE,this.bgmChangeHandler,this),this.musicSlider.removeEventListener(egret.Event.CHANGE,this.musicChangeHandler,this),this.btnCloseWindow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseWindow,this)},e.prototype.onBtnCloseWindow=function(){uiCore.Application.closeWindow(this)},e.prototype.bgmChangeHandler=function(t){egret.localStorage.setItem(uiCore.SoundByteManager.FISH_MUSIC_VALUE,t.target.value),uiCore.SoundByteManager.musicValue=t.target.value,uiCore.SoundByteManager.setVolumes(0)},e.prototype.musicChangeHandler=function(t){egret.localStorage.setItem(uiCore.SoundByteManager.FISH_SOUND_VALUE,t.target.value),uiCore.SoundByteManager.soundValue=t.target.value,uiCore.SoundByteManager.setVolumes(1)},e}(uiCore.Window);__reflect(GameSettingWindow.prototype,"GameSettingWindow");var SettingWindow=function(t){function e(){var e=t.call(this)||this;return e.kSwitchXChange=80,e.kSettingOpenBGMImg="setting_chinese_open",e.kSettingCloseBGMImg="setting_chinese_close",e.skinName="SettingWindowSkin2",e}return __extends(e,t),e.prototype.start=function(){this.initEvent(),this._bgmIsMute=0==uiCore.SoundByteManager.musicValue,this._bgmIsMute&&(this.groupBGMSwitch.x-=this.kSwitchXChange,this.lblBGMSwitchDesc.source=this.kSettingCloseBGMImg)},e.prototype.onDestroy=function(){this.removeEvent(),t.prototype.onDestroy.call(this)},e.prototype.initEvent=function(){this.btnCloseWindow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseWindow,this),this.groupBGMSwitch.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnChangeStatus,this)},e.prototype.removeEvent=function(){this.btnCloseWindow.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseWindow,this),this.groupBGMSwitch.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnChangeStatus,this)
},e.prototype.onBtnCloseWindow=function(){uiCore.Application.closeWindow(this)},e.prototype.onBtnChangeStatus=function(){this._bgmIsMute?(this.groupBGMSwitch.x=549,this.lblBGMSwitchDesc.source=this.kSettingOpenBGMImg):(this.groupBGMSwitch.x-=this.kSwitchXChange,this.lblBGMSwitchDesc.source=this.kSettingCloseBGMImg),this._bgmIsMute=!this._bgmIsMute,egret.localStorage.setItem(uiCore.SoundByteManager.FISH_MUSIC_VALUE,this._bgmIsMute?"0":"0.5"),egret.localStorage.setItem(uiCore.SoundByteManager.FISH_SOUND_VALUE,this._bgmIsMute?"0":"0.8"),uiCore.SoundByteManager.musicValue=this._bgmIsMute?0:.5,uiCore.SoundByteManager.soundValue=this._bgmIsMute?0:.8,uiCore.SoundByteManager.setVolumes()},e}(uiCore.Window);__reflect(SettingWindow.prototype,"SettingWindow");var SharedSceneView=function(t){function e(){var e=t.call(this)||this;return e.kStaticUserIcon="player_icon_",e.skinName="SharedSceneSkin",e}return __extends(e,t),e.prototype.start=function(){this.initEvent();var t=!0;uiCore.LangUtils.getLangType()==uiCore.LangUtils.ZH_CN||LibCore.GameConfig.IsMessageOpen||(t=!1),this.noticeItemGroup.visible=t,t&&SystemMsg.getInstance().skin(this.noticeItemGroup,this.noticeLabel,this.noticeScroller),GameData.getInstance().userData("playerHeadId")?this.btnUserInfo.iconDisplay.source=GameData.getInstance().userData("playerHeadId"):this.btnUserInfo.iconDisplay.source=this.kStaticUserIcon+GameData.getInstance().userData("iconid")},e.prototype.UserDataChange=function(){this.userID.text="ID:"+GameData.getInstance().userData("userId"),this.nickname.text=GameData.getInstance().userData("nickname");var t=GameData.getInstance().userData("gold_num");t>=0&&(LibCore.GameConfig.IsPayExchange&&SceneManager.exchangeValue&&(t=(t/SceneManager.exchangeValue).toFixed(2)),this.goldnum.text=t)},e.prototype.initEvent=function(){this.btnTopSetting.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnSettingClick,this),this.btnGoback.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnBackClick,this)},e.prototype.removeEvent=function(){this.btnTopSetting.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnSettingClick,this),this.btnGoback.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnBackClick,this)},e.prototype.onDestroy=function(){this.removeEvent(),t.prototype.onDestroy.call(this)},e.prototype.onBtnSettingClick=function(){uiCore.Application.addWindow(new SettingWindow)},e.prototype.onBtnCustomerClick=function(){uiCore.Application.addWindow(new CustomerChatView)},e.prototype.onBtnBackClick=function(){this.backScene?SceneManager.changeSceneView(this.backScene):location.reload(),this.callback&&this.callback()},e.prototype.setBackScene=function(t,e){this.backScene=t,this.callback=e},e.prototype.setBtnGobackState=function(t){this.btnGoback.visible=t},e}(uiCore.Scene);__reflect(SharedSceneView.prototype,"SharedSceneView");